!function(){function t(t){return void 0!==t}function e(t){t=t.split(".");for(var e,n=Ia;e=t.shift();){if(null==n[e])return null;n=n[e]}return n}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function r(t){return"array"==n(t)}function i(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function o(t){return"string"==typeof t}function a(t){return"boolean"==typeof t}function s(t){return"number"==typeof t}function u(t){return"function"==n(t)}function l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function c(t,e,n){return t.call.apply(t.bind,arguments)}function f(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function h(t,e,n){return h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:f,h.apply(null,arguments)}function p(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function g(e,n){var r=e.split("."),i=Ia;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(var o;r.length&&(o=r.shift());)!r.length&&t(n)?i[o]=n:i=i[o]?i[o]:i[o]={}}function d(t,e){function n(){}n.prototype=e.prototype,t.B=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qc=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function v(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function y(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function b(t){if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function m(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function _(t){return/^[\s\xa0]*$/.test(t)}function w(t){return Wa.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(Ba,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(La,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Ma,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(Ua,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Ha,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Va,"&#0;")),t):t}function k(t,e){for(var n=e.length,r=0;r<n;r++){var i=1==n?e:e.charAt(r);if(t.charAt(0)==i&&t.charAt(t.length-1)==i)return t.substring(1,t.length-1)}return t}function x(t){if(t=String(t),t.quote)return t.quote();for(var e=['"'],n=0;n<t.length;n++){var r,i=t.charAt(n),o=i.charCodeAt(0),a=n+1;(r=za[i])||(31<o&&127>o||(i in Ka?i=Ka[i]:i in za?i=Ka[i]=za[i]:(o=i,r=i.charCodeAt(0),31<r&&127>r?o=i:(256>r?(o="\\x",(16>r||256<r)&&(o+="0")):(o="\\u",4096>r&&(o+="0")),o+=r.toString(16).toUpperCase()),i=Ka[i]=o)),r=i),e[a]=r}return e.push('"'),e.join("")}function E(t,e){return t<e?-1:t>e?1:0}function S(t,e){e.unshift(t),b.call(this,m.apply(null,e)),e.shift()}function j(t,e){throw new S("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function O(t,e){var n=C(t,e,void 0);return 0>n?null:o(t)?t.charAt(n):t[n]}function C(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,a=0;a<r;a++)if(a in i&&e.call(n,i[a],a,t))return a;return-1}function N(t){if(!r(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function T(t,e){var n,r=Qa(t,e);return(n=0<=r)&&Ga.splice.call(t,r,1),n}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function I(t,e,n){return 2>=arguments.length?Ga.slice.call(t,e):Ga.slice.call(t,e,n)}function R(t,e){if(!i(t)||!i(e)||t.length!=e.length)return!1;for(var n=t.length,r=P,o=0;o<n;o++)if(!r(t[o],e[o]))return!1;return!0}function P(t,e){return t===e}function F(t){return-1!=$a.indexOf(t)}function q(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function D(e,n){for(var r=i(n),o=r?n:arguments,r=r?0:1;r<o.length&&(e=e[o[r]],t(e));r++);return e}function B(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<rs.length;o++)n=rs[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function L(t){var e=arguments.length;if(1==e&&r(arguments[0]))return L.apply(null,arguments[0]);for(var n={},i=0;i<e;i++)n[arguments[i]]=!0;return n}function M(t){Ia.setTimeout(function(){throw t},0)}function U(){var e=Ia.MessageChannel;if("undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var t=document.createElement("iframe");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow,t=e.document;t.open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host,t=h(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this);e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!=typeof e&&!F("Trident")&&!F("MSIE")){var n=new e,r={},i=r;return n.port1.onmessage=function(){if(t(r.next)){r=r.next;var e=r.Ub;r.Ub=null,e()}},function(t){i.next={Ub:t},i=i.next,n.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(t){var e=document.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){Ia.setTimeout(t,0)}}function H(t,e){ns||V(),is||(ns(),is=!0),os.push(new z(t,e))}function V(){if(Ia.Promise&&Ia.Promise.resolve){var t=Ia.Promise.resolve();ns=function(){t.then(W)}}else ns=function(){var t=W;!u(Ia.setImmediate)||Ia.Window&&Ia.Window.prototype.setImmediate==Ia.setImmediate?(es||(es=U()),es(t)):Ia.setImmediate(t)}}function W(){for(;os.length;){var t=os;os=[];for(var e=0;e<t.length;e++){var n=t[e];try{n.a.call(n.b)}catch(r){M(r)}}}is=!1}function z(t,e){this.a=t,this.b=e}function K(t,e){this.b=as,this.h=void 0,this.a=this.c=null,this.f=this.g=!1;try{var n=this;t.call(e,function(t){Q(n,ss,t)},function(t){if(!(t instanceof tt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Q(n,us,t)})}catch(r){Q(this,us,r)}}function $(t,e){t.a&&t.a.length||t.b!=ss&&t.b!=us||X(t),t.a||(t.a=[]),t.a.push(e)}function G(e,n,r,i){var o={Ea:null,cc:null,dc:null};return o.Ea=new K(function(e,a){o.cc=n?function(t){try{var r=n.call(i,t);e(r)}catch(o){a(o)}}:e,o.dc=r?function(n){try{var o=r.call(i,n);!t(o)&&n instanceof tt?a(n):e(o)}catch(s){a(s)}}:a}),o.Ea.c=e,$(e,o),o.Ea}function Q(t,e,n){if(t.b==as){if(t==n)e=us,n=new TypeError("Promise cannot resolve to itself");else{if(y(n))return t.b=1,void n.then(t.i,t.j,t);if(l(n))try{var r=n.then;if(u(r))return void J(t,n,r)}catch(i){e=us,n=i}}t.h=n,t.b=e,X(t),e!=us||n instanceof tt||Z(t,n)}}function J(t,e,n){function r(e){o||(o=!0,t.j(e))}function i(e){o||(o=!0,t.i(e))}t.b=1;var o=!1;try{n.call(e,i,r)}catch(a){r(a)}}function X(t){t.g||(t.g=!0,H(t.m,t))}function Y(t,e,n,r){if(n==ss)e.cc(r);else{if(e.Ea)for(;t&&t.f;t=t.c)t.f=!1;e.dc(r)}}function Z(t,e){t.f=!0,H(function(){t.f&&ls.call(null,e)})}function tt(t){b.call(this,t)}function et(t,e){this.j=[],this.Y=e||null,this.b=this.c=!1,this.g=void 0,this.ja=this.K=this.m=!1,this.i=0,this.f=null,this.G=0}function nt(t,e,n){t.c=!0,t.g=n,t.b=!e,t.yb()}function rt(t){if(t.c){if(!t.ja)throw new ut;t.ja=!1}}function it(t,e,n,r){return t.j.push([e,n,r]),t.c&&t.yb(),t}function ot(t,e){e instanceof et?t.H(h(e.ia,e)):t.H(function(){return e})}function at(t){return Ya(t.j,function(t){return u(t[1])})}function st(t){var e=new et;return e.callback(t),e}function ut(){b.call(this)}function lt(t){this.gb=Ia.setTimeout(h(this.b,this),0),this.a=t}function ct(t){var e=cs[t];e&&(Ia.clearTimeout(e.gb),delete cs[t])}function ft(){this.a="",this.b=hs}function ht(t){return t instanceof ft&&t.constructor===ft&&t.b===hs?t.a:(j("expected object of type Const, got '"+t+"'"),"type_error:Const")}function pt(t){var e=new ft;return e.a=t,e}function gt(){this.a="",this.b=ps}function dt(t){var e=new gt;return e.a=t,e}function vt(){this.a="",this.b=ms}function yt(t){return t instanceof vt&&t.constructor===vt&&t.b===ms?t.a:(j("expected object of type SafeUrl, got '"+t+"'"),"type_error:SafeUrl")}function bt(t){try{var e=encodeURI(t)}catch(n){return"about:invalid#zClosurez"}return e.replace(ys,function(t){return bs[t]})}function mt(t){var e=new vt;return e.a=t,e}function _t(){this.a=_s}function wt(){this.a="",this.c=Es,this.b=null}function kt(t){return t instanceof wt&&t.constructor===wt&&t.c===Es?t.a:(j("expected object of type SafeHtml, got '"+t+"'"),"type_error:SafeHtml")}function xt(t){if(t instanceof wt)return t;var e=null;return t.Db&&(e=t.ua()),Ot(w(t.oa?t.ha():String(t)),e)}function Et(t){if(t instanceof wt)return t;t=xt(t);var e;return e=kt(t).replace(/  /g," &#160;").replace(/(\r\n|\r|\n)/g,"<br>"),Ot(e,t.ua())}function St(e,n,i){if(!ws.test(e))throw Error("Invalid tag name <"+e+">.");if(e.toLowerCase()in xs)throw Error("Tag name <"+e+"> is not allowed for SafeHtml.");var o=null,a="<"+e;if(n)for(var s in n){if(!ws.test(s))throw Error('Invalid attribute name "'+s+'".');var u=n[s];if(null!=u){var c,f=e;if(c=s,u instanceof ft)u=ht(u);else if("style"==c.toLowerCase()){if(!l(u))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof u+" given: "+u);if(!(u instanceof gt)){var f="",h=void 0;for(h in u){if(!/^[-_a-zA-Z0-9]+$/.test(h))throw Error("Name allows only [-_a-zA-Z0-9], got: "+h);var p=u[h];null!=p&&(p instanceof ft?p=ht(p):ds.test(p)||(j("String value allows only [-.%_!# a-zA-Z0-9], got: "+p),p="zClosurez"),f+=h+":"+p+";")}u=f?dt(f):gs}f=void 0,u instanceof gt&&u.constructor===gt&&u.b===ps?f=u.a:(j("expected object of type SafeStyle, got '"+u+"'"),f="type_error:SafeStyle"),u=f}else{if(/^on/i.test(c))throw Error('Attribute "'+c+'" requires goog.string.Const value, "'+u+'" given.');if(c.toLowerCase()in ks)if(u instanceof _t)u instanceof _t&&u.constructor===_t&&u.a===_s?u="":(j("expected object of type TrustedResourceUrl, got '"+u+"'"),u="type_error:TrustedResourceUrl");else{if(!(u instanceof vt))throw Error('Attribute "'+c+'" on tag "'+f+'" requires goog.html.SafeUrl or goog.string.Const value, "'+u+'" given.');u=yt(u)}}u.oa&&(u=u.ha()),c=c+'="'+w(String(u))+'"',a+=" "+c}}return t(i)?r(i)||(i=[i]):i=[],!0===fs[e.toLowerCase()]?a+=">":(o=jt(i),a+=">"+kt(o)+"</"+e+">",o=o.ua()),(e=n&&n.dir)&&(o=/^(ltr|rtl|auto)$/i.test(e)?0:null),Ot(a,o)}function jt(t){function e(t){r(t)?Ja(t,e):(t=xt(t),i+=kt(t),t=t.ua(),0==n?n=t:0!=t&&n!=t&&(n=null))}var n=0,i="";return Ja(arguments,e),Ot(i,n)}function Ot(t,e){var n=new wt;return n.a=t,n.b=e,n}function Ct(){}function Nt(t){if(t instanceof Ct)return t;if("function"==typeof t.tb)return t.tb(!1);if(i(t)){var e=0,n=new Ct;return n.next=function(){for(;;){if(e>=t.length)throw js;if(e in t)return t[e++];e++}},n}throw Error("Not implemented")}function Tt(t,e){if(i(t))try{Ja(t,e,void 0)}catch(n){if(n!==js)throw n}else{t=Nt(t);try{for(;;)e.call(void 0,t.next(),void 0,t)}catch(r){if(r!==js)throw r}}}function At(t,e){this.b={},this.a=[],this.f=this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t){var i;if(t instanceof At)i=t.na(),r=t.cb();else{var n=[],o=0;for(i in t)n[o++]=i;i=n,n=[],o=0;for(r in t)n[o++]=t[r];r=n}for(n=0;n<i.length;n++)this.set(i[n],r[n])}}function It(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Object.prototype.hasOwnProperty.call(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)r=t.a[e],Object.prototype.hasOwnProperty.call(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Rt(){var t=Ia.document;return t?t.documentMode:void 0}function Pt(t){var e;if(!(e=Rs[t])){e=0;for(var n=Da(String(Is)).split("."),r=Da(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"",u=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var c=u.exec(a)||["","",""],f=l.exec(s)||["","",""];if(0==c[0].length&&0==f[0].length)break;e=E(0==c[1].length?0:parseInt(c[1],10),0==f[1].length?0:parseInt(f[1],10))||E(0==c[2].length,0==f[2].length)||E(c[2],f[2])}while(0==e)}e=Rs[t]=0<=e}return e}function Ft(t){var e;return e||(e=qt(t||arguments.callee.caller,[])),e}function qt(t,e){var n=[];if(0<=Qa(e,t))n.push("[...circular reference...]");else if(t&&50>e.length){n.push(Dt(t)+"(");for(var r=t.arguments,i=0;r&&i<r.length;i++){0<i&&n.push(", ");var o;switch(o=r[i],typeof o){case"object":o=o?"object":"null";break;case"string":break;case"number":o=String(o);break;case"boolean":o=o?"true":"false";break;case"function":o=(o=Dt(o))?o:"[fn]";break;default:o=typeof o}40<o.length&&(o=o.substr(0,40)+"..."),n.push(o)}e.push(t),n.push(")\n");try{n.push(qt(t.caller,e))}catch(a){n.push("[exception trying to get caller]\n")}}else t?n.push("[...long stack...]"):n.push("[end]");return n.join("")}function Dt(t){if(qs[t])return qs[t];if(t=String(t),!qs[t]){var e=/function ([^\(]+)/.exec(t);qs[t]=e?e[1]:"[Anonymous]"}return qs[t]}function Bt(t,e,n,r,i){"number"==typeof i||Ds++,this.g=r||Fa(),this.f=t,this.c=e,this.b=n,delete this.a}function Lt(t){this.g=t,this.a=this.f=this.b=this.c=null}function Mt(t,e){this.name=t,this.value=e}function Ut(t){return t.b?t.b:t.c?Ut(t.c):(j("Root logger has no level set."),null)}function Ht(){Qs||(Qs=new Lt(""),Gs[""]=Qs,Qs.b=Hs)}function Vt(){return Ht(),Qs}function Wt(t){Ht();var e;if(!(e=Gs[t])){e=new Lt(t);var n=t.lastIndexOf("."),r=t.substr(n+1),n=Wt(t.substr(0,n));n.f||(n.f={}),n.f[r]=e,e.c=n,Gs[t]=e}return e}function zt(t,e,n){t&&t.log(e,n,void 0)}function Kt(t,e){t&&t.log(Ls,e,void 0)}function $t(t,e){t&&t.log(Ms,e,void 0)}function Gt(t,e){t&&t.log(Vs,e,void 0)}function Qt(t,e){t&&t.log(zs,e,void 0)}function Jt(t,e){t&&t.log(Ws,e,void 0)}function Xt(t){b.call(this,t),this.name="ydn.error.ArgumentException"}function Yt(t){b.call(this,t),this.name="ydn.error.TypeError"}function Zt(t){b.call(this,t),this.name="ydn.error.NotSupportedException"}function te(t){b.call(this,t),this.name="ydn.error.NotImplementedException"}function ee(t){b.call(this,t),this.name="ydn.error.InvalidOperationException"}function ne(t){Error.captureStackTrace?Error.captureStackTrace(this,ne):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.InternalError"}function re(t,e){et.call(this,0,e),this.h=[]}function ie(t,e){for(var n=0;n<t.h.length;n++)t.h[n][0].call(t.h[n][1],e)}function oe(t,e,n,r){t>e&&(e=t=void 0),null===t&&(t=void 0),null===e&&(e=void 0),this.lower=t,this.upper=e,this.lowerOpen=!!n,this.upperOpen=!!r}function ae(t){return pe(t)}function se(t){return new oe(t,t,(!1),(!1))}function ue(t,e,n,r){return new oe(t,e,n,r)}function le(t,e){return new oe((void 0),t,(void 0),(!!e))}function ce(t,e){return new oe(t,(void 0),(!!e),(void 0))}function fe(t){var e;if(r(t))e=A(t),e.push("￿");else if(o(t))e=t+"￿";else{if(!s(t))return se(t);e=t+2.220460492503131e-16,t-=2.220460492503131e-16}return ue(t,e,!1,!0)}function he(t){return t=t||{},{lower:t.lower,upper:t.upper,lowerOpen:t.lowerOpen,upperOpen:t.upperOpen}}function pe(t){return null!=t?null!=t.upper&&null!=t.lower?Js.bound(t.lower,t.upper,!!t.lowerOpen,!!t.upperOpen):null!=t.upper?Js.upperBound(t.upper,t.upperOpen):null!=t.lower?Js.lowerBound(t.lower,t.lowerOpen):null:null}function ge(t){if(t instanceof oe)return"";if(null!=t){if(l(t)){for(var e in t){var n;if((n=t.hasOwnProperty(e))&&(n=!(0<=Qa(["lower","upper","lowerOpen","upperOpen"],e))),n)return'invalid attribute "'+e+'" in key range object'}return""}return"key range must be an object"}return""}function de(t){if(!t)return"";var e=t.lowerOpen?"(":"[";return null!=t.lower&&(e+=t.lower+", "),null!=t.upper&&(e+=t.upper),e+=t.upperOpen?")":"]"}function ve(t,e,n,r,i){if(n)if(n.lowerOpen||n.upperOpen||null==n.lower||null==n.upper||0!==au(n.lower,n.upper)){if(null!=n.lower){var o=n.lowerOpen?" > ":" >= ";r.push(t+o+"?"),i.push($n(n.lower,e))}null!=n.upper&&(o=n.upperOpen?" < ":" <= ",r.push(t+o+"?"),i.push($n(n.upper,e)))}else r.push(t+" = ?"),i.push($n(n.lower,e))}function ye(e,n,r,i){var o,a,s,u;if("starts"==e||"^"==e)return fe(n);if("<"==e||"<="==e)o=n,s="<"==e;else if(">"==e||">="==e)a=n,u=">"==e;else{if("="!=e&&"=="!=e)throw new Xt("invalid op: "+e);o=a=n}if("<"==r||"<="==r)o=i,s="<"==r;else if(">"==r||">="==r)a=i,u=">"==r;else if(t(r))throw new Xt("invalid op2: "+r);return ue(a,o,u,s)}function be(e,n){var r,a;for(2==arguments.length&&o(arguments[1])?(r=!0,a=arguments[1].split(".")):a=(r=i(n))?n:arguments,r=r?0:1;r<a.length&&(e=e[a[r]],t(e));r++);return e}function me(t,e,n){if(t)if(-1==e.indexOf("."))t[e]=n;else{e=e.split(".");for(var r,i=e.pop();r=e.shift();)l(t[r])||(t[r]={}),t=t[r];t[i]=n}}function _e(t){var e=[t];t=new Oe;for(var n,r,i=0;void 0!==(r=e.pop());){if(0===i%4&&12<i+4&&(t.write(i),i=0),n=typeof r,r instanceof Array){if(i+=4,0<r.length){for(e.push(Xs),n=r.length;n--;)e.push(r[n]);continue}t.write(i)}else if("number"===n)i+=1,t.write(i),ke(t,r);else if(r instanceof Date)i+=2,t.write(i),ke(t,r.valueOf());else if("string"===n){for(i+=3,t.write(i),i=t,n=0;n<r.length;n++){var o=r.charCodeAt(n);126>=o?i.write(o+1):16510>=o?(o-=127,i.write(128|o>>8,255&o)):i.write(192|o>>10,o>>2|255,(3|o)<<6)}i.write(0)}else{if(r!==Xs)return"";t.write(0)}i=0}for(e=t.a.length;"00"===t.a[--e];);return t.a.length=++e,t.toString()}function we(t){for(var e,n,r=[],i=r,o=[],a=new Se(t);null!=je(a);)if(0===a.a)i=o.pop();else{if(null===a.a)break;for(;;){e=a.a/4|0,t=a.a%4;for(var s=0;s<e;s++)n=[],i.push(n),o.push(i),i=n;if(!(0===t&&12<a.a+4))break;je(a)}1===t?i.push(xe(a)):2===t?i.push(new Date(xe(a))):3===t?i.push(Ee(a)):0===t&&(i=o.pop())}return r[0]}function ke(t,e){var n,r,i;n=e;var o=i=r=0;if(0!==n)if(isFinite(n)){if(0>n&&(r=1,n=-n),o=0,2.2250738585072014e-308<=n){for(i=n;1>i;)o--,i*=2;for(;2<=i;)o++,i/=2;i=o+1023}o=i?Math.floor(4503599627370496*(n/Math.pow(2,o)-1)):Math.floor(n/5e-324)}else i=2047,isNaN(n)?o=0x8000000000000:-(1/0)===n&&(r=1);n=r,r=i,i=o,n&&(i=0xfffffffffffff-i,r=2047-r),t.write((n?0:128)|r>>4),t.write((15&r)<<4|0|i/281474976710656),i%=281474976710656,n=0|i/4294967296,t.write(n>>8,255&n),i%=4294967296,n=0|i/65536,t.write(n>>8,255&n),n=i%65536,t.write(n>>8,255&n)}function xe(t){var e=0|je(t),n=!(e>>7),r=n?-1:1,i=(127&e)<<4,e=0|je(t),i=i+(e>>4);n&&(i=2047-i);for(var e=[n?15-(15&e):15&e],o=6;o--;)e.push(n?255-(0|je(t)):0|je(t));for(t=0,o=7;o--;)t=t/256+e[o];return t/=16,0===t&&0===i?0:(t+1)*Math.pow(2,i-1023)*r}function Ee(t){for(var e,n,r=[],i=0,o=0,a=0;e=je(t),0!==e&&null!=e;)0===i?(n=e>>6,2>n&&!isNaN(e)?r.push(String.fromCharCode(e-1)):(i=n,o=e<<10,a++)):2===i?(r.push(String.fromCharCode(o+e+127)),i=o=a=0):2===a?(o+=e<<2,a++):(r.push(String.fromCharCode(o|e>>6)),i=o=a=0);return r.join("")}function Se(t){this.a=null,this.b=t,this.c=this.b.length-1,this.index=-1}function je(t){return t.a=t.index<t.c?parseInt(t.b.charAt(++t.index)+t.b.charAt(++t.index),16):null}function Oe(){this.a=[],this.b=void 0}function Ce(t,e){var n=_e(t),r=_e(e);return n>r?1:n==r?0:-1}function Ne(e,n,r,i,a){if(!(n instanceof oe))if(o(n)&&t(r))n=ye(n,r,i,a);else if(null!=n){if(!(n instanceof oe)){if(!l(n))throw new Xt("Invalid key range: "+n+" of type "+typeof n);n=new oe(n.lower,n.upper,n.lowerOpen,n.upperOpen)}}else n=null;this.a=n,this.ma=e}function Te(){0!=ru&&(iu[this[Ra]||(this[Ra]=++Pa)]=this),this.ia=this.ia,this.ja=this.ja}function Ae(t,e,n,r){Te.call(this),this.b=n,this.s=n.getName(),this.O=void 0,this.g=!1,this.w=null,this.f=t,this.Qb=e,this.ta=0,this.N=this.C=!1,this.u=r||4,this.j=this.c=this.a=void 0,this.G=function(){throw new ne},this.Y=function(){throw new ne},this.Pb=function(){}}function Ie(t,e){t.Y(e),Re(t),t.C=!0}function Re(t){null!=t.c?t.c=mn(t.c):t.c=void 0,null!=t.a?t.a=mn(t.a):t.a=void 0,t.Pb(t.N,t.a,t.c)}function Pe(t){t.N=!0,Qt(t.logger,t+": exit"),Re(t)}function Fe(t,e,n){Qt(t.logger,t+" restarting"),t.C=!1,t.N=!1,t.openCursor(n,e)}function qe(){}function De(e,n,r,i,s,u,l){if(!o(e))throw new TypeError("store name must be a string, but "+e+" found.");if(this.b=e,this.c=n,this.h=l,this.u=!!this.c,t(i)&&!a(i))throw new Xt("reverse value must be a boolean, but "+typeof i+" found");if(t(s)&&!a(s))throw new Xt("unique value must be a boolean, but "+typeof s+" found");if(t(u)&&!a(u))throw new Xt("key_only value must be a boolean, but "+typeof u+" found");if(this.f=t(u)?u:!!o(this.c),e="next",i&&s?e="prevunique":i?e="prev":s&&(e="nextunique"),this.m=e,i=ge(r))throw new Xt("Invalid key range: "+i);this.a=pe(r),this.g=ou,this.C=NaN}function Be(t,e,n){if(3<arguments.length)throw new Xt("too many argument");De.call(this,t,void 0,e,n,void 0,!0)}function Le(t,e,n,r,i){if(!o(e))throw new Xt("index name must be string");De.call(this,t,e,n,r,i,!0)}function Me(t,e,n){if(3<arguments.length)throw new Xt("too many argument");De.call(this,t,void 0,e,n,void 0,!1)}function Ue(t,e,n,r,i){if(!o(e))throw new Xt("index name must be string");De.call(this,t,e,n,r,i,!1)}function He(t,e,n){re.call(this,0,n),this.C=t,this.h=[],this.u=[],this.ta=[],this.a=null,this.ya="",this.N=0}function Ve(t,e,n){if(t.a=e,t.ya=n,Jt(t.logger,t+" BEGIN"),e){for(n=0;n<t.u.length;n++)t.u[n][0].call(t.u[n][1],e);t.u.length=0}}function We(t){var e=new He(t.C);return t.N++,Ve(e,t.a,t.ya+"C"+t.N),e}function ze(t){Jt(t.logger,t+" END"),t.a=null}function Ke(t,e,n){var r=t.ta.shift();n=!!n,r?r[0].call(r[1],e,n,function(e,n){Ke(t,e,n)}):n?t.o(e):t.callback(e)}function $e(t,e,n){t.ta.push([e,n])}function Ge(t,e,n){t.a?e.call(n,t.a):t.u.push([e,n])}function Qe(t){var e="";return t.ya&&(e=t.a?"*":"",e="["+t.ya+e+"]"),t.C+e}function Je(t,e){var n=new He(t);return Ke(n,e),n}function Xe(t,e,n,r){if("transaction"in t)this.i=t,this.c=this.h=null;else{if(!("objectStore"in t))throw new Cr("storage instance require.");if(this.i=null,this.h=t.db,this.c=t,!this.c.db.objectStoreNames.contains(e))throw new Cr('store "'+e+'" not in transaction.')}this.j=e,this.m=n,this.u=r,this.b=[],this.a=0,this.g=!1}function Ye(t,e){t.a++,e.onsuccess=function(e){if(e=e.target.result){if(u(t.u)){var n=e.value;t.u(e.primaryKey,null!=t.m?n[t.m]:n)}else $t(t.logger,"sink gone, dropping value for: "+e.primaryKey);e&&0<t.b.length?e["continue"](t.b.shift()):(t.a--,0==t.a&&t.ea&&t.ea())}},e.onerror=function(){$t(t.logger,"seeking fail. "+("error"in e?e.error.name+":"+e.error.message:"")),t.a--,0==t.a&&t.ea&&t.ea()}}function Ze(t,e){0==t.b.length&&0==t.a?e():t.ea=e}function tn(t){if(!t.g){var e=function(e,n){t.c=null,"complete"!==e&&$t(t.logger,n.name+":"+n.message),Qt(t.logger,t+" transaction "+e)},n=function(e){var n=t.b.shift();Qt(t.logger,t+" transaction started for "+n),e=e.objectStore(t.j),Ye(t,e.openCursor(n))};if(t.c)Qt(t.logger,t+" using existing tx."),n(t.c);else if(t.h)Qt(t.logger,t+" creating tx from IDBDatabase."),t.f=t.h.transaction([t.j],Zs),t.f.oncomplete=function(t){e("complete",t)},t.f.onerror=function(t){e("error",t)},t.f.onabort=function(t){e("abort",t)};else{if(!t.i)throw new Ar("no way to create a transaction provided.");Qt(t.logger,t+" creating tx from ydn.db.con.IStorage."),t.g=!0,t.i.transaction(function(e){t.g=!1,n(e)},[t.j],Zs,e)}}}function en(e,n,r){if(e&&e instanceof Dr?this.Pa=e:e&&e.db&&(this.Pa=null,nn(this,e)),!o(n))throw new Xt("a store name required.");if(this.c=n,t(r)&&!o(r))throw new Xt("projection index name must be a string.");this.Qa=r,this.qa=null,this.b=[],this.a=[],this.Ha=!1}function nn(t,e){if(!e.db)throw new Xt("Invalid IndexedDB Transaction.");t.qa=new Xe(e,t.c,t.Qa,h(t.ea,t))}function rn(t){var e=0<t.a.length;if(e&&!t.Ha&&u(t.Lb)){var n=function(){rn(t)},r=t.b.shift(),i=t.a.shift(),e=0<t.a.length,n=t.Lb(r,i,e?n:null);e&&!n&&rn(t)}}function on(t,e){if(null!=t&&!("push"in t))throw new Cr('output receiver object must have "push" method.');this.a=t||null,this.i=e,this.g=0,this.b=!1,this.f=t instanceof en&&!!t.Qa}function an(e,n,r){var i,o=null!=i;if(!t(i)){i=r[0];for(var o=null!=i,a=1;o&&a<r.length;a++)null!=r[a]&&0==au(r[a],i)||(o=!1)}return o&&(e.g++,e.a&&(e.f?e.a.push(i,void 0):e.a.push(i)),t(e.i)&&e.g>=e.i)?[]:n}function sn(t){Error.captureStackTrace?Error.captureStackTrace(this,sn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ConstraintError"}function un(t){Error.captureStackTrace?Error.captureStackTrace(this,un):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.db.VersionError"}function ln(t){Error.captureStackTrace?Error.captureStackTrace(this,ln):this.stack=Error().stack||"",t&&(this.message=String(t))}function cn(t){Error.captureStackTrace?Error.captureStackTrace(this,cn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="InvalidStateError"}function fn(t){Error.captureStackTrace?Error.captureStackTrace(this,fn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="InvalidAccessError"}function hn(t){Error.captureStackTrace?Error.captureStackTrace(this,hn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="NotFoundError"}function pn(t,e){Error.captureStackTrace?Error.captureStackTrace(this,pn):this.stack=Error().stack||"",e&&(this.message=String(e)),this.message+=" :"+t.message+" ["+t.code+"]",this.name="SQLError"}function gn(t,e){Error.captureStackTrace?Error.captureStackTrace(this,gn):this.stack=Error().stack||"",e&&(this.message=String(e)),this.message+=" :"+t.message,this.name="SecurityError"}function dn(t){Error.captureStackTrace?Error.captureStackTrace(this,dn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.db.SqlParseError"}function vn(t){Error.captureStackTrace?Error.captureStackTrace(this,vn):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.db.TimeoutError"}function yn(e,n,r){var i;if(l(e))i=e.store,n=e.id,null!=e.parent&&(r=new yn(e.parent));else if(t(n))i=e;else if(i=e.lastIndexOf("^|"),n=e,0<i&&(n=e.substr(i),r=new yn(e.substring(0,i))),n=n.split("^:"),i=n[0],n=n[1],!t(n))throw Error("Invalid key value: "+e);this.s=i,this.id=n,this.parent=r||null}function bn(t){return r(t.id)?t.id.join("^|"):t.id instanceof Date?+t.id:t.id}function mn(t){if(i(t)){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[n];return e}return t}function _n(t,e){this.a=e}function wn(t){this.c=t,this.a=null,this.b=0}function kn(t){return!!t.a&&!t.f}function xn(t,e,n,r,i,o){this.K=t,this.N=e,this.a=this.f=0,this.G=r,this.C=i,this.g=n||uu,this.j=o||0}function En(t){if(!t)throw new cn("No active transaction");if(u(t.abort))t.abort();else{if(!u(t.executeSql))throw new Zt;t.executeSql("ABORT",[],null,function(){return!0})}}function Sn(t,e,n,r,i,o){xn.call(this,t,e,n,r,i,o),this.c=[],this.h=[],this.i=null,this.b=new wn(e),this.m=o||0,this.u=!1}function jn(t,e,n){if("multi"==t.g)t:if(t=t.b,!t.R||!t.mode||n!=t.mode&&(t.mode!=tu||n!=Zs)||e.length>t.R.length)e=!1;else{for(n=0;n<e.length;n++)if(-1==t.R.indexOf(e[n])){e=!1;break t}e=!0}else if("repeat"==t.g)t:if(t=t.b,t.R&&t.mode&&n==t.mode&&t.R.length==e.length){for(n=0;n<e.length;n++)if(-1==t.R.indexOf(e[n])){e=!1;break t}e=!0}else e=!1;else e="all"==t.g;return e}function On(t){var e=0<t.c.length?t.c[0].R:null,n=0<t.c.length?t.c[0].mode:null;return null!=e&&null!=n&&jn(t,e,n)}function Cn(t,e,n,r,i){Qt(t.logger,"push tx queue["+t.c.length+"]"),t.c.push({ab:e,R:n,mode:r,L:i})}function Nn(t,e){Sn.call(this,t,e)}function Tn(t,e,n){this.f=t,this.b=e,this.a=n,this.c=null}function An(t){return t.c||(t.c=t.f.u()),t.c}function In(t,e){var n=o(e)?e:l(e)?e.name:void 0;if(!o(n))throw new Xt("store name "+n+" must be a string, but "+typeof n);var r=xr(t.b,n);if(r){if(t.b.a()&&l(e)&&(a=Yn(e),a=hr(r,a)))throw new Zt(a)}else{if(!t.b.a())throw new Xt('store name "'+n+'" not found.');r=Yn(l(e)?e:{name:n}),Jt(t.logger,"Adding object store: "+n);var i=r,a=t.l(),s=i instanceof Xn?i:Yn(i),i=i.name,u=xr(a.a,i);if(0==hr(s,u).length)st(!1);else{if(u=u?"update":"add",!(a.a instanceof jr))throw new Ir("Cannot "+u+" store: "+i+". Not auto schema generation mode.");Or(a.a,s),a.b?(a.b.close(),a.b=null,Br(a)):st(!1)}}if(!r)throw new hn(n);return r}function Rn(t,e,n){Tn.call(this,t,e,n)}function Pn(t,e,n){Tn.call(this,t,e,n)}function Fn(t,e,n,r){var i=n.b,o=n.c||null,a=r||100;Jt(t.logger,"listIter:"+e+" "+n+(r?" limit="+a:""));var s=t.a.request("values:iter:index",[i]),u="done"==n.g||n.g==ou?[]:[n.i,n.j];return Ge(s,function(){An(this).$(s,e,i,o,n.gc(),a,0,n.da(),n.za(),u)},t),s.H(function(){null!=u[0]?n.Jb("rest",u[0],u[1]):n.Jb()}),s}function qn(e,n,r,i,o){var a=[],s=r.a,u=Qe(r),l=u+" "+n+"ByIterator "+i;0<o&&(l+=" limit "+o),Jt(e.logger,l);for(var c=An(e),f=[],h=i.stores(),p=0;p<h.length;p++)f[p]=c.b(s,u,h[p]);var g=i.load(f);g.Y=function(t){Pe(g),Ke(r,t,!0)};var d=0,v=!1;g.G=function(i){v||(Qt(e.logger,l+" starting"),v=!0),null!=i?(g.T(),d++,1==n?a.push(i):2==n?a.push(g.T()):3==n?a.push([i,g.T()]):6!=n&&a.push(g.Ca()),5==n?(Pe(g),Ke(r,a[0])):6==n||!t(o)||d<o?g.ra():(Jt(e.logger,"success:"+l+" yields "+a.length+" records"),Pe(g),Ke(r,a))):(Jt(e.logger,"success:"+l+" yields "+a.length+" records"),Pe(g),Ke(r,5==n?a[0]:6==n?d:a))}}function Dn(t,e){this.type=t,this.b=this.target=e,this.ec=!0}function Bn(t,e){Dn.call(this,t,e)}function Ln(t,e,n,r,i){Dn.call(this,t,e),this.version=n,this.ic=r,this.bc=i}function Mn(t,e,n){Dn.call(this,n||"error",t),this.error=e}function Un(t,e){Mn.call(this,t,e,"fail")}function Hn(t,e,n,r,i){Dn.call(this,t,e),this.s=n,this.key=r,this.value=i}function Vn(t,e,n,r,i){Dn.call(this,t,e),this.s=n,this.keys=r,this.values=i}function Wn(e,n,a,s,u,l){if(t(u)||(u=r(e)?e.join(", "):e),null!=e&&!o(e)&&!i(e))throw new Xt("index keyPath for "+u+" must be a string or array, but "+e+" is "+typeof e);if(r(e)&&Object.freeze&&Object.freeze(e),!t(e)&&t(u)&&(e=u),this.keyPath=e,this.h=i(this.keyPath),this.b=u,this.type=Qn(n),t(n)){if(!t(this.type))throw new Xt("type invalid in index: "+this.b);if(r(this.keyPath))throw new Xt('composite key for store "'+this.b+'" must not specified type')}this.unique=!!a,this.multiEntry=!!s,this.i=o(this.type)?this.type:du,this.f=o(u)?u:r(e)?this.keyPath.join(","):e,this.c=x(this.f),this.a=this.h?null:this.keyPath.split("."),this.g=l||null}function zn(t,e){if(null!=e){if(i(t.keyPath)){for(var n=[],r=0,o=t.keyPath.length;r<o;r++){var a=be(e,t.keyPath[r]);n[r]=a}return n}return be(e,t.keyPath)}}function Kn(t,e,n){for(var r=0;r<t.a.length;r++)r==t.a.length-1?e[t.a[r]]=n:l(e[t.a[r]])||(e[t.a[r]]={})}function $n(t,e){return"DATE"!=e?null!=e?t:_e(t):t instanceof Date?+t:void 0}function Gn(e,n){return"DATE"==n?new Date(e):t(n)?e:we(e)}function Qn(t){if(o(t))return t=Qa(vu,t),vu[t]}function Jn(t,e){return null!=t||null!=e?null!=t?null!=e?i(t)&&i(e)?R(t,e)?null:"expect: "+t+", but: "+e:Fr(t,e)?null:"expect: "+t+", but: "+e:"keyPath: "+t+" no longer defined":"newly define "+e:null}function Xn(e,n,s,u,l,c,f,h){if(!o(e))throw new Xt("store name must be a string");if(this.c=e,this.keyPath=t(n)?n:null,this.i=i(this.keyPath),null!==this.keyPath&&!o(this.keyPath)&&!this.i)throw new Xt("keyPath must be a string or array");if(null!=s&&!a(s))throw new Xt('invalid autoIncrement value in store "'+e+'"');this.b=!!s;var p;if(null!=u){if(p=Qn(u),!t(p))throw new Xt('type "'+u+'" for primary key in store "'+this.c+'" is invalid.');if(this.i)throw new Xt('composite key for store "'+this.c+'" must not specified type')}for(this.type=null!=p?p:this.b?"INTEGER":void 0,this.h=o(this.keyPath)?this.keyPath.split("."):[],
this.a=l||[],e=[],n=0;n<this.a.length;n++){if(s=this.a[n].getName(),0<=e.indexOf(s))throw new Xt('index "'+s+'" already defined in store: '+this.c);e.push(s)}if(this.aa=!!c,this.sa=!!f,this.u=o(this.type)?this.type:du,this.g=r(this.keyPath)?this.keyPath.join(","):o(this.keyPath)?this.keyPath:"_ROWID_",this.f=x(this.g),this.m=!!h){if(this.keyPath)throw new Xt('encrypted store "'+this.c+'" must not use inline key');if(this.b)throw new Xt('encrypted store "'+this.c+'" must not use key generator')}this.j=[]}function Yn(e){var n,i="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" ");for(n in e)if(e.hasOwnProperty(n)&&-1==Qa(i,n))throw new Xt('Unknown attribute "'+n+'"');if(i=[],n=e.indexes||[],r(n))for(var o=0;o<n.length;o++){var a;a=n[o];var s="name unique type keyPath multiEntry generator".split(" "),u=void 0;for(u in a)if(a.hasOwnProperty(u)&&-1==Qa(s,u))throw new Xt("Unknown field: "+u+" in "+yr(a));a=new Wn(a.keyPath,a.type,a.unique,a.multiEntry,a.name,a.generator),t(a.keyPath)&&a.keyPath===e.keyPath||i.push(a)}return new Xn(e.name,e.keyPath,e.autoIncrement,"undefined"===e.type||"null"===e.type?void 0:e.type,i,e.dispatchEvents,e.fixed,e.encrypted)}function Zn(t,e,n,r,i,o,a){return t=tr(t,e,n,r,i,o,a),e="",0!=n&&(e+="SELECT "+t.select),e+=" FROM "+t.V,t.v&&(e+=" WHERE "+t.v),t.group&&(e+=" GROUP BY "+t.group),t.X&&(e+=" ORDER BY "+t.X),e}function tr(t,e,n,r,i,a,s){var u={select:"",V:"",v:"",group:"",X:""},l=t.g,c=t.f,f=null;r!==l&&o(r)&&(f=rr(t,r));var h=!!f,p=r||l,g=x(p),d=h?f.type:t.type,v=h&&f.multiEntry;return u.V=ar(t),6===n?u.select="COUNT("+c+")":3===n||1===n||2===n?(u.select=c,null!=r&&r!=l&&(u.select+=", "+g)):u.select="*",r=s?"DISTINCT ":"",l=[],v?(v=x("ydn.db.me:"+t.getName()+":"+f.getName()),u.select=6===n?"COUNT("+r+v+"."+g+")":3===n||1===n||2===n?"DISTINCT "+ar(t)+"."+c+", "+v+"."+g+" AS "+p:"DISTINCT "+ar(t)+".*, "+v+"."+g+" AS "+p,u.V=v+" INNER JOIN "+ar(t)+" USING ("+c+")",null!=i&&(ve(v+"."+g,d,i,l,e),0<l.length&&(u.v=u.v?u.v+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=i&&(ve(g,d,i,l,e),0<l.length&&(u.v=u.v?u.v+(" AND "+l.join(" AND ")):l.join(" AND "))),h&&!f.unique&&s&&(u.group=g),t=a?"DESC":"ASC",u.X=g+" "+t,h&&(u.X+=", "+c+" "+t),u}function er(t,e,n,r,i,o,a,s,u){var l,c,f,h;return null!=i?(l=i.lower,c=i.upper,f=i.lowerOpen,h=i.upperOpen,o?null!=c?(i=au(s,c),-1==i?(c=s,h=u):0==i&&(h=u||h)):(c=s,h=u):null!=l?(i=au(s,l),1==i?(l=s,f=u):0==i&&(f=u||f)):(l=s,f=u)):o?(c=s,h=u):(l=s,f=u),i=new oe(l,c,(!!f),(!!h)),r=r?rr(t,r):null,e=tr(t,n,e,r?r.f:t.g,i,o,a),e="SELECT "+e.select+" FROM "+e.V+(e.v?" WHERE "+e.v:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.X,r&&(e+=", "+t.f+(o?"DESC":"ASC")),e}function nr(t,e,n,r,i,o,a,s,u,l){var c=rr(t,r),f=c.f;r=c.c;var h=t.f,p=u?" <":" >",p=a?p+" ":p+"= ";return a=$n(o,c.type),s=$n(s,t.type),c="",i?(t=tr(t,n,e,f,i,u,l),t.v+=" AND ",c=r+p+"?",n.push(a)):(i=u?le(o,!0):ce(o,!0),t=tr(t,n,e,f,i,u,l),c=t.v,t.v=""),t.v+="("+c+" OR ("+r+" = ? AND "+h+p+"?))",n.push(a),n.push(s),"SELECT "+t.select+" FROM "+t.V+" WHERE "+t.v+(t.group?" GROUP BY "+t.group:"")+" ORDER BY "+t.X}function rr(t,e){return O(t.a,function(t){return t.getName()==e})}function ir(t,e){for(var n=0;n<t.a.length;n++)if(!Jn(t.a[n].keyPath,e))return t.a[n];return null}function or(t,e){return e===t.keyPath||Ya(t.a,function(t){return t.getName()==e})}function ar(t){return x(t.c)}function sr(e,n){if(!n)return e;var i=e.b,a=r(e.keyPath)?A(e.keyPath):e.keyPath,s=e.type,u=Xa(e.a,function(t){return t.clone()});t(n.type)||"TEXT"!=s||(s=void 0),r(n.keyPath)&&o(a)&&a==n.keyPath.join(",")&&(a=A(n.keyPath));for(var l=0,c=n.a.length;l<c;l++)if(n.a[l].h)for(var f=n.a[l].getName(),h=u.length-1;0<=h;h--)if(0<=f.indexOf(u[h].getName())){u[h]=n.a[l].clone();break}for(l=0;l<u.length;l++)(c=rr(n,u[l].getName()))&&(u[l]=u[l].hint(c));return new Xn(n.c,a,i,s,u)}function ur(t){return!!t.keyPath}function lr(t,e,n){if(e){if(!t.keyPath&&null!=n)return n;if(t.i){n=[];for(var r=0;r<t.keyPath.length;r++)n.push(be(e,t.keyPath[r]));return n}if(t.keyPath)return D(e,t.h)}}function cr(e,n,r){for(var i=0;i<e.h.length;i++){var o=e.h[i];if(i==e.h.length-1){n[o]=r;break}t(n[o])||(n[o]={}),n=n[o]}}function fr(e,n,r){var i=[],a=[];r=t(r)?r:lr(e,n),t(r)&&(a.push(e.f),i.push($n(r,e.type)));for(var s=0;s<e.a.length;s++){var u=e.a[s];if(!u.multiEntry&&u.getName()!==e.keyPath&&"_default_"!=u.getName()){var l=zn(u,n);null!=l&&(i.push($n(l,u.type)),a.push(u.c))}}for(e.sa?e.sa&&!e.keyPath&&0==e.a.length&&(o(n)&&-1==n.indexOf(";base64,")?i.push(n):i.push(yr(n)),a.push("_default_")):(i.push(yr(n)),a.push("_default_")),e=[],s=i.length-1;0<=s;s--)e[s]="?";return{Vb:a,fc:e,values:i,key:r}}function hr(e,n){if(!n)return"missing store: "+e.c;if(e.c!=n.c)return"store name, expect: "+e.c+", but: "+n.c;var r=Jn(e.keyPath,n.keyPath);if(r)return"keyPath, "+r;if(t(e.b)&&t(n.b)&&e.b!=n.b)return"autoIncrement, expect:  "+e.b+", but: "+n.b;if(e.a.length!=n.a.length)return"indexes length, expect:  "+e.a.length+", but: "+n.a.length;if(t(e.type)&&t(n.type)&&(i(e.type)?!R(e.type,n.type):e.type!=n.type))return"data type, expect:  "+e.type+", but: "+n.type;for(r=0;r<e.a.length;r++){var o,a=rr(n,e.a[r].getName());if(o=e.a[r],a)if(o.b!=a.b)o="name, expect: "+o.b+", but: "+a.b;else{var s=Jn(o.keyPath,a.keyPath);o=s?"keyPath, "+s:null!=o.unique&&null!=a.unique&&o.unique!=a.unique?"unique, expect: "+o.unique+", but: "+a.unique:null!=o.multiEntry&&null!=a.multiEntry&&o.multiEntry!=a.multiEntry?"multiEntry, expect: "+o.multiEntry+", but: "+a.multiEntry:t(o.type)&&t(a.type)&&(i(o.type)?!R(o.type,a.type):o.type!=a.type)?"data type, expect: "+o.type+", but: "+a.type:""}else o="no index for "+o.b;if(0<o.length)return'index "'+e.a[r].getName()+'" '+o}return""}function pr(t,e){if(e)for(var n=0;n<t.a.length;n++){var i=t.a[n],o=e;if(i.g){var a=i.g(o),s=typeof a;if("string"==s||"number"==s||a instanceof Date||r(a)){for(s=0;s<i.a.length-1;s++)l(o[i.a[s]])||(o[i.a[s]]={});o[i.a[i.a.length-1]]=a}}}}function gr(t,e,n,r,i){for(var o=0;o<t.j.length;o++)r!==o&&t.j[o].call(i,e,n)}function dr(t){return!o(t)||_(t)?{}:JSON.parse(t)}function vr(t){var e;try{e=yr(t)}catch(n){e=""}return e?e.substr(0,70)+(70<e.length?"...":""):""}function yr(t){return JSON.stringify(t,void 0,void 0)}function br(t,e){if(!t||_(t))throw new Xt("store_name must be provided for primary full text index");if(!e||_(e))throw new Xt("index_name must be provided for primary full text index");this.s=t}function mr(t,e,n){if(this.name=t,this.a=e,this.b=n||"",-1==["","en","fr"].indexOf(this.b))throw new Xt('Unsupported lang "'+n+" for full text search index "+t)}function _r(t){var e,n=["name","sources","lang"];for(e in t)if(t.hasOwnProperty(e)&&-1==Qa(n,e))throw new Xt("Unknown field: "+e+" in "+yr(t));if(!r(t.sources))throw new Xt("indexes require for full text search index "+t.name+", but "+t.sources+" of type "+typeof t.sources+" found.");return n=t.sources.map(function(t){var e,n=["storeName","keyPath","weight"];for(e in t)if(t.hasOwnProperty(e)&&-1==Qa(n,e))throw new Xt("Unknown field: "+e+" in "+vr(t));return new br(t.storeName,t.keyPath)}),new mr(t.name,n,t.lang)}function wr(e,n){var i,a,u=n;if(l(e)){a=e,i=["version","stores","fullTextCatalogs"];for(var c in a)if(a.hasOwnProperty(c)&&-1==Qa(i,c))throw new Xt("Unknown field: "+c+" in schema.");i=a.version;var u=[],f=a.stores||[];if(!r(f))throw new Xt("stores must be array");for(c=0;c<f.length;c++){var h=Yn(f[c]);if(-1!=C(u,function(t){return t.name==h.getName()}))throw new Xt('duplicate store name "'+h.getName()+'".');u.push(h)}}else o(e)?i=0==e.length?void 0:parseFloat(e):s(e)&&(i=e);if(t(i)){if(!s(i)||0>i)throw new Xt("Invalid version: "+i+" ("+e+")");isNaN(i)&&(i=void 0)}if(t(n)&&(!r(n)||0<n.length&&!(n[0]instanceof Xn)))throw new Xt("stores");if(this.version=i,this.b=!t(this.version),this.stores=u||[],i=[],a&&a.fullTextCatalogs)for(c=0;c<a.fullTextCatalogs.length;c++)u=_r(a.fullTextCatalogs[c]),i[c]=u,xr(this,u.getName())||(f=[new Wn("k",du),new Wn("v",du)],u=new Xn(u.getName(),"id",(!1),(void 0),f,(!1),(!1),(!1)),this.stores.push(u));this.c=i}function kr(t){return Xa(t.stores,function(t){return t.getName()})}function xr(t,e){return O(t.stores,function(t){return t.getName()==e})}function Er(t,e){return Ya(t.stores,function(t){return t.getName()==e})}function Sr(t,e,n,r){if(!e||t.stores.length!=e.stores.length)return"Number of store: "+t.stores.length+" vs "+e.stores.length;for(var i=0;i<t.stores.length;i++){var o=xr(e,t.stores[i].getName());if(!o)return'missing object store "'+t.stores[i].getName()+'"';if(n&&(o=sr(o,t.stores[i])),r)for(var a=o,s=t.stores[i],u=0;u<s.a.length;u++){var l=s.a[u];or(a,l.getName())||"BLOB"!=l.type||(l=new Wn(l.keyPath,l.type,l.unique,l.multiEntry,l.getName()),a.a.push(l))}if(o=hr(t.stores[i],o),0<o.length)return'store: "'+t.stores[i].getName()+'" '+o}return""}function jr(t,e){wr.call(this,t,e)}function Or(t,e){t.stores.push(e)}function Cr(t){Error.captureStackTrace?Error.captureStackTrace(this,Cr):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.ArgumentException"}function Nr(t){Error.captureStackTrace?Error.captureStackTrace(this,Nr):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.NotSupportedException"}function Tr(t){Error.captureStackTrace?Error.captureStackTrace(this,Tr):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.NotImplementedException"}function Ar(t){Error.captureStackTrace?Error.captureStackTrace(this,Ar):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.InternalError"}function Ir(t){Error.captureStackTrace?Error.captureStackTrace(this,Ir):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.ConstraintError"}function Rr(t){Error.captureStackTrace?Error.captureStackTrace(this,Rr):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.InvalidOperationException"}function Pr(t){Error.captureStackTrace?Error.captureStackTrace(this,Pr):this.stack=Error().stack||"",t&&(this.message=String(t)),this.name="ydn.error.InvalidOperationError"}function Fr(t,e){var n;if(n=n||{},null!=t&&null!=e){if(i(t)&&i(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(-1==C(e,function(e){return Fr(e,t[r])}))return!1;return!0}if(i(t))return 1==t.length&&Fr(t[0],e);if(i(e))return 1==e.length&&Fr(e[0],t);if(l(t)&&l(t)){for(var o in t)if(t.hasOwnProperty(o)&&!n[o]){var a=Fr(t[o],e[o]);if(!a)return!1}for(o in e)if(e.hasOwnProperty(o)&&!n[o]&&(a=Fr(t[o],e[o]),!a))return!1;return!0}return t===e}return!1}function qr(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return t[e]}function Dr(e,i,o){o=o||{};var a,s="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" ");for(a in o)if(o.hasOwnProperty(a)&&-1==Qa(s,a))throw new Xt('Unknown attribute "'+a+'" in options.');if(o.mechanisms){if(!r(o.mechanisms))throw new Xt("mechanisms attribute must be an array but "+n(o.mechanisms)+" found.");for(a=0;a<o.mechanisms.length;a++)if(!(0<=Qa(yu,o.mechanisms[a])))throw new Xt('Invalid mechanism "'+o.mechanisms[a]+'"')}this.G=o.mechanisms||(gu?I(yu,1):yu),this.j=o.size,this.K=t(o.connectionTimeout)?o.connectionTimeout:3e3,this.b=null,this.f=[],this.hb=!1;var u;if(i instanceof wr)u=i;else if(l(i))for(u=o.autoSchema||!t(i.stores)?new jr(i):new wr(i),o=i.stores?i.stores.length:0,a=0;a<o;a++)s=xr(u,i.stores[a].name),i.stores[a].Sync&&$t(this.logger,"Synchronization option for "+s.getName()+" ignored.");else u=new jr;for(this.a=u,a=0;a<this.a.count();a++)if((this.a.stores[a]||null).m)throw Error("encryption option must be defined");t(e)&&this.C(e),this.h=null,this.g=new et}function Br(t){function e(e,i){e?(Qt(t.logger,t+": ready."),t.Zb=NaN,r.Ra=function(e){t.J(new Mn(t,e))},r.qb=function(e){t.J(new Un(t,e)),t.b=null},r.jb=function(e){t.J(e)},setTimeout(function(){Lr(t,i),Ur(t)},10),n.callback(i)):($t(t.logger,t+": database connection fail "+i.name),setTimeout(function(){if(Lr(t,new Un(t,i)),t.f){var e=t.logger;for(e&&e.log(Us,"Purging "+t.f.length+" transactions request.",void 0);e=t.f.shift();)e.L&&e.L("error",i)}},10),n.o(i))}for(var n=new et,r=null,i=t.G,o=0;o<i.length;o++){var a=i[o].toLowerCase();if(r=t.xb(a)){r=t.xb(a);break}}null===r?(i=new Ir("No storage mechanism found."),e(!1,new Un(t,i))):it(r.connect(t.i,t.a),function(t){this.b=r,e(!0,new Ln("ready",this,parseFloat(r.ob()),parseFloat(t),null))},function(t){$t(this.logger,this+": opening fail"),e(!1,t)},t)}function Lr(t,e){setTimeout(function(){t.a.b&&t.g.c||(e instanceof Mn?t.g.o(e.error):t.g.callback(),t.J(e))},4)}function Mr(t){return!!t.b&&t.b.pb()}function Ur(t){var e=t.f.shift();e&&(Qt(t.logger,"pop tx queue["+(t.f.length+1)+"]"),t.transaction(e.ab,e.uc,e.mode,e.L)),t.Zb=Fa()}function Hr(t,e,n,r,i){Qt(t.logger,"push tx queue["+t.f.length+"]"),t.f.push({ab:e,uc:n,mode:r,L:i}),100<t.f.length&&0==t.f.length%100&&$t(t.logger,"Transaction queue stack size is "+t.f.length+". It is too large, possibility due to incorrect usage.")}function Vr(t,e,n,r){this.f=t,this.g=e,this.a=A(n),this.b=r,this.c=[]}function Wr(t,e,n){if(!t.f)throw new ne("tx committed on ParallelTxExecutor");n&&t.c.push(n),e(t.f)}function zr(t,e,n,r,i,o){xn.call(this,t,e,n,r,i,o),this.c=this.b=null}function Kr(t,e){zr.call(this,t,e,uu)}function $r(e,n,r){Dr.call(this,e,n,r),this.wa=0,e=!0,n=uu,r&&(t(r.isSerial)&&(e=!!r.isSerial),r.policy&&(n=r.policy)),r=Gr(this,n,e),this.m=Gr(this,"atomic",!1),this.c=this.va(r,this.m)}function Gr(t,e,n,r,i,o){if(n){if("multi"==e||"repeat"==e||"all"==e||e==uu)return new Sn(t,(t.wa++),e,r,i,o);if("atomic"==e)return new Nn(t,(t.wa++));throw new Xt('Invalid requestType "'+e+'"')}if("multi"==e||"repeat"==e||"all"==e||e==uu)return new zr(t,(t.wa++),e,r,i,o);if("atomic"==e)return new Kr(t,(t.wa++));throw new Xt('Invalid requestType "'+e+'"')}function Qr(t,e,n){for($r.call(this,t,e,n),t=this.a,e=0;e<t.c.length;e++){n=t.c[e];var r=xr(t,n.getName());if(!r)throw new Xt('full text index store "'+n.getName()+'" required.');if(!or(r,"k"))throw new Xt('full text index store "'+r.getName()+'" must have "keyword" index');if(!or(r,"v"))throw new Xt('full text index store "'+r.getName()+'" must have "keyword" index');if("id"!=r.keyPath)throw new Xt('full text index store "'+r.getName()+'" must use "id" as key path.');for(r=0;r<n.count();r++){var i=n.index(r),o=xr(t,i.s);if(!o)throw new Xt('full text source store "'+i.s+'" does not exist for full text index "'+n.getName()+'"');$t(this.logger,"Full text indexer option for "+o.getName()+" ignored.")}}}function Jr(t,e,n){Qr.call(this,t,e,n)}function Xr(t,e,n,r){Ae.call(this,t,e,n,r),this.h=null}function Yr(t,e){this.a=e}function Zr(t,e){this.a=e}function ti(){this.a=!1}function ei(t,e,n,r){Ae.call(this,t,e,n,r),this.j=this.c=this.a=void 0,this.i=this.h=null,this.m=new ti,this.nb=this.la=null}function ni(t){setTimeout(function(){t.m.state()?(t.m.a=!1,t.W(t.a,t.c,t.j),ni(t)):(t.i(),t.i=null)},4)}function ri(t,e){if(t.h=e){var n=e.value;if(t.w)if(t.reverse||null==t.w.upper)t.reverse&&null!=t.w.lower&&(r=au(n.key,t.w.lower),-1==r||0==r&&t.w.lowerOpen)&&(t.h=null);else{var r=au(n.key,t.w.upper);(1==r||0==r&&t.w.upperOpen)&&(t.h=null)}if(t.h){if(t.unique&&null!=t.a&&null!=n.key&&0==au(t.a,n.key))return;t.a=n.key,t.c=t.g?n.a:t.a,4==t.u&&(t.Ia?t.j=t.c:t.j=Ti(t.nb,t.c))}}return t.h||(t.a=void 0,t.c=void 0,t.j=void 0),t.m.a=!0}function ii(e,n,r){return e=["ydn.db",e],t(n)&&(e.push(n),t(r)&&(e.push(r),t(void 0)&&e.push(_e(void 0)))),e.join("^|")}function oi(t,e){this.key=t,this.a=e}function ai(t,e){var n=au(t.key,e.key);return 0===n?null!=t.a?null!=e.a?au(t.a,e.a):1:null!=e.a?-1:0:n}function si(t){this.U=t||ui}function ui(t,e){return String(t)<String(e)?-1:String(t)>String(e)?1:0}function li(t,e){fi(t,function(t){var n=null,r=this.U(t.value,e);return 0<r?n=t.left:0>r?n=t.right:di(this,t),n})}function ci(t,e){if(t.D){var n,r=n=vi(t);for(n=n.left?n.left:n;null!=r;)if(null!=r.left&&r.left!=n&&r.right!=n)r=r.left;else{if(r.right!=n&&e(r.value))break;var i=r,r=null!=r.right&&r.right!=n?r.right:r.parent;n=i}}}function fi(t,e,n){for(n=n?n:t.D;n&&null!=n;)n=e.call(t,n)}function hi(t,e){fi(t,function(t){var e=t.left?t.left.height:0,n=t.right?t.right.height:0;return 1<e-n?(t.left.right&&(!t.left.left||t.left.left.height<t.left.right.height)&&pi(this,t.left),gi(this,t)):1<n-e&&(t.right.left&&(!t.right.right||t.right.right.height<t.right.left.height)&&gi(this,t.right),pi(this,t)),e=t.left?t.left.height:0,n=t.right?t.right.height:0,t.height=Math.max(e,n)+1,t.parent},e)}function pi(t,e){_i(e)?(e.parent.left=e.right,e.right.parent=e.parent):mi(e)?(e.parent.right=e.right,e.right.parent=e.parent):(t.D=e.right,t.D.parent=null);var n=e.right;e.right=e.right.left,null!=e.right&&(e.right.parent=e),n.left=e,e.parent=n,n.count=e.count,e.count-=(n.right?n.right.count:0)+1}function gi(t,e){_i(e)?(e.parent.left=e.left,e.left.parent=e.parent):mi(e)?(e.parent.right=e.left,e.left.parent=e.parent):(t.D=e.left,t.D.parent=null);var n=e.left;e.left=e.left.right,null!=e.left&&(e.left.parent=e),n.right=e,e.parent=n,n.count=e.count,e.count-=(n.left?n.left.count:0)+1}function di(t,e){if(null!=e.left||null!=e.right){var n,r=null;null!=e.left?(n=yi(t,e.left),fi(t,function(t){return t.count--,t.parent},n),n!=e.left&&((n.parent.right=n.left)&&(n.left.parent=n.parent),n.left=e.left,n.left.parent=n,r=n.parent),n.parent=e.parent,n.right=e.right,n.right&&(n.right.parent=n),e==t.ba&&(t.ba=n)):(n=vi(t,e.right),fi(t,function(t){return t.count--,t.parent},n),n!=e.right&&((n.parent.left=n.right)&&(n.right.parent=n.parent),n.right=e.right,n.right.parent=n,r=n.parent),n.parent=e.parent,n.left=e.left,n.left&&(n.left.parent=n),e==t.ca&&(t.ca=n)),n.count=e.count,_i(e)?e.parent.left=n:mi(e)?e.parent.right=n:t.D=n,hi(t,r?r:n)}else fi(t,function(t){return t.count--,t.parent},e.parent),_i(e)?(e.parent.left=null,e==t.ca&&(t.ca=e.parent),hi(t,e.parent)):mi(e)?(e.parent.right=null,e==t.ba&&(t.ba=e.parent),hi(t,e.parent)):t.clear()}function vi(t,e){if(!e)return t.ca;var n=e;return fi(t,function(t){var e=null;return t.left&&(e=n=t.left),e},e),n}function yi(t,e){if(!e)return t.ba;var n=e;return fi(t,function(t){var e=null;return t.right&&(e=n=t.right),e},e),n}function bi(t,e){this.value=t,this.parent=e?e:null,this.count=1}function mi(t){return!!t.parent&&t.parent.right==t}function _i(t){return!!t.parent&&t.parent.left==t}function wi(t){this.U=t||ui}function ki(t,e,n){if(t.D){var r;if(n instanceof bi)r=n;else if(n){if(fi(t,function(t){var e=null;return 0<this.U(t.value,n)?(e=t.left,r=t):0>this.U(t.value,n)?e=t.right:r=t,e}),!r)return}else r=vi(t);t=r;for(var i=r.left?r.left:r;null!=t;)if(null!=t.left&&t.left!=i&&t.right!=i)t=t.left;else{if(t.right!=i&&e(t))return;var o=t;t=null!=t.right&&t.right!=i?t.right:t.parent,i=o}e(null)}}function xi(t,e,n){if(t.D){var r;if(n instanceof bi)r=n;else if(n){if(fi(t,h(function(t){var e=null;return 0<this.U(t.value,n)?e=t.left:(0>this.U(t.value,n)&&(e=t.right),r=t),e},t)),!r)return}else r=yi(t);t=r;for(var i=r.right?r.right:r;null!=t;)if(null!=t.right&&t.right!=i&&t.left!=i)t=t.right;else{if(t.left!=i&&e(t))return;var o=t;t=null!=t.left&&t.left!=i?t.left:t.parent,i=o}e(null)}}function Ei(t,e,n){this.g=t,this.storage=e,this.b=n,this.a={},t=this.b.keyPath,this.c=r(t)?t.join(","):t||"_ROWID_",this.a[this.c]=null,this.f=ii(this.g,this.b.getName(),this.c)+"^|"}function Si(t,e){var n=e||t.c;if(!t.a[n]){t.a[n]=new wi(ai);for(var i=t.storage.length,o=0;o<i;o++){var a=t.storage.key(o);if(null!==a&&0==a.lastIndexOf(t.f,0)){var s=we(a.substr(t.f.length));if(n==t.c)t.a[n].add(new oi(s));else{var u=t.storage.getItem(a);if(null!==u)if(a=rr(t.b,n),u=dr(u),u=zn(a,u),a.multiEntry){if(r(u))for(a=0;a<u.length;a++)t.a[n].add(new oi(u[a],s))}else t.a[n].add(new oi(u,s))}}}}return t.a[n]}function ji(t,e,n){for(var r in t.a){var i=t.a[r];if(i)if(r==t.c)li(i,new oi(e));else{var o=rr(t.b,r),o=be(n,o.keyPath);li(i,new oi(e,o))}}}function Oi(t){for(var e in t.a){var n=t.a[e];n&&n.clear()}t.a={}}function Ci(t,e,n,r){if(null==e&&(t.b.keyPath&&(e=lr(t.b,n)),t.b.b&&null==e)){e=t.f+_e(void 0);var i=dr(t.storage.getItem(e));i.key_count||(i.key_count=0),i.key_count++,t.storage.setItem(e,yr(i)),e=i.key_count}if(r&&(r=null!==t.storage.getItem(t.f+_e(e))),r)return null;t.storage.setItem(t.f+_e(e),yr(n)),r=e;for(var o in t.a)if(i=t.a[o])if(o==t.c)i.add(new oi(r));else{var a=rr(t.b,o),a=be(n,a.keyPath);null!=a&&i.add(new oi(r,a))}return e}function Ni(t,e){var n=t.f+_e(e),r=t.storage.getItem(n);return null===r?0:(t.storage.removeItem(n),n=dr(r),ji(t,e,n),1)}function Ti(t,e){var n=t.storage.getItem(t.f+_e(e)),r=void 0;if(null!==n)for(var r=dr(n),n=0,i=t.b.a.length;n<i;n++){var o=t.b.index(n);if("DATE"==o.type){var a=zn(o,r);a&&Kn(o,r,new Date(a))}}return r}function Ai(t,e,n){e=e||t.c,t=Si(t,e);var r=null,i=null,o=0,a=!1,s=!1;return null!=n&&(null!=n.lower&&(r=new oi(n.lower)),null!=n.upper&&(i=new oi(n.upper)),a=n.lowerOpen,s=n.upperOpen),ki(t,function(t){if(null!=t&&(t=t.value,!a||null==r||0!=au(t.key,r.key))){if(null!=i&&(t=au(t.key,i.key),1===t||0===t&&s))return!0;o++}},r),o}function Ii(t,e){var n=Si(t,t.c),r=null,i=null,o=0,a=[],s=[],u=!1,l=!1;if(null!=e&&(null!=e.lower&&(r=new oi(e.lower)),null!=e.upper&&(i=new oi(e.upper)),u=e.lowerOpen,l=e.upperOpen),ki(n,function(e){if(null!=e&&(e=e.value,!u||null==r||0!=ai(e,r))){if(null!=i){var n=ai(e,i);if(1===n||0===n&&l)return!0}var n=t.f+_e(e.key),c=t.storage.getItem(n);null!==c&&(t.storage.removeItem(n),o++,10>a.length&&(a.push(e.key),s.push(dr(c))))}},r),10>a.length)for(n=0;n<a.length;n++)ji(t,a[n],s[n]);else Oi(t);return o}function Ri(e,n,r,i,o,a,s,u,l){function c(r){if(r&&(y++,!(y<s))){var i=r.value;if(o){if(m&&null!=v&&(r=p?ai(i,v):au(i.key,v.key),0==r))return;if(null!=d&&(r=p?ai(i,d):au(i.key,d.key),-1==r||0==r&&b))return l&&(l[0]=void 0,l[1]=void 0),!0}else{if(b&&null!=d&&(r=p?ai(i,d):au(i.key,d.key),0==r))return;if(null!=v&&(r=p?ai(i,v):au(i.key,v.key),1==r||0==r&&m))return l&&(l[0]=void 0,l[1]=void 0),!0}if(r=i.key,!u||!g||null==f||0!=au(f,r)){if(i=g?i.a:r,2==n)h.push(i);else if(1==n)h.push(r);else if(3==n)h.push([r,i]);else if(4==n){var c=Ti(e,i);h.push(c)}else h.push([r,i,Ti(e,i)]);l&&(l[0]=r,l[1]=i)}if(f=r,t(a)&&h.length>=a)return!0}}var f,h=[],p=!!l&&null!=l[0];r=r||e.c;var g=r!=e.c;r=Si(e,r);var d=null,v=null;t(s)||(s=0);var y=-1,b=!1,m=!1;if(null!=i&&(null!=i.lower&&(d=g&&o?new oi(i.lower,"￿"):new oi(i.lower)),null!=i.upper&&(v=g&&!o?new oi(i.upper,"￿"):new oi(i.upper)),b=!!i.lowerOpen,m=!!i.upperOpen),p){o?m=!0:b=!0,i=l[0];var _=t(l[1])?l[1]:"￿";o?v=g?new oi(i,_):new oi(i):d=g?new oi(i,_):new oi(i)}return o?xi(r,c,v):ki(r,c,d),h}function Pi(){this.clear()}function Fi(t){this.h=t||new Pi,this.g={}}function qi(t,e){var n=xr(t.a,e);if(!n)throw new ne('store name "'+e+'" not found.');return t.g[e]||(t.g[e]=new Ei(t.f,t.c,n)),t.g[e]}function Di(t,e){this.b=t,this.a=e}function Bi(t,e){this.a=e}function Li(t,e,n,r){var i=e.a.l(function(t){for(var o,a=[],s=n,u=0;u<r.length;u++){var l=r[u];l instanceof yn&&(s=l,l=s.id,s=s.s),o&&o.getName()==s||(o=qi(t,s)),l=Ti(o,l),a[u]=l}Ke(e,a,!1),i(),i=null},t)}function Mi(t,e){this.a=e}function Ui(t,e,n,r){Ae.call(this,t,e,n,r),this.K=null,this.h=this.i=void 0}function Hi(e,n){if(e.i=void 0,e.h=void 0,e.m=void 0,t(n))if(l(n)){var r=Gn(n[e.b.g],e.b.type);if(e.h=r,e.g){var i=rr(e.b,e.O);e.i=Gn(n[e.O],i.type)}else e.i=r;e.m=e.Ia?r:Ki(n,e.b)}else e.m=n}function Vi(t,e,n){rr(t.b,t.O);var r=[],i=t.O,o=t.w,a=t.i;if(null!=o){var s=o.lower,u=o.upper,l=o.lowerOpen,c=o.upperOpen;t.reverse?u=null!=u&&-1==au(u,a)?u:a:s=null!=s&&1==au(s,a)?s:a,o=null!=s&&null!=u?ue(s,u,!!l,!!c):null!=s?Js.lowerBound(s,!!l):Js.upperBound(u,!!c)}else o=t.reverse?Js.upperBound(a):Js.lowerBound(a);i=tr(t.b,r,t.u,i,o,t.reverse,t.unique),n=t.reverse?Js.upperBound(n,!1):Js.lowerBound(n,!1),n=tr(t.b,r,t.u,t.b.g,n,t.reverse,t.unique),i.v=i.v?i.v+(" AND "+n.v):n.v,n="SELECT "+i.select+" FROM "+i.V+(i.v?" WHERE "+i.v:"")+(i.group?" GROUP BY "+i.group:"")+" ORDER BY "+i.X,n+=" LIMIT 1",Qt(t.logger,t+": continuePrimary:  SQL: "+n+" : "+yr(r)),t.f.executeSql(n,r,function(n,r){0<r.rows.length?Hi(t,r.rows.item(0)):Hi(t),e.call(t,t.i,t.h,t.m),e=null},function(n,r){return $t(t.logger,"get error: "+r.message),Ie(t,r),Hi(t),e.call(t,t.h,t.i,t.m),e=null,!1})}function Wi(t,e,n,r,i,o){var a=!r;r=[],t.g&&null!=o&&null!=n?n=nr(t.b,t.u,r,t.K.getName(),t.w,n,a,o,t.reverse,t.unique):null!=n?(o=t.K?t.K.getName():null,n=er(t.b,t.u,r,o,t.w,t.reverse,t.unique,n,a)):(n=Zn(t.b,r,t.u,t.g?t.K.f:t.b.g,t.w,t.reverse,t.unique),t.g&&(n+=", "+t.b.f+" ASC")),n+=" LIMIT 1",0<i&&(n+=" OFFSET "+i),Qt(t.logger,t+": continue:  SQL: "+n+" : "+yr(r)),t.f.executeSql(n,r,function(n,r){0<r.rows.length?Hi(t,r.rows.item(0)):Hi(t),e.call(t,t.i,t.h,t.m),e=null},function(n,r){return $t(t.logger,"get error: "+r.message),Ie(t,r),Hi(t),e.call(t,t.h,t.i,t.m),e=null,!1})}function zi(t,e){this.a=e}function Ki(e,n){if(n.sa&&!n.keyPath&&0==n.a.length&&e._default_){var r=e._default_;if(-1==r.indexOf(";base64,"))return dr(r);'"'==r.charAt(0)&&'"'==r.charAt(r.length-1)&&(r=r.substr(1,r.length-2));for(var i=r.split(";base64,"),r=i[0].split(":")[1],i=window.atob(i[1]),o=i.length,a=new Uint8Array(o),s=0;s<o;++s)a[s]=i.charCodeAt(s);return new Blob([a.buffer],{type:r})}for(r=e._default_?dr(e._default_):{},null!=n.keyPath&&(i=Gn(e[n.keyPath],n.type),null!=i&&cr(n,r,i)),i=0;i<n.a.length;i++)o=n.index(i),a=o.f,"_default_"==a||o.h||o.multiEntry||"DATE"!=o.type&&!n.sa||(a=Gn(e[a],o.type),t(a)&&Kn(o,r,a));return r}function $i(e,n,r,i,o){function a(t){t="ydn.db.me:"+u.getName()+":"+t.getName(),t="DELETE FROM  "+x(t)+f,Qt(e.logger,Qe(n)+NaN+t),s.executeSql(t,c)}var s=n.a,u=xr(e.a,r);r="DELETE FROM "+ar(u);var l=[],c=[],f="";null!=o&&(t(i)?(i=rr(u,i),ve(i.c,i.type,o,c,l)):ve(u.f,u.type,o,c,l),f=" WHERE "+c.join(" AND ")),r+=f;var h=Qe(n)+" SQL: "+r+" PARAMS: "+l;for(Qt(e.logger,h),s.executeSql(r,l,function(t,r){Qt(e.logger,"success "+h),Ke(n,r.rowsAffected)},function(t,r){return $t(e.logger,"error: "+h+r.message),Ke(n,r,!0),!1}),o=0,i=u.a.length;o<i;o++)r=u.index(o),r.multiEntry&&a(r)}function Gi(t,e){this.a=e}function Qi(t){if(!o(t))throw new Cr;this.M=t,this.f=tu,this.a=[],Ji(this,t),this.Oa=""}function Ji(t,e){var n=e.split(/\sFROM\s/i);if(2==n.length){var r=n[1],n=n[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==n.length){if(t.g=n[1].toUpperCase(),"SELECT"==t.g)t.f=Zs;else if("INSERT"==t.g)t.f=tu;else if("UPDATE"==t.g)t.f=tu;else{if("DELETE"!=t.g)return;t.f=tu}var n=n[2].trim(),i=n.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);i?(t.c=i[0].toUpperCase(),n=n.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):t.c=void 0,"("==n.charAt(0)&&(")"==n.charAt(n.length-1)?n=n.substring(1,n.length-1):new dn("missing closing parentheses")),t.m=n,n=r.search(/(ORDER BY|LIMIT|OFFSET)/i),0<n?(t.b=r.substring(n),r=r.substring(0,n)):t.b="",n=r.search(/WHERE/i),0<n?(t.h=r.substring(n+6).trim(),r=r.substring(0,n)):t.h="",t.a=r.trim().split(",").map(function(t){return t=k(t,'"'),t=k(t,"'"),t.trim()})}}}function Xi(t,e){if(e){for(var n=0;n<e.length;n++)t.M=t.M.replace("?",e[n]);Ji(t,t.M)}if(t.i=Zi(t),!t.i)return t.Oa;var n=t.b.length,r=/OFFSET\s+(\d+)/i.exec(t.b);return r&&(t.ac=parseInt(r[1],10),n=t.b.search(/OFFSET/i)),(r=/LIMIT\s+(\d+)/i.exec(t.b))&&(t.$b=parseInt(r[1],10),r=t.b.search(/LIMIT/i),r<n&&(n=r)),(n=/ORDER BY\s+(.+)/i.exec(t.b.substr(0,n)))?(n=n[1].trim(),(r=n.match(/(ASC|DESC)/i))?(t.Kb="DESC"==r[0].toUpperCase(),n=n.replace(/\s+(ASC|DESC)/i,"")):t.Kb=!1,t.j=k(k(n,'"'),"'")):t.j=void 0,""}function Yi(t){return"*"==t.m?null:(t=t.m.split(","),t=t.map(function(t){return k(t.trim(),'"')}))}function Zi(t){function e(t){return C(n,function(e){return e.ma==t})}var n=[],r=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<t.h.length)for(var i=t.h.split("AND"),o=0;o<i.length;o++){var a=i[o],s=r.exec(a);if(!s)return t.Oa='Invalid clause "'+a+'"',null;var u=s[1].trim(),u=k(u,'"'),u=k(u,"'");if(!(0<u.length))return t.Oa='Invalid clause "'+a+'"',null;var l=s[3].trim();if(l=0==l.lastIndexOf('"',0)?k(l,'"'):0==l.lastIndexOf("'",0)?k(l,"'"):parseFloat(l),s=new Ne(u,s[2],l),u=e(u),0<=u){if(n[u]=n[u].ka(s),!n[u])return t.Oa='where clause "'+a+'" conflict',null}else n.push(s)}return n}function to(t,e){this.a=e,this.c=t}function eo(t,e){to.call(this,t,e)}function no(e){return function(n,r,i){return t(r)||(r=0),(r*i+n[e])/(i+1)}}function ro(t){return function(e,n){return n+e[t]}}function io(e){return function(n,r){var i=n[e];return t(r)&&r<i?r:i}}function oo(e){return function(n,r){var i=n[e];return t(r)&&r>i?r:i}}function ao(t,e){this.a=e}function so(t,e){this.b=e,this.f=t,this.a=Yi(e)}function uo(t,e){if(t.a){if(1==t.a.length){if(l(e))return D(e,t.a[0]);return}for(var n={},r=0;r<t.a.length;r++)n[t.a[r]]=D(e,t.a[r]);return n}return Ki(e,t.f)}function lo(t,e){so.call(this,t,e)}function co(t,e){this.a=e}function fo(t,e){this.a=e}function ho(t,e,n){Tn.call(this,t,e,n)}function po(t,e,n){Qr.call(this,t,e,n)}function go(e,n){t(e)&&5242880<e&&zt(this.logger,Ms,"storage size request ignored, use Quota Management API instead"),this.A=null,this.La=n||NaN}function vo(t,e,n,r){function i(){var t={autoIncrement:!!r.b};return null!=r.keyPath&&(t.keyPath=r.keyPath),e.createObjectStore(r.getName(),t)}if(zt(t.logger,zs,"Creating Object Store for "+r.getName()+" keyPath: "+r.keyPath),e.objectStoreNames.contains(r.getName())){n=n.objectStore(r.getName()),Jn(r.keyPath||"",n.keyPath||"")?(e.deleteObjectStore(r.getName()),zt(t.logger,Ms,"store: "+r.getName()+" deleted due to keyPath change."),n=i()):a(n.autoIncrement)&&a(r.b)&&n.autoIncrement!=r.b&&(e.deleteObjectStore(r.getName()),zt(t.logger,Ms,"store: "+r.getName()+" deleted due to autoIncrement change."),n=i());for(var o=n.indexNames,s=0;s<r.a.length;s++){var u=r.index(s);!o.contains(u.getName())&&u.g&&(n.clear(),zt(t.logger,Ms,"store: "+r.getName()+" cleared since generator index need re-indexing."))}for(var l=0,c=0,f=0,s=0;s<r.a.length;s++){var u=r.index(s),h=!1;if(o.contains(u.getName())){var p=n.index(u.getName()),g=null!=p.unique&&null!=u.unique&&p.unique!=u.unique,d=null!=p.multiEntry&&null!=u.multiEntry&&p.multiEntry!=u.multiEntry,p=null!=p.keyPath&&null!=u.keyPath&&!!Jn(p.keyPath,u.keyPath);(g||d||p)&&(n.deleteIndex(u.getName()),h=!0,l--,f++)}else"BLOB"!=u.type&&(h=!0);h&&(u.unique||u.multiEntry?(h={unique:u.unique,multiEntry:u.multiEntry},n.createIndex(u.getName(),u.keyPath,h)):n.createIndex(u.getName(),u.keyPath),l++)}for(s=0;s<o.length;s++)or(r,o[s])||(n.deleteIndex(o[s]),c++);zt(t.logger,zs,"Updated store: "+n.name+", "+l+" index created, "+c+" index deleted, "+f+" modified.")}else{for(n=i(),s=0;s<r.a.length;s++)u=r.index(s),"BLOB"==u.type?zt(t.logger,Us,"Index "+u+" of blob data type ignored."):(Qt(t.logger,"Creating index: "+u+" for "+r.getName()),u.unique||u.multiEntry?(h={unique:u.unique,multiEntry:u.multiEntry},n.createIndex(u.getName(),u.keyPath,h)):n.createIndex(u.getName(),u.keyPath));Jt(t.logger,"Created store: "+n)}}function yo(t){Fi.call(this,t),this.b=NaN}function bo(){yo.call(this,this)}function mo(){yo.call(this,this)}function _o(e,n){this.a=t(e)?e:4194304,this.b=n||"websql"}function wo(t){var e=t.u,n="CREATE TABLE IF NOT EXISTS "+ar(t)+" (",r=t.f,n=n+(r+" "+e+" PRIMARY KEY ");t.b&&(n+=" AUTOINCREMENT "),t.sa&&(t.keyPath||0!=t.a.length)||(n+=" ,_default_ BLOB");for(var i=[],o=[r],a=0,s=t.a.length;a<s;a++){var u=t.index(a),l="";if(u.multiEntry){var l="ydn.db.me:"+t.getName()+":"+u.getName(),c=u.unique?" UNIQUE ":"",u="CREATE TABLE IF NOT EXISTS "+x(l)+" ("+r+" "+e+", "+u.c+" "+u.i+c+")";i.push(u)}else u.unique&&(l=" UNIQUE "),c=u.c,-1==o.indexOf(c)&&(n+=", "+c+" "+u.i+l,o.push(c))}return i.unshift(n+")"),i}function ko(t,e,n,r,i){function o(t){e.executeSql(t,[],function(){a++,a==s.length&&(r(!0),r=null)},function(e,i){a++,a==s.length&&(r(!1),r=null);var o="SQLError creating table: "+n.getName()+" "+i.message+' for executing "'+t;throw new pn(i,o)})}var a=0,s=wo(n),u="Create";if(i){if(i=hr(n,i),0==i.length)return Qt(t.logger,"same table "+n.getName()+" exists."),r(!0),void(r=null);u="Modify",$t(t.logger,"table: "+n.getName()+" has changed by "+i+" ALTER TABLE cannot run in WebSql, dropping old table."),
s.unshift("DROP TABLE IF EXISTS "+x(n.getName()))}for(Qt(t.logger,u+" table: "+n.getName()+": "+s.join(";")),t=0;t<s.length;t++)o(s[t])}function xo(t,e){if(Te.call(this),this.f=e,this.b=[],t>this.f)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var n=0;n<t;n++)this.b.push(this.a())}function Eo(){this.a=[],this.c=new At,this.f=new At,this.h=1,this.g=new xo(0,4e3),this.g.a=function(){return new jo},this.i=new xo(0,50),this.i.a=function(){return new So};var t=this;this.b=new xo(0,2e3),this.b.a=function(){return String(t.h++)},this.b.c=function(){}}function So(){this.time=this.count=0}function jo(){}function Oo(t,e,n){var r=[];return-1==e?r.push("    "):r.push(Co(t.b-e)),r.push(" ",No(t.b-0)),0==t.a?r.push(" Start        "):1==t.a?(r.push(" Done "),r.push(Co(t.g-t.startTime)," ms ")):r.push(" Comment      "),r.push(n,t),0<t.f&&r.push("[VarAlloc ",t.f,"] "),r.join("")}function Co(t){t=Math.round(t);var e="";return 1e3>t&&(e=" "),100>t&&(e="  "),10>t&&(e="   "),e+t}function No(t){return t=Math.round(t),String(100+t/1e3%60).substring(1,3)+"."+String(1e3+t%1e3).substring(1,4)}function To(t){return To[" "](t),t}function Ao(t,e){if(Dn.call(this,t?t.type:""),this.b=this.target=null,this.clientY=this.clientX=this.Cb=this.Bb=0,this.a=this.state=null,t){this.a=t,this.type=t.type,this.target=t.target||t.srcElement,this.b=e;var n=t.relatedTarget;if(n&&Ns)try{To(n.nodeName)}catch(r){}Object.defineProperties?Object.defineProperties(this,{Bb:{configurable:!0,enumerable:!0,get:this.Xb,set:this.vc},Cb:{configurable:!0,enumerable:!0,get:this.Yb,set:this.wc}}):(this.Bb=this.Xb(),this.Cb=this.Yb()),this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.state=t.state,t.defaultPrevented&&this.preventDefault()}}function Io(t,e,n,r,i){this.listener=t,this.a=null,this.src=e,this.type=n,this.Va=!!r,this.eb=i,this.key=++wu,this.xa=this.Ua=!1}function Ro(t){t.xa=!0,t.listener=null,t.a=null,t.src=null,t.eb=null}function Po(t){this.src=t,this.a={},this.b=0}function Fo(t,e){var n=e.type;n in t.a&&T(t.a[n],e)&&(Ro(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function qo(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.xa&&o.listener==e&&o.Va==!!n&&o.eb==r)return i}return-1}function Do(t,e,n,i,o){if(r(e))for(var a=0;a<e.length;a++)Do(t,e[a],n,i,o);else n=Go(n),t&&t[_u]?t.ga.add(String(e),n,!1,i,o):Bo(t,e,n,!1,i,o)}function Bo(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=!!i,s=$o(t);s||(t[ku]=s=new Po(t)),n=s.add(e,n,r,i,o),n.a||(r=Lo(),n.a=r,r.src=t,r.listener=n,t.addEventListener?t.addEventListener(e.toString(),r,a):t.attachEvent(Vo(e.toString()),r),Eu++)}function Lo(){var t=Ko,e=bu?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function Mo(t,e,n,i,o){if(r(e))for(var a=0;a<e.length;a++)Mo(t,e[a],n,i,o);else n=Go(n),t&&t[_u]?t.ga.add(String(e),n,!0,i,o):Bo(t,e,n,!0,i,o)}function Uo(t,e,n,i,o){if(r(e))for(var a=0;a<e.length;a++)Uo(t,e[a],n,i,o);else n=Go(n),t&&t[_u]?(t=t.ga,e=String(e).toString(),e in t.a&&(a=t.a[e],n=qo(a,n,i,o),-1<n&&(Ro(a[n]),Ga.splice.call(a,n,1),0==a.length&&(delete t.a[e],t.b--)))):t&&(t=$o(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qo(e,n,!!i,o)),(n=-1<t?e[t]:null)&&Ho(n))}function Ho(t){if(!s(t)&&t&&!t.xa){var e=t.src;if(e&&e[_u])Fo(e.ga,t);else{var n=t.type,r=t.a;e.removeEventListener?e.removeEventListener(n,r,t.Va):e.detachEvent&&e.detachEvent(Vo(n),r),Eu--,(n=$o(e))?(Fo(n,t),0==n.b&&(n.src=null,e[ku]=null)):Ro(t)}}}function Vo(t){return t in xu?xu[t]:xu[t]="on"+t}function Wo(t,e,n,r){var i=!0;if((t=$o(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.Va==n&&!o.xa&&(o=zo(o,r),i=i&&!1!==o)}return i}function zo(t,e){var n=t.listener,r=t.eb||t.src;return t.Ua&&Ho(t),n.call(r,e)}function Ko(t,n){if(t.xa)return!0;if(!bu){var r=n||e("window.event"),i=new Ao(r,this),o=!0;if(!(0>r.keyCode||void 0!=r.returnValue)){t:{var a=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){a=!0}(a||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],a=i.b;a;a=a.parentNode)r.push(a);for(var a=t.type,u=r.length-1;0<=u;u--){i.b=r[u];var l=Wo(r[u],a,!0,i),o=o&&l}for(u=0;u<r.length;u++)i.b=r[u],l=Wo(r[u],a,!1,i),o=o&&l}return o}return zo(t,new Ao(n,this))}function $o(t){return t=t[ku],t instanceof Po?t:null}function Go(t){return u(t)?t:(t[Su]||(t[Su]=function(e){return t.handleEvent(e)}),t[Su])}function Qo(){Te.call(this),this.ga=new Po(this),this.b=this,this.a=null}function Jo(t,e,n,r){if(e=t.ga.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.xa&&a.Va==n){var s=a.listener,u=a.eb||a.src;a.Ua&&Fo(t.ga,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.ec}function Xo(t){return t.h||(t.h=new Qo),t.h}function Yo(t,e,n){Qr.call(this,t,e,n)}function Zo(t,e){on.call(this,t,e)}function ta(t,e){on.call(this,t,e)}function ea(t,e){on.call(this,t,e)}function na(t,e,n){this.db=t,this.b=e,this.type=n||0,this.c=null}function ra(t,e,n,r){this.c=t,this.a=e||null,this.h=!!n,this.g=!!r,this.b=[],this.f=[]}function ia(t,e){for(var n=e.length-1;0<=n&&e[n]==t.b[t.b.length-1];n--)e=e.slice(0,n);if(t.f=e,t.a&&t.b[0]){if(t.a.lower!=t.a.upper)throw new sn("Ordering no allowed with range query");t.a=fe([t.a.lower])}return null}function oa(t,e){if((0!=t.b.length||0!=t.f.length)&&ua(t)&&!aa(t))throw new sn('Require index "'+t.b.concat(t.f).join(", ")+'" not found in store "'+t.c.getName()+'"');var n=new De(t.c.getName(),sa(t),t.a,t.h,t.g,(!!e));return n.C=t.b.length,n}function aa(t){var e=t.b.concat(t.f),n=ir(t.c,e);return n||e[e.length-1]==t.c.keyPath&&(n=ir(t.c,e.slice(0,e.length-1)))?n:null}function sa(t){return(t=aa(t))?t.getName():void 0}function ua(t){return 0<t.b.length||(1==t.f.length?t.f[0]!=t.c.keyPath:1<t.f.length)}function la(t,e,n,r){na.call(this,t,e,n),this.a=r}function ca(t){for(var e=[],n=0;n<t.a.length;n++)e[n]=oa(t.a[n]);return e}function fa(t){for(var e=0;e<t.a.length;e++)if(0<t.a[e].b.length)return!0;return!1}function ha(t,e,n,r){na.call(this,t,e,n),this.a=r}function pa(t){return oa(t.a,!(2==t.type||3==t.type||1==t.type))}function ga(){this.a=Fa()}function da(t){this.g=t||"",this.h=ju}function va(t){return t=new Date(t.g),ya(t.getFullYear()-2e3)+ya(t.getMonth()+1)+ya(t.getDate())+" "+ya(t.getHours())+":"+ya(t.getMinutes())+":"+ya(t.getSeconds())+"."+ya(Math.floor(t.getMilliseconds()/10))}function ya(t){return 10>t?"0"+t:String(t)}function ba(t,e){var n=(t.g-e)/1e3,r=n.toFixed(3),i=0;if(1>n)i=2;else for(;100>n;)i++,n*=10;for(;0<i--;)r=" "+r;return r}function ma(t){da.call(this,t)}function _a(t,n){var r;switch(n.f.value){case Bs.value:r="dbg-sh";break;case Ls.value:r="dbg-sev";break;case Ms.value:r="dbg-w";break;case Us.value:r="dbg-i";break;default:r="dbg-f"}var i=[];i.push(t.g," "),t.a&&i.push("[",va(n),"] "),i.push("[",ba(n,t.h.get()),"s] "),i.push("[",n.b,"] ");var i=Et(i.join("")),a=Ss;if(t.b&&n.a){var s,a=St("br");try{var u,l=n.a,c=e("window.location.href");if(o(l))u={message:l,name:"Unknown error",lineNumber:"Not available",fileName:c,stack:"Not available"};else{var f,h,p=!1;try{f=l.lineNumber||l.Rc||"Not available"}catch(g){f="Not available",p=!0}try{h=l.fileName||l.filename||l.sourceURL||Ia.$googDebugFname||c}catch(d){h="Not available",p=!0}u=!p&&l.lineNumber&&l.fileName&&l.stack&&l.message&&l.name?l:{message:l.message||"Not available",name:l.name||"UnknownError",lineNumber:f,fileName:h,stack:l.stack||"Not available"}}var v,y=u.fileName;if(null!=y||(y=""),/^https?:\/\//i.test(y)){var b;l=y,l instanceof vt?b=l:(l=l.oa?l.ha():String(l),l=vs.test(l)?bt(l):"about:invalid#zClosurez",b=mt(l)),pt("view-source scheme plus HTTP/HTTPS URL");var m="view-source:"+yt(b);v=mt(m)}else{var _=pt("sanitizedviewsrc");v=mt(ht(_))}s=jt(Et("Message: "+u.message+"\nUrl: "),St("a",{href:v,target:"_new"},u.fileName),Et("\nLine: "+u.lineNumber+"\n\nBrowser stack:\n"+u.stack+"-> [end]\n\nJS stack traversal:\n"+Ft(void 0)+"-> "))}catch(w){s=Et("Exception trying to expose exception! You win, we lose. "+w)}a=jt(a,s)}return s=Et(n.c),r=St("span",{"class":r},jt(s,a)),t.c?jt(i,r,St("br")):jt(i,r)}function wa(t){da.call(this,t)}function ka(){this.g=h(this.h,this),this.a=new wa,this.a.a=!1,this.a.b=!1,this.b=this.a.c=!1,this.c="",this.f={}}function xa(t,e,n){t[e]?t[e](n):t.log(n)}function Ea(t,e){q(e,function(e,n){"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:n in Nu?t.setAttribute(Nu[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}function Sa(t,e,n){function r(n){n&&e.appendChild(o(n)?t.createTextNode(n):n)}for(var a=2;a<n.length;a++){var s=n[a];!i(s)||l(s)&&0<s.nodeType?r(s):Ja(ja(s)?A(s):s,r)}}function ja(t){if(t&&"number"==typeof t.length){if(l(t))return"function"==typeof t.item||"string"==typeof t.item;if(u(t))return"function"==typeof t.item}return!1}function Oa(t){this.a=t||Ia.document||document}function Ca(t,e){var n;n=t.a;var r=e&&"*"!=e?e.toUpperCase():"";return n=n.querySelectorAll&&n.querySelector&&r?n.querySelectorAll(r+""):n.getElementsByTagName(r||"*")}function Na(e){Cs&&t(e.cssText)?e.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":e.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"}function Ta(t){this.g=h(this.h,this),this.b=new ma,this.c=this.b.a=!1,this.a=t,this.f=this.a.ownerDocument||this.a.document,t=(t=this.a)?new Oa(9==t.nodeType?t:t.ownerDocument||t.document):qa||(qa=new Oa);var e=null,n=t.a;Cs&&n.createStyleSheet?(e=n.createStyleSheet(),Na(e)):(n=Ca(t,"head")[0],n||(e=Ca(t,"body")[0],n=t.b("head"),e.parentNode.insertBefore(n,e)),e=t.b("style"),Na(e),n.appendChild(e)),this.a.className+=" logdiv"}var Aa,Ia=this,Ra="closure_uid_"+(1e9*Math.random()>>>0),Pa=0,Fa=Date.now||function(){return+new Date};d(b,Error),b.prototype.name="CustomError";var qa,Da=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ba=/&/g,La=/</g,Ma=/>/g,Ua=/"/g,Ha=/'/g,Va=/\x00/g,Wa=/[\x00&<>"']/,za={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ka={"'":"\\'"};d(S,b),S.prototype.name="AssertionError";var $a,Ga=Array.prototype,Qa=Ga.indexOf?function(t,e,n){return Ga.indexOf.call(t,e,n)}:function(t,e,n){if(n=null==n?0:0>n?Math.max(0,t.length+n):n,o(t))return o(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ja=Ga.forEach?function(t,e,n){Ga.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,a=0;a<r;a++)a in i&&e.call(n,i[a],a,t)},Xa=Ga.map?function(t,e,n){return Ga.map.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=Array(r),a=o(t)?t.split(""):t,s=0;s<r;s++)s in a&&(i[s]=e.call(n,a[s],s,t));return i},Ya=Ga.some?function(t,e,n){return Ga.some.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,a=0;a<r;a++)if(a in i&&e.call(n,i[a],a,t))return!0;return!1};t:{var Za=Ia.navigator;if(Za){var ts=Za.userAgent;if(ts){$a=ts;break t}}$a=""}var es,ns,rs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),is=!1,os=[];[].push(function(){is=!1,os=[]});var as=0,ss=2,us=3;K.prototype.then=function(t,e,n){return G(this,u(t)?t:null,u(e)?e:null,n)},v(K),K.prototype.i=function(t){this.b=as,Q(this,ss,t)},K.prototype.j=function(t){this.b=as,Q(this,us,t)},K.prototype.m=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;e++)Y(this,t[e],this.b,this.h)}this.g=!1};var ls=M;d(tt,b),tt.prototype.name="cancel",Aa=et.prototype,Aa.Xa=function(t,e){this.m=!1,nt(this,t,e)},Aa.callback=function(t){rt(this),nt(this,!0,t)},Aa.o=function(t){rt(this),nt(this,!1,t)},Aa.H=function(t,e){return it(this,t,null,e)},Aa.Sb=function(t,e){return it(this,null,t,e)},Aa.Rb=function(t,e){return it(this,t,t,e)},Aa.then=function(t,e,n){var r,i,o=new K(function(t,e){r=t,i=e});return it(this,r,function(t){i(t)}),o.then(t,e,n)},v(et),et.prototype.ub=function(t){return it(this,t.callback,t.o,t),this},et.prototype.ia=function(t){var e=new et;return this.ub(e),t&&(e.f=this,this.G++),e},et.prototype.yb=function(){this.i&&this.c&&at(this)&&(ct(this.i),this.i=0),this.f&&(this.f.G--,delete this.f);for(var e=this.g,n=!1,r=!1;this.j.length&&!this.m;){var i=this.j.shift(),o=i[0],a=i[1],i=i[2];if(o=this.b?a:o)try{var s=o.call(i||this.Y,e);t(s)&&(this.b=this.b&&(s==e||s instanceof Error),this.g=e=s),y(e)&&(this.m=r=!0)}catch(u){e=u,this.b=!0,at(this)||(n=!0)}}this.g=e,r&&(r=h(this.Xa,this,!0),s=h(this.Xa,this,!1),e instanceof et?(it(e,r,s),e.K=!0):e.then(r,s)),n&&(e=new lt(e),cs[e.gb]=e,this.i=e.gb)},d(ut,b),ut.prototype.message="Deferred has already fired",ut.prototype.name="AlreadyCalledError",lt.prototype.b=function(){throw delete cs[this.gb],window.console.error(this.a.stack),this.a};var cs={},fs=L("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));ft.prototype.oa=!0,ft.prototype.ha=function(){return this.a},ft.prototype.toString=function(){return"Const{"+this.a+"}"};var hs={};gt.prototype.oa=!0;var ps={};gt.prototype.ha=function(){return this.a},gt.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};var gs=dt(""),ds=/^[-.%_!# a-zA-Z0-9]+$/;Aa=vt.prototype,Aa.oa=!0,Aa.ha=function(){return this.a},Aa.Db=!0,Aa.ua=function(){return 1},Aa.toString=function(){return"SafeUrl{"+this.a+"}"};var vs=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,ys=/[()']|%5B|%5D|%25/g,bs={"'":"%27","(":"%28",")":"%29","%5B":"[","%5D":"]","%25":"%"},ms={};Aa=_t.prototype,Aa.oa=!0,Aa.ha=function(){return""},Aa.Db=!0,Aa.ua=function(){return 1},Aa.toString=function(){return"TrustedResourceUrl{}"};var _s={};Aa=wt.prototype,Aa.Db=!0,Aa.ua=function(){return this.b},Aa.oa=!0,Aa.ha=function(){return this.a},Aa.toString=function(){return"SafeHtml{"+this.a+"}"};var ws=/^[a-zA-Z0-9-]+$/,ks={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},xs={embed:!0,iframe:!0,link:!0,object:!0,script:!0,style:!0,template:!0},Es={},Ss=Ot("",0),js="StopIteration"in Ia?Ia.StopIteration:Error("StopIteration");Ct.prototype.next=function(){throw js},Ct.prototype.tb=function(){return this},Aa=At.prototype,Aa.zb=function(){return this.c},Aa.cb=function(){It(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Aa.na=function(){return It(this),this.a.concat()},Aa.clear=function(){this.b={},this.f=this.c=this.a.length=0},Aa.get=function(t,e){return Object.prototype.hasOwnProperty.call(this.b,t)?this.b[t]:e},Aa.set=function(t,e){Object.prototype.hasOwnProperty.call(this.b,t)||(this.c++,this.a.push(t),this.f++),this.b[t]=e},Aa.forEach=function(t,e){for(var n=this.na(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},Aa.clone=function(){return new At(this)},Aa.tb=function(t){It(this);var e=0,n=this.a,r=this.b,i=this.f,o=this,a=new Ct;return a.next=function(){for(;;){if(i!=o.f)throw Error("The map has changed since the iterator was created");if(e>=n.length)throw js;var a=n[e++];return t?a:r[a]}},a};var Os=F("Opera")||F("OPR"),Cs=F("Trident")||F("MSIE"),Ns=F("Gecko")&&-1==$a.toLowerCase().indexOf("webkit")&&!(F("Trident")||F("MSIE")),Ts=-1!=$a.toLowerCase().indexOf("webkit");Ts&&F("Mobile"),F("Macintosh"),F("Windows"),F("Linux")||F("CrOS");var As=Ia.navigator||null;As&&(As.appVersion||"").indexOf("X11"),F("Android"),!F("iPhone")||F("iPod")||F("iPad"),F("iPad");var Is=function(){var t,e="";return Os&&Ia.opera?(e=Ia.opera.version,u(e)?e():e):(Ns?t=/rv\:([^\);]+)(\)|;)/:Cs?t=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Ts&&(t=/WebKit\/(\S+)/),t&&(e=(e=t.exec($a))?e[1]:""),Cs&&(t=Rt(),t>parseFloat(e))?String(t):e)}(),Rs={},Ps=Ia.document,Fs=Ps&&Cs?Rt()||("CSS1Compat"==Ps.compatMode?parseInt(Is,10):5):void 0,qs={};Bt.prototype.a=null;var Ds=0;Mt.prototype.toString=function(){return this.name};var Bs=new Mt("SHOUT",1200),Ls=new Mt("SEVERE",1e3),Ms=new Mt("WARNING",900),Us=new Mt("INFO",800),Hs=new Mt("CONFIG",700),Vs=new Mt("FINE",500),Ws=new Mt("FINER",400),zs=new Mt("FINEST",300),Ks=[new Mt("OFF",1/0),Bs,Ls,Ms,Us,Hs,Vs,Ws,zs,new Mt("ALL",0)],$s=null;Lt.prototype.getName=function(){return this.g},Lt.prototype.log=function(t,e,n){if(t.value>=Ut(this).value)for(u(e)&&(e=e()),t=new Bt(t,String(e),this.g),n&&(t.a=n),n="log:"+t.c,Ia.console&&(Ia.console.timeStamp?Ia.console.timeStamp(n):Ia.console.markTimeline&&Ia.console.markTimeline(n)),Ia.msWriteProfilerMark&&Ia.msWriteProfilerMark(n),n=this;n;){e=n;var r=t;if(e.a)for(var i=0,o=void 0;o=e.a[i];i++)o(r);n=n.c}};var Gs={},Qs=null;d(Xt,b),d(Yt,b),d(Zt,b),d(te,b),d(ee,b),d(ne,Error),ne.prototype.name="ydn.error.InternalError",d(re,et),Aa=re.prototype,Aa.Tb=function(t,e){return this.h.push([t,e]),this},Aa.callback=function(t){this.h.length=0,re.B.callback.call(this,t)},Aa.o=function(t){this.h.length=0,re.B.o.call(this,t)},Aa.ub=function(t){return re.B.ub.call(this,t),t instanceof re&&t.Tb(function(t){ie(this,t)},this),this},Aa.zc=function(){return this},et.prototype.done=et.prototype.H,et.prototype.fail=et.prototype.Sb,et.prototype.always=et.prototype.Rb,re.prototype.then=re.prototype.then,oe.prototype.lower=void 0,oe.prototype.upper=void 0,oe.prototype.toJSON=function(){return he(this)},oe.prototype.ka=function(t){var e=this.lower,n=this.upper,r=this.lowerOpen,i=this.upperOpen;return null!=t.lower&&(null==this.lower||t.lower>=this.lower)&&(e=t.lower,r=t.lowerOpen||this.lowerOpen),null!=t.upper&&(null==this.upper||t.upper<=this.upper)&&(n=t.upper,i=t.upperOpen||this.upperOpen),ue(e,n,r,i)};var Js=Ia.IDBKeyRange||Ia.webkitIDBKeyRange||oe,Xs={};Oe.prototype.write=function(t){for(var e=0;e<arguments.length;e++)this.b=arguments[e].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)},Oe.prototype.toString=function(){return this.a.length?this.a.join(""):""},Ne.prototype.ma="",Ne.prototype.ka=function(t){return this.ma!=t.ma?null:(t=null!=this.a&&null!=t.a?this.a.ka(t.a):this.a||t.a,new Ne(this.ma,t))};var Ys={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Zs=Ys.READ_ONLY,tu=Ys.READ_WRITE,eu=Ys.VERSION_CHANGE,nu=Ia.indexedDB||Ia.mozIndexedDB||Ia.webkitIndexedDB||Ia.moz_indexedDB||Ia.msIndexedDB,ru=0,iu={};Te.prototype.ia=!1,Te.prototype.Wb=function(){if(!this.ia&&(this.ia=!0,this.fa(),0!=ru)){var t=this[Ra]||(this[Ra]=++Pa);delete iu[t]}},Te.prototype.fa=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},d(Ae,Te),Aa=Ae.prototype,Aa.Ob=function(e,n,i,a,s){if(t(n)){e=this.b;var u,l=n;if(r(n)?(u=ir(e,n),l=n.join(", ")):u=rr(e,n),!u)throw new Xt('require index "'+l+'" not found in store "'+e.getName()+'"');this.O=u.getName()}this.g=o(this.O),this.w=i||null,this.ta=0,this.N=this.C=!1,this.reverse="prev"==a||"prevunique"==a,this.unique="nextunique"==a||"prevunique"==a,this.Z=a,this.Ia=s,this.j=this.c=this.a=void 0},Aa.Z="",Aa.w=null,Aa.unique=!1,Aa.reverse=!1,Aa.Ia=!0,Aa.logger=Wt("ydn.db.core.req.AbstractCursor"),Aa.W=function(t,e,n){null==t&&(Jt(this.logger,this+" finished."),this.C=!0),this.a=t,this.c=e,this.j=n,this.ta++,this.C?(Qt(this.logger,this+" DONE."),this.G(),Re(this)):(Qt(this.logger,this+" new cursor position {"+(this.g?this.a+", "+this.c:this.a)+"}"),this.G(this.a))},Aa.fa=function(){this.f=null},Aa.toString=function(){return"Cursor:"+this.s+(t(this.O)?":"+this.O:"")+"["+(this.f?"":"~")+this.Qb+"]"},Aa.open=function(t,e,n,r){this.f=t,this.Qb=e,this.C=this.N=!1,this.a=n,this.c=r,this.openCursor(this.a,this.c)},Aa.zb=function(){return this.ta},Aa.Mc=function(){return this.a},Aa.T=function(){return this.g?this.c:this.a},Aa.Ca=function(){return this.Ia?this.T():this.j},Aa.Sa=function(){},Aa.ra=function(){},d(De,qe),De.prototype.f=!0,d(Be,De),d(Le,De),d(Me,De),d(Ue,De);var ou="init";Aa=De.prototype,Aa.logger=Wt("ydn.db.Iterator"),Aa.Dc=function(){return this.b},Aa.Ac=function(){return this.c},Aa.gc=function(){return this.a?this.a instanceof Js?this.a:Js.bound(this.a.lower,this.a.upper,this.a.lowerOpen,this.a.upperOpen):null},Aa.Ec=function(){return this.f},Aa.qc=function(){return this.u},Aa.clone=function(){var t=new De(this.b,this.c,this.a,this.da(),this.za(),this.f,this.h);return t.C=this.C,t},Aa.unique=function(t){return new De(this.b,this.c,this.a,this.da(),t,this.f,this.h)},Aa.toJSON=function(){return{store:this.b,index:this.c,keyRange:this.a?he(this.a):null,direction:this.m}},Aa.toString=function(){var e=t(this.h)?":"+this.h.join(","):t(this.c)?":"+this.c:"",e=e+de(this.a);this.g!=ou&&(e+=this.g+"{"+this.i,this.u&&(e+=", "+this.j),e+="}");var n=this.u?"Index":"",n=n+(this.f?"Key":"Value");return n+"Iterator:"+this.b+e},Aa.hc=function(t,e){var n=new De(this.b,this.c,this.a,this.da(),this.za(),this.f,this.h);return n.i=t,n.j=e,n.g="rest",n},Aa.reverse=function(){return new De(this.b,this.c,this.a,(!this.da()),this.za(),this.f,this.h)},Aa.da=function(){return"prev"===this.m||"prevunique"===this.m},Aa.za=function(){return"nextunique"===this.m||"prevunique"===this.m},Aa.pc=function(){return this.g},Aa.load=function(t){t=t[0],t.Ob(this.b,this.h||this.c,this.a,this.m,this.f),this.g="busy";var e=this;return t.Pb=function(t,n,r){e.i=n,e.j=r,e.g=t?"rest":"done"},t.openCursor(this.i,this.j),t},Aa.Bc=function(){return this.i},Aa.Cc=function(){return this.j},Aa.Jb=function(t,e,n){t=t||ou,"busy"==this.g?$t(this.logger,this+": resetting state to "+t+" ignore during iteration"):(this.i=e,this.j=n,this.g=t)},Aa.stores=function(){return[this.b]},d(He,re),Aa=He.prototype,Aa.ya="",Aa.logger=Wt("ydn.db.Request"),Aa.lc=function(){return!!this.a},Aa.abort=function(){if(Jt(this.logger,this+" aborting "+this.a),!this.a)throw new cn(this+" No active transaction");if(u(this.a.abort))this.a.abort();else{if(!u(this.a.executeSql))throw new Zt;this.a.executeSql("ABORT",[],function(){},function(){return!0})}},Aa.callback=function(t){Jt(this.logger,this+" SUCCESS"),He.B.callback.call(this,t)},Aa.o=function(t){Jt(this.logger,this+" ERROR"),He.B.o.call(this,t)},Aa.state=function(){return this.c?this.b?"rejected":"resolved":"pending"},Aa.toString=function(){return"Request:"+Qe(this)},Aa.yb=function(){this.i&&this.c&&at(this)&&(ct(this.i),this.i=0),this.f&&(this.f.G--,delete this.f);for(var e=this.g,n=!1;this.j.length&&!this.m;){var r=this.j.shift(),i=r[0],o=r[1],r=r[2];(i=this.b?o:i)&&(i=i.call(r||this.Y,e),t(i)&&(this.b=this.b&&(i==e||i instanceof Error),this.g=e=i),y(e)&&(this.m=n=!0))}this.g=e,n&&(n=h(this.Xa,this,!0),i=h(this.Xa,this,!1),e instanceof et?(it(e,n,i),e.K=!0):e.then(n,i))},Aa.toJSON=function(){var t=(this.ya||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.C?this.C.split(":"):[],branchNo:parseFloat(t[1]),transactionNo:parseFloat(t[2]),queueNo:parseFloat(t[3]),requestNo:parseFloat(t[4])}};var au=nu&&nu.cmp?h(nu.cmp,nu):Ce,su=[];Xe.prototype.logger=Wt("ydn.db.con.IdbCursorStream"),Xe.prototype.g=!1,Aa=en.prototype,Aa.logger=Wt("ydn.db.Streamer"),Aa.Pa=null,Aa.Lb=null,Aa.qa=null,Aa.xc=function(t){this.Lb=t},Aa.Ha=!1,Aa.Jc=function(t){if(this.qa){this.Ha=!0;var e=this;Ze(this.qa,function(){t(e.b,e.a),e.b=[],e.a=[],e.Ha=!1})}else t(this.b,this.a),this.b=[],this.a=[]},Aa.ea=function(t,e){this.b.push(t),this.a.push(e),rn(this)},Aa.push=function(t,e){if(this.Ha)throw new Pr("push not allowed after a collection is started");if(2<=arguments.length)this.ea(t,e);else{if(!this.qa){if(!this.Pa)throw new Pr("Database connection is not setup.");var n=this.Pa.Ba();if(!n)throw new Pr("Database is not connected.");if("indexeddb"!==n)throw new Tr(n);this.qa=new Xe(this.Pa,this.c,this.Qa,h(this.ea,this))}n=this.qa,n.b.push(t),tn(n)}},Aa.toString=function(){return"Streamer:"+this.c+(this.Qa||"")},on.prototype.logger=Wt("ydn.db.algo.AbstractSolver"),on.prototype.h=function(t,e){this.b=e[0].da();for(var n=0;n<e.length;n++){if(!(e[n]instanceof De))throw new Yt("item at iterators "+n+" is not an iterator.");if(0<n&&this.b!=e[n].da())throw new Yt("iterator at "+n+" must "+(this.b?"be reverse":"not be reverse"))}if(this.a instanceof en&&nn(this.a,t),this.f&&(n=e[0].h)&&1<n.length&&n[n.length-1]!=this.a.Qa)throw new Pr("Output streamer projection field must be same as postfix field in the iterator");for(var r="{",n=0;n<e.length;n++)0<n&&(r+=", "),r+=e.toString();return r+="}",this.b&&(r+=" reverse"),Gt(this.logger,this+" begin "+r),!1},on.prototype.c=function(){return[]},d(sn,Error),sn.prototype.name="ConstraintError",sn.prototype.toString=function(){return this.name+": "+this.message},d(un,Error),un.prototype.name="ydn.db.VersionError",un.prototype.toString=function(){return this.name+": "+this.message},d(ln,Error),ln.prototype.name="ydn.db.InternalError",d(cn,Error),d(fn,Error),d(hn,Error),hn.prototype.name="NotFoundError",hn.prototype.toString=function(){return this.name+": "+this.message},d(pn,Error),pn.prototype.toString=function(){return this.name+": "+this.message},d(gn,Error),gn.prototype.toString=function(){return this.name+": "+this.message},d(dn,Error),d(vn,Error),Aa=yn.prototype,Aa.toJSON=function(){var t={store:this.s,id:this.id};return this.parent&&(t.parent=this.parent.toJSON()),t},Aa.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.s+"^:"+this.id},Aa.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")},Aa.Gc=function(){return this.s},Aa.mc=function(){return this.id},Aa.Fc=function(){return this.parent},_n.prototype.logger=Wt("ydn.db.crud.req.RequestExecuto"),_n.prototype.toString=function(){return"RequestExecutor"},wn.prototype.logger=Wt("ydn.db.tr.Mutex"),wn.prototype.R=null,wn.prototype.L=null,wn.prototype.toString=function(){return"Mutex:"+("B"+this.c+"T"+this.b)+(this.a?"*":"")},xn.prototype.logger=Wt("ydn.db.tr.Thread"),xn.prototype.type=function(){return this.K.Ba()},xn.prototype.l=function(){return this.K},xn.prototype.I=function(){return"B"+this.N+"T"+this.f};var uu="single";d(Sn,xn),Aa=Sn.prototype,Aa.logger=Wt("ydn.db.tr.Serial"),Aa.abort=function(){Jt(this.logger,this+": aborting"),En(this.i)},Aa.pa=function(e,n,r,a){var s=o(n)?[n]:n;if(!i(s))throw new Xt("store names must be an array");if(0==s.length)throw new Xt("number of store names must more than 0");for(var l=0;l<s.length;l++){if(!o(s[l]))throw new Xt("store name at "+l+" must be string but found "+s[l]+" of type "+typeof s[l]);if(this.Y&&!(0<=Qa(this.Y,s[l])))throw new Xt('store name "'+l+s[l]+'" in scope of '+this)}var c=t(r)?r:Zs,f=this;if(this.b.a||!Mr(this.l())&&this.u)Cn(this,e,n,c,a);else{var h=this.I();if(a&&this.h.push(a),this.m&&this.f>=this.m)throw new ee("Exceed maximum number of transactions of "+this.m);this.u=!0,this.l().transaction(function(t){var r=f.b;for(r.a=t,r.f=!1,r.R=n,r.mode=c,r.b++,r.L=null,h=f.I(),Gt(f.logger,h+" BEGIN "+yr(n)+" "+c),e(f),e=null;On(f);)t=f.c.shift(),t.L&&f.h.push(t.L),Qt(f.logger,"pop tx queue"+(f.c.length+1)+" reusing T"+f.f),t.ab()},s,c,function(t,e){Gt(f.logger,h+" "+t);var n=f.b;for(n.a?(n.a=null,n.R=null,n.mode=null,u(n.L)&&n.L(t,e),n.L=null):$t(n.logger,n+" has no TX to be unlocked for "+t),n=0;n<f.h.length;n++)(0,f.h[n])(t,e);f.h.length=0,(n=f.c.shift())&&f.pa(n.ab,n.R,n.mode,n.L),f.a=0})}},Aa.I=function(){var t=this.b;return"B"+t.c+"T"+t.b},Aa.request=function(t,e,n,r){function i(t,e){ze(o),r&&r(t,e)}var o=new He(t);t=n||Zs;var a=this;return kn(this.b)&&jn(this,e,t)?(e=this.b.a,this.a++,Ve(o,e,this.I()+"R"+this.a),this.h.push(i)):a.pa(function(){var t=a.b.a;a.a++,Ve(o,t,a.I()+"R"+a.a)},e,t,i),o},Aa.Da=function(t,e,n,r,i){r=r||Zs;var o,a=this;if(kn(a.b)&&jn(this,n,r)){var s=a.b.a;a.a++,o=a.I()+"R"+a.a,Jt(a.logger,o+" BEGIN"),e(s,o,function(e,n){a.i=s,n?(Jt(a.logger,o+" ERROR"),t.o(e)):(Jt(a.logger,o+" SUCCESS"),t.callback(e)),a.i=null}),Jt(a.logger,o+" END"),e=null}else a.pa(function(){var n=a.b.a;a.a++,o=a.I()+"R"+a.a,Jt(a.logger,o+" BEGIN"),e(n,o,function(e,r){a.i=n,r?(Jt(a.logger,o+" ERROR"),t.o(e)):(Jt(a.logger,o+" SUCCESS"),t.callback(e)),a.i=null}),Jt(a.logger,o+" END"),e=null},n,r,i)},Aa.getName=function(){return this.l().getName()},Aa.toString=function(){return"Serial:"+this.I()+(this.i?"*":"")},d(Nn,Sn),Nn.prototype.logger=Wt("ydn.db.tr.AtomicSerial"),Nn.prototype.request=function(t,e,n){var r,i,o,a=Nn.B.request.call(this,t,e,n,function(t,e){if(ze(a),r)"complete"!=t&&(o=!0,i=e),r(i,o);else{var n=new vn;Ke(a,n,!0)}});return $e(a,function(t,e,n){o=e,i=t,r=n}),a},Nn.prototype.Da=function(t,e,n,r,i){var o,a,s=new et;it(s,function(t){a=!1,o=t},function(t){a=!0,o=t}),Nn.B.Da.call(this,s,e,n,r,function(e,n){if("complete"!=e)t.o(n);else if(!0===a)t.o(o);else if(!1===a)t.callback(o);else{var r=new vn;t.o(r)}i&&(i(e,n),i=void 0)})},Nn.prototype.toString=function(){return"Atomic"+Nn.B.toString.call(this)},Aa=Tn.prototype,Aa.logger=Wt("ydn.db.tr.DbOperator"),Aa.Oc=function(){return this.a.f},Aa.abort=function(){this.a.abort()},Aa.l=function(){return this.f},Aa.toString=function(){return"TxStorage:"+this.l().getName()},d(Rn,Tn),Aa=Rn.prototype,Aa.logger=Wt("ydn.db.crud.DbOperator"),Aa.count=function(e,n,i,s){var u,c,f,h;if(null!=e)if(r(e)){if(t(i)||t(n))throw new Xt("too many arguments.");c=e;for(var p=0;p<c.length;p++)if(!Er(this.b,c[p]))throw new Xt('store name "'+c[p]+'" at '+p+" not found.");Jt(this.logger,"countStores: "+yr(c)),u=this.a.request("count",c),Ge(u,function(){An(this).Ya(u,c)},this)}else{if(!o(e))throw new Xt("Invalid store name or store names.");if(p=xr(this.b,e),!p)throw new Xt('store name "'+e+'" not found.');if(t(s)&&!a(s))throw new Xt('unique value "'+s+'" must be boolean, but found '+typeof s+".");if(c=[e],o(n))if(f=n,l(i)){var g=ge(i);if(g)throw new Xt("invalid key range: "+vr(i)+" "+g);h=pe(i)}else{if(null!=i)throw new Xt("invalid key range: "+vr(i)+" of type "+typeof i);h=null}else{if(!l(n)&&null!=n)throw new Xt('invalid second argument for count "'+vr(i)+'" of type '+typeof n);if(l(n)){if(g=ge(n))throw new Xt("invalid key range: "+vr(n)+" "+g);h=pe(n)}else{if(null!=n)throw new Xt("key range must be  an object but found "+vr(n)+" of type "+typeof n);h=null}}Jt(this.logger,"countKeyRange: "+e+" "+(f?f:"")+yr(h)),u=this.a.request("count",c),gr(p,u,arguments),Ge(u,function(){An(this).Fa(u,c[0],h,f,!!s)},this)}else $t(this.logger,"count method requires store name(s)"),p=kr(this.b),u=this.a.request("count",p),$e(u,function(t,e,n){if(e)n(t,!0);else{for(var r=e=0;r<t.length;r++)e+=t[r];n(e,!1)}},this),Ge(u,function(){An(this).Ya(u,c)},this);return u},Aa.get=function(e,n){var r,i=this;if(e instanceof yn){var a=e,s=a.s,u=xr(this.b,s);if(!u){if(this.b.a())return Mr(this.l())?Je("get",void 0):(r=new He("get"),this.l().ib(function(){it(i.get(e,n),function(t){r.callback(t)},function(t){r.o(t)})}),r);throw new Xt("Store: "+s+" not found.")}var l=a.id;Jt(this.logger,"getByKey: "+s+":"+l),r=this.a.request("get:key",[s]),gr(u,r,arguments,void 0,this),Ge(r,function(){An(this).bb(r,s,l)},this)}else{if(!o(e)||!t(n))throw new Xt("get require valid input arguments.");var c=e,u=xr(this.b,c);if(!u){if(this.b.a())return Mr(this.l())?Je("get",void 0):(r=new He("get"),this.l().ib(function(){it(i.get(e,n),function(t){r.callback(t)},function(t){r.o(t)})}),r);throw new Xt('Store name "'+c+'" not found.')}var f=n;Jt(this.logger,"getById: "+c+":"+f),r=this.a.request("get",[c]),gr(u,r,arguments,void 0,this),Ge(r,function(){An(this).bb(r,c,f)},this)}return r},Aa.rc=function(e,n,r,i,o){var u,c,f,h=xr(this.b,e),p=null;if(l(n)){var g=ge(n);if(g)throw new Xt("invalid key range: "+n+" "+g);p=pe(n)}else if(null!=n)throw new Xt('expect key range object, but found "'+vr(n)+'" of type '+typeof n);if(t(r)){if(!s(r))throw new Xt("limit must be a number, but "+r+" is "+typeof r);u=r}else u=100;if(t(i)){if(!s(i))throw new Xt("offset must be a number, but "+i+" is "+typeof i);
c=i}else c=0;if(t(o)){if(!a(o))throw new Xt("reverse must be a boolean, but "+o+" is "+typeof o);f=o}Jt(this.logger,"keysByKeyRange: "+e);var d=this.a.request("keys",[e]);return gr(h,d,arguments),Ge(d,function(){An(this).$(d,2,e,null,p,u,c,f,!1)},this),d},Aa.Ja=function(e,n,r,i,o,u,l){var c,f,h,p,g,d=ge(r);if(d)throw new Xt("invalid key range: "+r+" "+d);if(d=xr(this.b,e),c=pe(r),s(i))f=i;else{if(t(i))throw new Xt("limit must be a number");f=100}if(s(o))h=o;else{if(t(o))throw new Xt("offset must be a number");h=0}if(t(u)){if(!a(u))throw new Xt("reverse must be a boolean");p=u}if(t(l)){if(!a(l))throw new Xt("unique must be a boolean");g=l}Jt(this.logger,"keysByIndex: "+e);var v=this.a.request("keys:iter:index",[e]);return gr(d,v,arguments),Ge(v,function(){An(this).$(v,2,e,n,c,f,h,p,g)},this),v},Aa.keys=function(t,e,n,r,i,a,s){var u=xr(this.b,t);if(!o(t))throw new Xt("store name must be a string, but "+t+" of type "+typeof t+" is not.");if(!this.b.a()){if(!u)throw new Xt('store name "'+t+'" not found.');if(o(e)&&!rr(u,e))throw new Xt('index "'+e+'" not found in store "'+t+'".')}return this.b.a()&&!u?Je("keys",[]):o(e)?this.Ja(t,e,n,r,i,a,s):this.rc(t,e,n,r,i)},Aa.values=function(e,n,i,a,s,u,l){var c,f=this;if(o(e)){var h=e,p=xr(this.b,h);if(!p){if(this.b.a())return Mr(this.l())?Je("values",[]):(c=new He("values"),this.l().ib(function(){it(f.values(e,n,i,a,s,u),function(t){c.callback(t)},function(t){c.o(t)})}),c);throw new hn(h)}if(r(n)){if(t(i)||t(a))throw new Xt("too many input arguments");var g=n;Jt(this.logger,"listByIds: "+h+" "+g.length+" ids"),c=this.a.request("values:array",[h]),gr(p,c,arguments,void 0,this),Ge(c,function(){An(this).Eb(c,h,g)},this)}else c=o(n)?this.Ma(h,n,i,a,s,u,l):this.yc(h,n,i,a,s)}else{if(!r(e))throw new Xt("first argument "+e+" is invalid.");if(!(e[0]instanceof yn))throw new Xt("first argumentmust be array of ydn.db.Key, but "+e[0]+" of "+typeof e[0]+" found.");for(var p=[],d=e,v=0;v<d.length;v++){var y=d[v].s;if(!Er(this.b,y)){if(this.b.a())return p=[],p[d.length-1]=void 0,Je("get",p);throw new Xt("Store: "+y+" not found.")}0<=Qa(p,y)||p.push(y)}Jt(this.logger,"listByKeys: "+yr(p)+" "+d.length+" keys"),c=this.a.request("values:keys",p),Ge(c,function(){An(this).Fb(c,d)},this)}return c},Aa.yc=function(e,n,r,i,o){var u,c,f,h=xr(this.b,e),p=null;if(l(n)){var g=ge(n);if(g)throw new Xt("invalid key range: "+n+" "+g);p=pe(n)}else if(null!=n)throw new Xt('expect key range object, but found "'+vr(n)+'" of type '+typeof n);if(t(r)){if(!s(r))throw new Xt("limit must be a number, but "+r+" is "+typeof r);u=r}else u=100;if(t(i)){if(!s(i))throw new Xt("offset must be a number, but "+i+" is "+typeof i);c=i}else c=0;if(t(o)){if(!a(o))throw new Xt("reverse must be a boolean, but "+o+" is "+typeof o);f=o}Jt(this.logger,(p?"listByKeyRange: ":"listByStore: ")+e);var d=this.a.request("values",[e]);return gr(h,d,arguments),Ge(d,function(){An(this).$(d,4,e,null,p,u,c,f,!1)},this),d},Aa.Ma=function(e,n,r,i,o,u,l){var c,f,h,p,g=xr(this.b,e);if(!or(g,n))throw new Xt('index "'+n+'" not found in store "'+e+'"');var d=ge(r);if(d)throw new Xt("invalid key range: "+r+" "+d);var v=pe(r);if(t(i)){if(!s(i))throw new Xt("limit must be a number.");c=i}else c=100;if(t(o)){if(!s(o))throw new Xt("offset must be a number.");f=o}else f=0;if(a(u))h=u;else if(t(u))throw new Xt("reverse must be a boolean, but "+u);if(t(l)){if(!a(l))throw new Xt("unique must be a boolean");p=l}Jt(this.logger,"listByIndexKeyRange: "+e+":"+n);var y=this.a.request("values:iter:index",[e]);return gr(g,y,arguments),Ge(y,function(){An(this).$(y,4,e,n,v,c,f,h,p)},this),y},Aa.add=function(e,n,i){if(r(n))return this.Ta(e,n,i);var a,s=In(this,e),u=s.getName();if(o(s.keyPath)&&t(i))throw new Xt("key must not be provided while the store uses in-line key.");if(!s.keyPath&&!s.b&&!t(i))throw new Xt("out-of-line key must be provided for store: "+u);if(r(n)){for(Jt(this.logger,"addObjects: "+u+" "+n.length+" objects"),e=0;e<n.length;e++)pr(s,n[e]);a=this.a.request("add:array",[u],tu),Ge(a,function(){An(this).P(a,!1,!1,u,n,i)},this),s.aa&&a.H(function(t){t=new Vn(lu,this.l(),u,t,n),this.l().J(t)},this)}else{if(!l(n))throw new Xt("record must be an object or array list of objects, but "+n+" of type "+typeof n+" found.");e="store: "+u+" key: "+lr(s,n,i),Jt(this.logger,"addObject: "+e),pr(s,n),a=this.a.request("add",[u],tu),Ge(a,function(){An(this).P(a,!1,!0,u,[n],[i])},this),s.aa&&a.H(function(t){t=new Hn(lu,this.l(),s.getName(),t,n),this.l().J(t)},this)}return a},Aa.Ta=function(e,n,i){var a,s=In(this,e),u=s.getName();if(o(s.keyPath)&&t(i))throw new Xt("key must not be provided while the store uses in-line key.");if(!s.keyPath&&!s.b&&!t(i))throw new Xt("out-of-line key must be provided for store: "+u);if(!r(n))throw new Xt("record must be an array list of objects, but "+n+" of type "+typeof n+" found.");for(Jt(this.logger,"addObjects: "+u+" "+n.length+" objects"),e=0;e<n.length;e++)pr(s,n[e]);return a=this.a.request("add:array",[u],tu),Ge(a,function(){An(this).P(a,!1,!1,u,n,i)},this),s.aa&&a.H(function(t){t=new Vn(lu,this.l(),s.getName(),t,n),this.l().J(t)},this),a},Aa.put=function(e,n,i){var a,s=this;if(e instanceof yn){var u=e,c=u.s,f=xr(this.b,c);if(!f)throw new Xt('store "'+c+'" not found.');if(f.keyPath){var h=lr(f,n);if(null!=h){if(0!=au(h,u.id))throw new Xt("Inline key must be "+u+" but "+h+" found.")}else cr(f,n,u.id);return this.put(c,n)}return this.put(c,n,u.id)}if(r(e)){if(t(i))throw new Xt("too many arguments");var p=e;if(!t(n))throw new Xt("record values required");for(var g=n,u=[],c=0,f=p.length;c<f;c++){h=p[c].s,-1==Qa(u,h)&&u.push(h);var d=xr(this.b,h);if(!d)throw new Xt('store "'+h+'" not found.');d.keyPath&&cr(d,g[c],p[c].id)}for(Jt(this.logger,"putByKeys: to "+yr(u)+" "+g.length+" objects"),c=0;c<g.length;c++)pr(d,g[c]);a=this.a.request("put:keys",u,tu),gr(d,a,arguments),Ge(a,function(){An(s).Gb(a,g,p)},this)}else{if(!o(e)&&!l(e))throw new Xt("the first argument of put must be store name, store schema or array of keys.");var d=In(this,e),v=d.getName();if(d.keyPath&&t(i))throw new Xt("key must not be provided while the store uses in-line key.");if(!d.keyPath&&!d.b&&!t(i))throw new Xt("out-of-line key must be provided for store: "+v);if(r(n)){var y=n,b=i;for(Jt(this.logger,"putObjects: "+v+" "+y.length+" objects"),c=0;c<y.length;c++)pr(d,y[c]);a=this.a.request("put:array",[v],tu),gr(d,a,arguments),Ge(a,function(){An(this).P(a,!0,!1,v,y,b)},this),d.aa&&a.H(function(t){t=new Vn(fu,this.l(),v,t,y),this.l().J(t)},this)}else{if(!l(n))throw new Xt("put record value must be Object or array of Objects");var m=n,_=i;if(Jt(this.logger,"putObject: "+v+" "+(t(_)?_:"(without-key)")),t(Ia.Blob)&&m instanceof Blob&&d.sa&&!d.keyPath&&0==d.a.length&&Ts)a=new He("put"),u=new FileReader,u.onload=function(t){var e=t.target.result,n=s.a.request("put",[v],tu);gr(d,n,[v,m,_]),Ge(n,function(){An(s).P(n,!0,!0,v,[e],[_])},this),it(n,function(t){a.callback(t)},function(t){a.o(t)})},u.onerror=function(t){a.o(t)},u.onabort=function(t){a.o(t)},u.readAsDataURL(m);else{pr(d,m),a=this.a.request("put",[v],tu);var w=[v,m,_];gr(d,a,w),Ge(a,function(){var e=t(_)?[w[2]]:void 0;An(s).P(a,!0,!0,v,[w[1]],e)},this)}d.aa&&a.H(function(t){t=new Hn(fu,this.l(),v,t,m),this.l().J(t)},this)}}return a},Aa.kb=function(e,n,r){var i,o=In(this,e),a=o.getName();if(o.keyPath&&t(r))throw new Xt("key must not be provided while the store uses in-line key.");if(!o.keyPath&&!o.b&&!t(r))throw new Xt("out-of-line key must be provided for store: "+a);var s=n,u=r;Jt(this.logger,"putObjects: "+a+" "+s.length+" objects");for(var l=0;l<s.length;l++)pr(o,s[l]);return i=this.a.request("put:array",[a],tu),gr(o,i,arguments),Ge(i,function(){An(this).P(i,!0,!1,a,s,u)},this),o.aa&&i.H(function(t){t=new Vn(fu,this.l(),a,t,s),this.l().J(t)},this),i},Aa.clear=function(e,n,i){if(t(i))throw new Xt("too many input arguments");var a;if(o(e)){if(i=xr(this.b,e),!i)throw new Xt('store name "'+e+'" not found.');if(l(n)){var s=pe(n);if(null===s)throw new Xt("clear method requires a valid non-null KeyRange object.");Jt(this.logger,"clearByKeyRange: "+e+":"+yr(s)),a=this.a.request("clear",[e],tu),gr(i,a,[e,s]),Ge(a,function(){An(this).vb(a,e,s)},this)}else{if(t(n))throw new Xt("clear method requires a valid KeyRange object as second argument, but found "+n+" of type "+typeof n);Jt(this.logger,"clearByStore: "+e),a=this.a.request("clear",[e],tu),Ge(a,function(){An(this).Wa(a,[e])},this)}}else{if(!(!t(e)||r(e)&&o(e[0])))throw new Xt('first argument "'+e+'" is invalid.');var u=e||kr(this.b);Jt(this.logger,"clearByStores: "+yr(u)),a=this.a.request("clear",u,tu),Ge(a,function(){An(this).Wa(a,u)},this)}return a},Aa.sb=function(e,a,u){var c;if(o(e)){var f=xr(this.b,e);if(!f)throw new Xt('store name "'+e+'" not found.');if(t(u)){if(!o(a))throw new Xt('index name "'+a+'" must be a string, but '+typeof a+" found.");var h=rr(f,a);if(!h)throw new Xt("index: "+a+" not found in "+e);if(!l(u)&&null!==u)throw new Xt("key range "+u+' is invalid type "'+typeof u+'".');var p=pe(u);Jt(this.logger,"removeByIndexKeyRange: "+e+":"+h.getName()+" "+e),c=this.a.request("rm:iter:index",[e],tu),Ge(c,function(){An(this).Hb(c,e,h.getName(),p)},this)}else if(o(a)||s(a)||i(a)||a instanceof Date){Jt(this.logger,"removeById: "+e+":"+a),c=this.a.request("rm",[e],tu);var g=[e,a];gr(f,c,g),Ge(c,function(){An(this).lb(c,e,g[1])},this),f.aa&&c.H(function(t){t=1==t?a:void 0,t=new Hn(cu,this.l(),e,t,(void 0)),this.l().J(t)},this)}else{if(!l(a))throw new Xt('Invalid key or key range "'+a+'" of type '+typeof a);p=pe(a),Jt(this.logger,"removeByKeyRange: "+e+":"+yr(p)),c=this.a.request("rm:iter",[e],tu),gr(f,c,[e,p]),Ge(c,function(){An(this).mb(c,e,p)},this),f.aa&&c.H(function(t){var n=[];n.length=t,t=new Vn(cu,this.l(),e,n,(void 0)),this.l().J(t)},this)}}else if(e instanceof yn){var d=e.s,f=xr(this.b,d);c=this.a.request("rm",[d],tu);var v=[d,e.id];gr(f,c,v),Ge(c,function(){An(this).lb(c,d,v[1])},this)}else{if(!r(e))throw new Xt('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+vr(e)+'" ('+n(e)+") found.");u=[];for(var f=0,y=e.length;f<y;f++){if(!(e[f]instanceof yn))throw new Xt("key list element at "+f+" of "+y+' must be yn.db.Key, but "'+vr(e[f])+'" ('+n(e[f])+") is not ydn.db.Key.");var b=e[f].s;-1==Qa(u,b)&&u.push(b)}if(1>u.length)throw new Xt('at least one valid key required in key list "'+vr(e)+'"');c=this.a.request("rm:keys",u,tu),Ge(c,function(){An(this).Ib(c,e)},this)}return c},Aa.toString=function(){return"DbOperator:"+this.l().getName()},d(Pn,Rn),Aa=Pn.prototype,Aa.logger=Wt("ydn.db.core.DbOperator"),Aa.get=function(e,n){if(e instanceof De){var r=e.b,i=xr(this.b,r);if(!i)throw new Xt('store "'+r+'" not found.');var o=e.c;if(t(o)&&!or(i,o))throw new Xt('index "'+o+'" not found in store "'+r+'".');Jt(this.logger,"getByIterator:"+e);var a=this.a.request("get:iter",[r]);return Ge(a,function(){qn(this,5,a,e,1)},this),a}return Pn.B.get.call(this,e,n)},Aa.Ka=function(e,n){var r=100;if(s(n)){if(r=n,1>r)throw new Xt("limit must be a positive value, but "+n)}else if(t(n))throw new Xt("limit must be a number,  but "+n);Jt(this.logger,"keysOf:"+e);var i=this.a.request("keys:iter",[e.b]);return Ge(i,function(){e.u?qn(this,1,i,e,r):qn(this,2,i,e,r)},this),i},Aa.keys=function(t,e,n,r,i,o,a){return t instanceof De?this.Ka(t,e):Pn.B.keys.call(this,t,e,n,r,i,o,a)},Aa.Ga=function(t){Jt(this.logger,"countIterator:"+t);var e=this.a.request("count",[t.b]);return Ge(e,function(){qn(this,6,e,t)},this),e},Aa.count=function(e,n,r,i){if(e instanceof De){if(t(n)||t(r))throw new Xt("too many arguments.");return this.Ga(e)}return Pn.B.count.call(this,e,n,r,i)},Aa.Na=function(e,n){var r;if(s(n)){if(r=n,1>r)throw new Xt("limit must be a positive value, but "+r)}else if(t(n))throw new Xt("limit must be a number, but "+n);Jt(this.logger,"listByIterator:"+e);var i=this.a.request("values:iter",[e.b]);return Ge(i,function(){e.f?qn(this,2,i,e,r):qn(this,4,i,e,r)},this),i},Aa.values=function(t,e,n,r,i,o){return t instanceof De?this.Na(t,e):Pn.B.values.call(this,t,e,n,r,i,o)},Aa.Nb=function(e,n,i){if(!r(n))throw new Xt("iterators argument must be an array, but "+n+" of type "+typeof n+" found");for(var o=0;o<n.length;o++)if(!(n[o]instanceof De))throw new Xt("Iterator at "+o+" must be cursor range iterator.");i=i||Zs;for(var a=[],o=0;o<n.length;o++)for(var s=n[o].stores(),u=0;u<s.length;u++)0<=Qa(a,s[u])||a.push(s[u]);Jt(this.logger,this+": scan for "+n.length+" iterators on "+a);var c=this,o=this.a.request("scan",a);return this.a.Da(o,function(i,o,a){function s(){for(var t=0,e=0;e<n.length;e++){var r=n[e],a=[An(c).b(i,o,r.b)],r=r.load(a);r.Y=u,r.G=p(f,t),m[e]=r,v[t]=e,t++}g=n.length}function u(t){for(var e=0;e<m.length;e++)Pe(m[e]);N(m),Jt(c.logger,h+" error"),a(t,!0)}function f(i,o){if(d)throw new Ar;_++;var s=_===g,u=v[i],f=n[u],p=m[u],u=p.T(),p=p.Ca();if(y[i]=o,b[i]=f.u?f.f?u:p:f.f?o:p,s){var w;if(w=e instanceof on?e.c(y,b):e(y,b),s=[],f=[],u=[],p=[],r(w))for(var k=0;k<w.length;k++)!0===w[k]?u[k]=1:!1===w[k]?p[k]=!0:f[k]=w[k];else if(null===w)s=[];else if(t(w)){if(!l(w))throw new ee("scan callback output");s=["advance","continue","continuePrimary","restart"];for(k in w)if(!(0<=Qa(s,k)))throw new ee('Unknown attribute "'+k+'" in cursor advancement object');s=w.continuePrimary||[],f=w["continue"]||[],u=w.advance||[],p=w.restart||[]}else for(s=[],k=0;k<n.length;k++)t(v[k])&&(u[k]=1);for(k=_=w=0;k<n.length;k++)null!=s[k]||t(f[k])||null!=p[k]||null!=u[k]||_++;for(k=0;k<n.length;k++)if(null!=s[k]||t(f[k])||null!=p[k]||null!=u[k]){var x=v[k];if(!t(x))throw new Rr(k+" is not an iterator.");var x=n[x],E=m[k];if(null==y[k]){var S=k+"/"+n.length;if(null!=u[k])throw new Pr(E+" "+S+" must not advance "+u[k]+" steps");if(t(f[k]))throw new Pr(E+" "+S+" must not continue to key "+f[k]);if(null!=s[k])throw new Pr(E+" "+S+" must not continue to primary key "+s[k])}if(y[k]=void 0,b[k]=void 0,null!=p[k])Fe(E);else if(t(f[k]))E.ra(f[k]);else if(null!=s[k])E.Sa(s[k]);else{if(null==u[k])throw new Ar(x+": has no action");E.advance(1)}w++}if(0==w){for(w=0;w<m.length;w++)Pe(m[w]);d=!0,N(m),Jt(c.logger,"success "+h),a(void 0)}}}var h=o+" "+c+" scanning";Qt(c.logger,h);var g,d=!1,v=[],y=[],b=[],m=[],_=0;e instanceof on?e.h(i,n,function(){s()})||s():s()},a,i),o},Aa.open=function(t,e,n,r){if(!(e instanceof De))throw new Xt("Second argument must be cursor range iterator.");for(var i=e.stores(),o=0;o<i.length;o++)if(!xr(this.b,i[o]))throw new Xt('Store "'+i[o]+'" not found.');n=n||Zs;var a=this,s=this.a.request("open",e.stores(),n);return Jt(this.logger,"open:"+n+" "+e),Ge(s,function(n){var i=Qe(s);Jt(a.logger,i+" iterating "+e);for(var o=e.stores(),u=[],c=0;c<o.length;c++)u[c]=An(a).b(n,i,o[c]);var f=e.load(u);f.Y=function(t){Ke(s,t,!0)},f.G=function(e){null!=e?(e=t.call(r,f),!0===e?Fe(f):l(e)?!0===e.restart?Fe(f,e["continue"],e.continuePrimary):null!=e["continue"]?f.ra(e["continue"]):null!=e.continuePrimary?f.Sa(e.continuePrimary):(Pe(f),Ke(s,void 0)):null===e?(Pe(f),Ke(s,void 0)):null!=e?f.ra(e):f.advance(1)):(Pe(f),Ke(s,void 0))}},this),s},Dn.prototype.preventDefault=function(){this.ec=!1};var lu="created",cu="deleted",fu="updated";d(Bn,Dn),Bn.prototype.a=function(){return this.s},d(Ln,Bn),Aa=Ln.prototype,Aa.name="ReadyEvent",Aa.version=NaN,Aa.ic=NaN,Aa.bc=null,Aa.Nc=function(){return this.version},Aa.oc=function(){return this.ic},Aa.nc=function(){return this.bc},d(Mn,Bn),Mn.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")},Mn.prototype.name="ErrorEvent",Mn.prototype.error=null,Mn.prototype.c=function(){return this.error},d(Un,Mn),Un.prototype.name="FailEvent",d(Hn,Bn),Hn.prototype.name="RecordEvent",Hn.prototype.c=function(){return this.key},Hn.prototype.f=function(){return this.value},d(Vn,Bn),Vn.prototype.name="StoreEvent",Vn.prototype.na=function(){return this.keys},Vn.prototype.cb=function(){return this.values};var hu;hu=!1;var pu=$a;pu&&(-1!=pu.indexOf("Firefox")||-1!=pu.indexOf("Camino")||-1!=pu.indexOf("iPad")||-1!=pu.indexOf("iPhone")||-1!=pu.indexOf("iPod")||-1!=pu.indexOf("Chrome")||-1!=pu.indexOf("Android")||-1!=pu.indexOf("Safari")&&(hu=!0));var gu=hu,du="TEXT",vu=["BLOB","DATE","INTEGER","NUMERIC",du];Aa=Wn.prototype,Aa.getName=function(){return this.b},Aa.toJSON=function(){return{name:this.b,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}},Aa.clone=function(){var t=r(this.keyPath)?A(this.keyPath):this.keyPath;return new Wn(t,this.type,this.unique,this.multiEntry,this.b,this.g)},Aa.hint=function(e){if(!e)return this;var n=r(this.keyPath)?A(this.keyPath):this.keyPath,i=this.type;return t(e.type)||"TEXT"!=i||(i=void 0),new Wn(n,i,this.unique,this.multiEntry,e.b)},Aa.toString=function(){var t=this.multiEntry?"MultiEntry":"";return this.a&&1<this.a.length&&(t+="Compound"),t+"Index:"+this.b},Aa=Xn.prototype,Aa.aa=!1,Aa.sa=!1,Aa.toJSON=function(){for(var t=[],e=0;e<this.a.length;e++)t.push(this.a[e].toJSON());return{name:this.c,keyPath:this.keyPath,autoIncrement:this.b,type:this.type,indexes:t}},Aa.clone=function(){return Yn(this.toJSON())},Aa.index=function(t){return this.a[t]||null},Aa.getName=function(){return this.c},Aa.toString=function(){return"Store:"+this.c+"["+this.a.length+"index]"},mr.prototype.getName=function(){return this.name},mr.prototype.count=function(){return this.a.length},mr.prototype.index=function(t){return this.a[t]},wr.prototype.toJSON=function(){var e=Xa(this.stores,function(t){return t.toJSON()}),n={};return n.stores=e,t(this.version)&&(n.version=this.version),n},wr.prototype.b=!1,wr.prototype.a=function(){return!1},wr.prototype.count=function(){return this.stores.length},d(jr,wr),jr.prototype.a=function(){return!0},d(Cr,Error),d(Cr,Error),Nr.prototype.name="ydn.error.NotSupportedException",d(Tr,Error),d(Ar,Error),Ar.prototype.name="ydn.InternalError",d(Ir,Error),Ir.prototype.name="ydn.error.ConstraintError",d(Cr,Error),d(Pr,Error),Dr.prototype.logger=Wt("ydn.db.con.Storage"),Dr.prototype.N=function(e){if(t(e)){var n=function(t){e(t.toJSON()),e=void 0};if(this.b)this.b.S(n);else{var r=this;this.transaction(function(t){r.b.S(n,t)},null,Zs)}}return this.a?this.a.toJSON():null},Dr.prototype.C=function(t){if(this.b)throw new ee("Already connected with "+this.i);this.i=t,Br(this)},Dr.prototype.getName=function(){return this.i};var yu="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");Aa=Dr.prototype,Aa.xb=function(){return null},Aa.Ba=function(){if(this.b)return this.b.Aa()},Aa.ib=function(t,e){this.g.ia().Rb(t,e)},Aa.close=function(){this.b&&(this.b.close(),this.b=null,Qt(this.logger,this+" closed"))},Aa.Kc=function(){return this.b?this.b.Mb():null},Aa.Zb=NaN,Aa.hb=!1,Aa.transaction=function(e,n,r,a){var s=n;if(o(n))s=[n];else if(null!=n){if(!i(n))throw new Xt("store names must be an array");if(0==n.length)throw new Xt("number of store names must more than 0");for(var l=0;l<n.length;l++)if(!o(n[l]))throw new Xt("store name at "+l+" must be string but found "+typeof n[l])}else s=null;if(this.b&&this.b.pb()&&!this.hb){var c=this,f=t(r)?r:Zs;f==eu&&(this.hb=!0),this.b.$a(function(t){e(t),e=null},s,f,function(t,e){u(a)&&(a(t,e),a=void 0),f==eu&&(c.hb=!1),Ur(c)})}else Hr(this,e,s,r,a)},Aa.J=function(){},Aa.toString=function(){return"Storage:"+this.b},Vr.prototype.f=null,Vr.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.g+" mode:"+this.b+" scopes:"+yr(this.a)},d(zr,xn),Aa=zr.prototype,Aa.logger=Wt("ydn.db.tr.Parallel"),Aa.abort=function(){Jt(this.logger,this+": aborting"),En(this.c)},Aa.jc=function(t,e){var n;if("multi"==this.g)t:if(n=this.b,!n.a||!n.b||e!=n.b&&(n.b!=tu||e!=Zs)||t.length>n.a.length)n=!1;else{for(var r=0;r<t.length;r++)if(-1==n.a.indexOf(t[r])){n=!1;break t}n=!0}else if("repeat"==this.g)t:if(n=this.b,n.a&&n.b&&e==n.b&&n.a.length==t.length){for(r=0;r<t.length;r++)if(-1==n.a.indexOf(t[r])){n=!1;break t}n=!0}else n=!1;else n="all"==this.g;return n},Aa.pa=function(e,n,r,i){function o(t){c.f++,u=new Vr(t,c.f,n,l),s=c.I(),Gt(c.logger,s+" BEGIN "+yr(n)+" "+l),c.b=u,Wr(c.b,e,i)}function a(t,e){if(Gt(c.logger,s+" "+t),u){for(var n=u,r=0;r<n.c.length;r++)n.c[r](t,e);n.c.length=0,n.f=null,n.a=null,n.c=null}c.a=0}var s;this.G&&(n=this.G),this.C&&(r=this.C);var u,l=t(r)?r:Zs,c=this;if(this.b&&this.b.f&&this.jc(n,l))Wr(this.b,e,i);else{if(this.j&&this.f>=this.j)throw new ee("Exceed maximum number of transactions of "+this.j);this.l().transaction(o,n,l,a)}},Aa.request=function(t,e,n,r){var i=new He(t),o=this;return this.pa(function(t){o.a++,Ve(i,t,o.I()+"R"+o.a)},e,n||Zs,function(t,e){ze(i),r&&r(t,e)}),i},Aa.Da=function(t,e,n,r,i){var o,a=this;this.pa(function(n){a.a++,o=a.I()+"R"+a.a,Jt(a.logger,o+" BEGIN"),e(n,o,function(e,r){a.c=n,o=a.I()+"R"+a.a,r?(Jt(a.logger,o+" ERROR"),t.o(e)):(Jt(a.logger,o+" SUCCESS"),t.callback(e)),a.c=null}),e=null,Jt(a.logger,o+" END")},n,r,i)},Aa.toString=function(){return"Parallel:"+this.g+":"+this.I()+(this.c?"*":"")},d(Kr,zr),Aa=Kr.prototype,Aa.logger=Wt("ydn.db.tr.AtomicParallel"),Aa.jc=function(){return!1},Aa.request=function(t,e,n){var r,i,o,a=this,s=Kr.B.request.call(this,t,e,n,function(t,e){if(ze(s),Jt(a.logger,"transaction "+t),r)"complete"!=t&&(o=!0,i=e),r(i,o);else{var n=new vn;Ke(s,n,!0)}});return $e(s,function(t,e,n){o=e,i=t,r=n}),s},Aa.Da=function(t,e,n,r,i){var o,a,s=new et;it(s,function(t){a=!1,o=t},function(t){a=!0,o=t}),Kr.B.Da.call(this,s,e,n,r,function(e,n){if("complete"!=e)t.o(n);else if(!0===a)t.o(o);else if(!1===a)t.callback(o);else{var r=new vn;t.o(r)}i&&(i(e,n),i=void 0)})},Aa.toString=function(){return"Atomic"+Kr.B.toString.call(this)},d($r,Dr),Aa=$r.prototype,Aa.wa=0,Aa.kc=function(t,e,n,r,i,o){t=t||uu;var a;return"readonly"==r?a=Zs:"readwrite"==r&&(a=tu),t=Gr(this,t,e,n,a,i),this.va(t,o?null:this.m)},Aa.va=function(t){return new Tn(this,this.a,t)},Aa.tc=function(t,e,n){if(3<arguments.length)throw new Xt("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.wa++;var r=e||kr(this.a),i=Zs;if(n)if("readwrite"==n)i=tu;else if("readonly"!=n)throw new Xt('Invalid transaction mode "'+n+'"');var o=Gr(this,"all",!1,r,i,1),a=this.va(o,this.m),s=new He("run"),u=this;return o.pa(function(e){Qt(u.logger,"executing run in transaction on "+o),Ve(s,e,o.I()+"R0"),t(a)},r,i,function(t){ze(s),Ke(s,o.f,"complete"!==t)}),s},Aa.Pc=function(){return this.c?this.c.a.f:NaN},d(Qr,$r),Aa=Qr.prototype,Aa.va=function(t){return new Rn(this,this.a,t)},Aa.add=function(t,e,n){return this.c.add(t,e,n)},Aa.Ta=function(t,e,n){return this.c.Ta(t,e,n)},Aa.count=function(t,e,n,r){return this.c.count(t,e,n,r)},Aa.get=function(t,e){return this.c.get(t,e)},Aa.keys=function(t,e,n,r,i,o,a){return this.c.keys(t,e,n,r,i,o,a)},Aa.Ja=function(t,e,n,r,i,o,a){return this.c.Ja(t,e,n,r,i,o,a)},Aa.values=function(t,e,n,r,i,o){return this.c.values(t,e,n,r,i,o)},Aa.Ma=function(t,e,n,r,i,o){return this.c.Ma(t,e,n,r,i,o)},Aa.put=function(t,e,n){return this.c.put(t,e,n)},Aa.kb=function(t,e,n){return this.c.kb(t,e,n)},Aa.clear=function(t,e,n){return this.c.clear(t,e,n)},Aa.sb=function(t,e,n){return this.c.sb(t,e,n)},Aa.toString=function(){var t="Storage:"+this.getName();return Mr(this)&&(t+=" ["+this.Ba()+"]"),t},d(Jr,Qr),Aa=Jr.prototype,Aa.va=function(t){return new Pn(this,this.a,t)},Aa.open=function(t,e,n,r){return this.c.open(t,e,n,r)},Aa.Ga=function(t){return this.c.Ga(t)},Aa.Na=function(t,e){return this.c.Na(t,e)},Aa.Ka=function(t,e){return this.c.Ka(t,e)},Aa.Lc=function(t,e){return this.c.Nb(t,e)},d(Xr,Ae),Aa=Xr.prototype,Aa.logger=Wt("ydn.db.core.req.IDBCursor"),Aa.Za=function(t){(t=t.target.result)?this.W(t.key,t.primaryKey,t.value):this.W()},Aa.openCursor=function(e,n){function r(t,e,n){g.h=p,g.h.onsuccess=h(g.Za,g),g.W(t,g.g?e:void 0,n),p=null}var i=this+" opening ";null!=e&&(i+="{"+e,i=null!=n?i+(";"+n+"}"):i+"}"),Qt(this.logger,i);var a=this.w,i=this.f.objectStore(this.s),s=o(this.O)?i.index(this.O):null;if(t(e))var u=!s||!t(n),l=a?a.lower:void 0,c=a?a.upper:void 0,f=!!a&&!!a.lowerOpen,a=!!a&&!!a.upperOpen,a=ae(this.reverse?new oe(l,e,f,u):new oe(e,c,u,a));var p;p=this.Ia?s?null!=this.Z?s.openKeyCursor(a,this.Z):null!=a?s.openKeyCursor(a):s.openKeyCursor():null!=this.Z?i.openCursor(a,this.Z):null!=a?i.openCursor(a):i.openCursor():s?null!=this.Z?s.openCursor(a,this.Z):null!=a?s.openCursor(a):s.openCursor():null!=this.Z?i.openCursor(a,this.Z):null!=a?i.openCursor(a):i.openCursor();var g=this;p.onerror=function(t){var e=p.error;t.preventDefault(),Ie(g,e)},null!=e?p.onsuccess=function(t){if(t=t.target.result){var i=nu.cmp(t.key,e),o=g.reverse?-1:1;i==o?r(t.key,t.primaryKey,t.value):i==-o?t["continue"](e):null!=n&&nu.cmp(t.primaryKey,n)==o?r(t.key,t.primaryKey,t.value):t["continue"]()}else r()}:(g.h=p,g.h.onsuccess=h(g.Za,g))},Aa.fb=function(){return!!this.h},Aa.update=function(t){var e=this.h.result;if(e){var n=new et;return t=e.update(t),t.onsuccess=function(t){n.callback(t.target.result)},t.onerror=function(t){t.preventDefault(),n.o(t)},n}throw new fn("cursor gone")},Aa.clear=function(){var t=this.h.result;if(t){var e=new et,t=t["delete"]();return t.onsuccess=function(){e.callback(1)},t.onerror=function(t){t.preventDefault(),e.o(t)},e}throw new fn("cursor gone")},Aa.advance=function(t){var e=this.h.result;1==t?e["continue"]():e.advance(t)},Aa.Sa=function(t){var e=this.h.result,n=nu.cmp(t,e.primaryKey);if(n!=(this.reverse?-1:1))throw new ne('continuing primary key "'+t+'" must '+(this.reverse?"lower":"higher")+' than current primary key "'+e.primaryKey+'"');var r=this;this.h.onsuccess=function(i){(e=i.target.result)?(n=nu.cmp(e.primaryKey,t),0==n||1==n&&!r.reverse||-1==n&&r.reverse?(r.h.onsuccess=h(r.Za,r),r.W(e.key,r.g?e.primaryKey:void 0,e.value)):e["continue"]()):(r.h.onsuccess=h(r.Za,r),r.W())},e["continue"]()},Aa.ra=function(t){var e=this.h.result;null!=t?e["continue"](t):e["continue"]()},Aa.fa=function(){Xr.B.fa.call(this),this.h=null},Aa.toString=function(){return"IDB"+Xr.B.toString.call(this)},d(Yr,_n),Aa=Yr.prototype,Aa.logger=Wt("ydn.db.crud.req.IndexedDb"),Aa.Ya=function(t,e){function n(i){var o=t.a.objectStore(e[i]).count();o.onsuccess=function(o){r[i]=o.target.result,i++,i==e.length?Ke(t,r):n(i)},o.onerror=function(e){e.preventDefault(),Ke(t,o.error,!0)}}var r=[];0==e.length?Ke(t,[]):n(0)},Aa.P=function(t,e,n,r,i,o){function a(p){if(null==i[p])if(Qt(c.logger,"empty object at "+p+" of "+i.length),u++,u==i.length)Ke(t,s,l);else{var g=p+10;g<i.length&&a(g)}var d,g=i[p];d=o&&null!=o[p]?e?h.put(g,o[p]):h.add(g,o[p]):e?h.put(g):h.add(g),d.onsuccess=function(e){u++,s[p]=e.target.result,u==i.length?Ke(t,n?s[0]:s,l):(e=p+10,e<i.length&&a(e))},d.onerror=function(e){u++;var o=d.error;Qt(c.logger,Qe(t)+f+' request to "'+r+'" cause '+o.name+' for object "'+vr(i[p])+'" at index '+p+" of "+i.length+" objects."),s[p]=o,l=!0,e.preventDefault(),u==i.length?Ke(t,n?s[0]:s,l):(e=p+10,e<i.length&&a(e))}}var s=[],u=0,l=!1,c=this,f=e?"put":"add",h=t.a.objectStore(r);if(Qt(this.logger,Qe(t)+" "+f+" "+i.length+' objects to store "'+r+'"'),0<i.length)for(var p=0;10>p&&p<i.length;p++)a(p);else Ke(t,[])},Aa.Gb=function(t,e,n){function r(u){var l,c=n[u],f=c.s,h=t.a.objectStore(f);l=null===h.keyPath?h.put(e[u],c.id):h.put(e[u]),l.onsuccess=function(n){o++,i[u]=n.target.result,o==e.length?Ke(t,i,a):(n=u+10,n<e.length&&r(n))},l.onerror=function(n){o++,$t(s.logger,"request result "+n.name+' error when put keys to "'+f+'" for object "'+vr(e[u])+'" at index '+u+" of "+e.length+" objects."),i[u]=l.error,a=!0,n.preventDefault(),o==e.length?Ke(t,i,a):(n=u+10,n<e.length&&r(n))}}var i=[],o=0,a=!1,s=this;if(Qt(this.logger,Qe(t)+" putByKeys: of "+e.length+" objects"),0<e.length)for(var u=0;10>u&&u<e.length;u++)r(u);else Ke(t,i,a)},Aa.lb=function(t,e,n){var r=t.a.objectStore(e);Qt(this.logger,Qe(t)+" clearById: "+e+" "+n);var i=r.openCursor(Js.only(n));i.onsuccess=function(e){if(e=e.target.result){var n=e["delete"]();n.onsuccess=function(){Ke(t,1)},n.onerror=function(){Ke(t,n.error,!0)}}else Ke(t,0)},i.onerror=function(e){e.preventDefault(),Ke(t,i.error,!0)}},Aa.Ib=function(t,e){function n(s){if(s++,s>=e.length)0<a.length?Ke(t,a,!0):Ke(t,o);else{e[s].s!=r&&(r=e[s].s,i=t.a.objectStore(r));var u=i["delete"](e[s].id);u.onsuccess=function(){o++,n(s)},u.onerror=function(t){t.preventDefault(),a[s]=u.error,n(s)}}}var r,i,o=0;Qt(this.logger,Qe(t)+" removeByKeys: "+e.length+" keys");var a=[];n(-1)},Aa.mb=function(t,e,n){var r=t.a.objectStore(e),i=r.count(n);Qt(this.logger,Qe(t)+" clearByKeyRange: "+e+" "+n),i.onsuccess=function(e){var i=e.target.result,o=r["delete"](n);o.onsuccess=function(){Ke(t,i)},o.onerror=function(){Ke(t,o.error,!0)}},i.onerror=function(e){e.preventDefault(),Ke(t,i.error,!0)}},Aa.vb=function(t,e,n){var r=t.a.objectStore(e);Qt(this.logger,Qe(t)+" "+e+" "+n);var i=r["delete"](n);i.onsuccess=function(){Ke(t,void 0)},i.onerror=function(e){e.preventDefault(),Ke(t,i.error,!0)}},Aa.Hb=function(t,e,n,r){var i=t.a.objectStore(e).index(n);Qt(this.logger,Qe(t)+" clearByIndexKeyRange: "+e+":"+n+" "+r);var o=[],a=i.openCursor(r),s=0;a.onsuccess=function(e){var n=e.target.result;if(n){var r=n["delete"]();r.onsuccess=function(){s++,n["continue"]()},r.onerror=function(t){o.push(r.error),t.preventDefault(),n["continue"]()}}else 0<o.length?Ke(t,o,!0):Ke(t,s)},a.onerror=function(e){e.preventDefault(),Ke(t,a.error,!0)}},Aa.Wa=function(t,e){var n=e.length,r=0;Qt(this.logger,Qe(t)+" clearByStores: "+e);for(var i=0;i<n;i++){var o=t.a.objectStore(e[i]).clear();o.onsuccess=function(){r++,r==n&&Ke(t,r)},o.onerror=function(e){r++,e.preventDefault(),r==n&&Ke(t,o.error,!0)}}},Aa.bb=function(t,e,n){var r=this;Qt(this.logger,Qe(t)+e+":"+n);var i=t.a.objectStore(e),a=i.get(n);a.onsuccess=function(e){Qt(r.logger,Qe(t)+" record "+n+(null!=e.target.result?" ":" not ")+" exists.");var a=e.target.result;if(!i.keyPath&&0==i.indexNames.length&&Ts&&o(a)&&0<=a.indexOf(";base64,")){'"'==a.charAt(0)&&'"'==a.charAt(a.length-1)&&(a=a.substr(1,a.length-2)),a=a.split(";base64,"),e=a[0].split(":")[1];for(var a=window.atob(a[1]),s=a.length,u=new Uint8Array(s),l=0;l<s;++l)u[l]=a.charCodeAt(l);Ke(t,new Blob([u.buffer],{type:e}))}else Ke(t,e.target.result)},a.onerror=function(e){e.preventDefault(),Ke(t,a.error,!0)}},Aa.Eb=function(t,e,n){function r(e){if(null==n[e])if(o++,i[e]=void 0,o==s)Ke(t,i);else{var u=e+10;u<s&&r(u)}var l;l=a.get(n[e]),l.onsuccess=function(n){o++,i[e]=n.target.result,o==s?Ke(t,i):(n=e+10,n<s&&r(n))},l.onerror=function(e){o++,e.preventDefault(),Ke(t,l.error,!0)}}var i=[];i.length=n.length;var o=0,a=t.a.objectStore(e),s=n.length;if(Qt(this.logger,Qe(t)+" "+e+":"+s+" ids"),0<s)for(e=0;10>e&&e<s;e++)r(e);else Ke(t,[])},Aa.Fb=function(t,e){function n(o){var a=e[o],s=t.a.objectStore(a.s).get(a.id);s.onsuccess=function(a){i++,r[o]=a.target.result,i==e.length?Ke(t,r):(a=o+10,a<e.length&&n(a))},s.onerror=function(e){i++,e.preventDefault(),Ke(t,s.error,!0)}}var r=[];r.length=e.length;var i=0;if(Qt(this.logger,Qe(t)+" "+e.length+" ids"),0<e.length)for(var o=0;10>o&&o<e.length;o++)n(o);else Ke(t,[])},Aa.Fa=function(t,e,n,r,i){if(r&&i)throw new ee("unique count not available in IndexedDB");i=t.a.objectStore(e),e=Qe(t)+" "+e+(r?":"+r:"")+(n?":"+yr(n):""),Qt(this.logger,e);var o;null!=r?(r=i.index(r),o=null!=n?r.count(n):r.count()):o=null!=n?i.count(n):i.count(),o.onsuccess=function(e){Ke(t,e.target.result)},o.onerror=function(e){e.preventDefault(),Ke(t,o.error,!0)}},Aa.$=function(e,n,r,i,o,a,s,u,l,c){var f=[],h=e.a.objectStore(r),p=u?l?"prevunique":"prev":l?"nextunique":"next";if(r=Qe(e)+" "+n+" "+r+(i?":"+i:"")+(o?yr(o):""),u&&(r+=" reverse"),l&&(r+=" unique"),c&&t(c[0])){l=!i||!t(c[1]);var g=c[0],d=o?o.lower:void 0,v=o?o.upper:void 0,y=!!o&&!!o.lowerOpen;o=!!o&&!!o.upperOpen,o=ae(u?new oe(d,g,y,l):new oe(g,v,l,o)),r+=" starting from "+yr(c[0]),t(c[1])&&(r+=", "+yr(c[1]))}Qt(this.logger,r);var b;b=1==n||2==n||3==n?i?h.index(i).openKeyCursor(o,p):h.openCursor(o,p):i?h.index(i).openCursor(o,p):h.openCursor(o,p);var m=!1;b.onsuccess=function(r){if(r=r.target.result){if(!m){if(0<s)return m=!0,void r.advance(s);if(c&&i&&t(c[0]))if(t(c[1])){
var o=nu.cmp(r.key,c[0]),l=u?-1:1;if(0==o){if(o=nu.cmp(r.primaryKey,c[1]),0==o)return m=!0,void r["continue"]();if(o!=l)return void r["continue"]();m=!0}else m=!0}else m=!0;else m=!0}1==n?f.push(r.key):2==n?f.push(r.primaryKey):3==n?(l={},i&&(l[i]=r.key),h.keyPath?l[h.keyPath]=r.primaryKey:l._ROWID_=r.primaryKey,f.push(l)):4==n?f.push(r.value):f.push([r.key,r.primaryKey,r.value]),f.length<a?r["continue"]():(c&&(c[0]=mn(r.key),c[1]=mn(r.primaryKey)),Ke(e,f))}else c&&(c[0]=void 0,c[1]=void 0),Ke(e,f)},b.onerror=function(t){t.preventDefault(),Ke(e,b.error,!0)}},d(Zr,Yr),Zr.prototype.logger=Wt("ydn.db.core.req.IndexedDb"),Zr.prototype.b=function(t,e,n,r){return n=xr(this.a,n),new Xr(t,e,n,r)},ti.prototype.a=!1,ti.prototype.state=function(){return this.a},d(ei,Ae),Aa=ei.prototype,Aa.logger=Wt("ydn.db.core.req.SimpleCursor"),Aa.fb=function(){return!!this.f},Aa.update=function(t){return Ci(this.nb,this.T(),t),st()},Aa.advance=function(t){function e(e){if(r++,!e||r>=t)return ri(n,e)}var n=this,r=this.h?-1:0;this.reverse?xi(this.la,e,this.h):ki(this.la,e,this.h)},Aa.ra=function(t){if(null!=t){var e=this,n=new oi(t),r=function(n){if(e.h=n,!n)return ri(e,n);var r=au(n.value.key,t);if(e.reverse){if(1!=r)return ri(e,n)}else if(-1!=r)return ri(e,n)};this.reverse?xi(this.la,r,n):ki(this.la,r,n)}else this.advance(1)},Aa.openCursor=function(t,e){var n=null;if(this.w)if(this.reverse){var r=this.g?"￿":void 0;null!=this.w.upper&&(n=new oi(this.w.upper,r))}else null!=this.w.lower&&(n=new oi(this.w.lower));null!=t&&(n=this.g?new oi(t,e):new oi(t)),this.i=this.f.l(function(e){function r(e){var r=e.value,i=r.key;if(e&&null!=i)if(null!=t){if(0==ai(n,r))return}else if(this.w&&(!this.reverse&&this.w.lowerOpen&&null!=this.w.lower&&(r=au(i,this.w.lower),0==r)||this.reverse&&this.w.upperOpen&&null!=this.w.upper&&(r=au(i,this.w.upper),0==r)))return;return ri(this,e)}this.nb=qi(e,this.s),this.la=Si(this.nb,this.O),this.reverse?xi(this.la,h(r,this),n):ki(this.la,h(r,this),n),ni(this)},this)},Aa.clear=function(){throw new te},Aa.Sa=function(){throw new te},Aa.toString=function(){return"Simple"+ei.B.toString.call(this)},oi.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.a?", "+this.a+")":")")},Aa=si.prototype,Aa.D=null,Aa.U=null,Aa.ca=null,Aa.ba=null,Aa.add=function(t){if(null==this.D)return this.ba=this.ca=this.D=new bi(t),!0;var e=null;return fi(this,function(n){var r=null,i=this.U(n.value,t);return 0<i?(r=n.left,null==n.left&&(e=new bi(t,n),n.left=e,n==this.ca&&(this.ca=e))):0>i&&(r=n.right,null==n.right&&(e=new bi(t,n),n.right=e,n==this.ba&&(this.ba=e))),r}),e&&(fi(this,function(t){return t.count++,t.parent},e.parent),hi(this,e.parent)),!!e},Aa.clear=function(){this.ba=this.ca=this.D=null},Aa.contains=function(t){var e=!1;return fi(this,function(n){var r=null,i=this.U(n.value,t);return 0<i?r=n.left:0>i?r=n.right:e=!0,r}),e},Aa.indexOf=function(t){var e=-1,n=0;return fi(this,function(r){var i=this.U(r.value,t);return 0<i?r.left:(r.left&&(n+=r.left.count),0>i?(n++,r.right):(e=n,null))}),e},Aa.zb=function(){return this.D?this.D.count:0},Aa.cb=function(){var t=[];return ci(this,function(e){t.push(e)}),t},bi.prototype.left=null,bi.prototype.right=null,bi.prototype.height=1,d(wi,si),Ei.prototype.clear=function(){Oi(this),Ii(this)},Ei.prototype.getName=function(){return this.b.getName()},Ei.prototype.na=function(t,e,n,r,i){return Ri(this,2,t,e,n,r,i)},Ei.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.g+":"+this.b.getName()},Aa=Pi.prototype,Aa.wb=function(){return this},Aa.setItem=function(e,n){t(this.a[e])||(this.keys.push(e.toString()),this.length=this.keys.length),this.a[e]=n},Aa.getItem=function(e){return t(this.a[e])?this.a[e]:null},Aa.removeItem=function(t){delete this.a[t],T(this.keys,t.toString()),this.length=this.keys.length},Aa.length=0,Aa.key=function(e){return e=this.keys[e],t(e)?this.a[e]:null},Aa.clear=function(){this.a={},this.keys=[],this.length=0},Fi.prototype.S=function(t){var e=this;setTimeout(function(){var n=ii(e.f),n=e.c.getItem(n),n=new wr(n);t(n)},10)},Di.prototype.l=function(t,e){var n=this.b;setTimeout(function(){t.call(e,n)},4);var r=this;return function(){r.a("complete",null),r.a=null,r.b=null}},d(Bi,_n),Aa=Bi.prototype,Aa.logger=Wt("ydn.db.crud.req.SimpleStore"),Aa.Gb=function(t,e,n){this.P(t,!0,!1,null,e,n)},Aa.P=function(t,e,n,r,i,o){Qt(this.logger,Qe(t)+" "+(e?"put":"add")+"Object"+(n?"":"s "+i.length+" objects"));var a=t.a.l(function(s){var u;if(n)u=qi(s,r),s=o?o[0]:void 0,s=Ci(u,s,i[0],!e),null!=s?Ke(t,s):(u=vr(s),u=new sn(u),Ke(t,u,!0));else{for(var l=r,c=[],f=!1,h=o||{},p=0;p<i.length;p++){var g;r?g=h[p]:(l=o[p],g=l.id,l=l.s),u&&u.getName()==l||(u=qi(s,l)),g=Ci(u,g,i[p],!e),null!=g?c.push(g):(f=!0,c.push(new sn))}Ke(t,c,f)}a(),a=null},this)},Aa.bb=function(t,e,n){var r=t.a.l(function(i){i=Ti(qi(i,e),n),Ke(t,i),r(),r=null},this)},Aa.Eb=function(t,e,n){Li(this,t,e,n)},Aa.Fb=function(t,e){Li(this,t,null,e)},Aa.lb=function(t,e,n){var r=Qe(t)+" removeById "+e+" "+n;Qt(this.logger,r);var i=this,o=t.a.l(function(a){a=Ni(qi(a,e),n),Jt(i.logger,"success "+r+(0==a?" [not found]":"")),Ke(t,a),o(),o=null},this)},Aa.Ib=function(t,e){Qt(this.logger,Qe(t)+" removeByKeys "+e.length+" keys");var n,r=0,i=t.a.l(function(o){for(var a=0;a<e.length;a++){var s=e[a].s,u=e[a].id;n&&n.getName()==s||(n=qi(o,s)),r+=Ni(n,u)}Ke(t,r),i(),i=null},this)},Aa.vb=function(t,e,n){this.mb(t,e,n)},Aa.mb=function(t,e,n){var r=Qe(t)+" removeByKeyRange "+(n?yr(n):"");Qt(this.logger,r);var i=this,o=t.a.l(function(a){a=Ii(qi(a,e),n),Jt(i.logger,r+" deleted "+a+" records."),Ke(t,a),o(),o=null},this)},Aa.Hb=function(t,e,n,r){var i=Qe(t)+" removeByIndexKeyRange "+(r?yr(r):"");Qt(this.logger,i);var o=t.a.l(function(i){i=qi(i,e);for(var a=i.na(n,r),s=a.length,u=0;u<s;u++)Ni(i,a[u]);Ke(t,s),o(),o=null},this)},Aa.Wa=function(t,e){var n=Qe(t)+" clearByStores";Qt(this.logger,n);var r=t.a.l(function(i){for(var o=0;o<e.length;o++)qi(i,e[o]).clear();Jt(this.logger,"success "+n),Ke(t,e.length),r(),r=null},this)},Aa.Ya=function(t,e){var n=t.a.l(function(r){for(var i=[],o=0;o<e.length;o++){var a=qi(r,e[o]);i.push(Ai(a))}Ke(t,i),n(),n=null},this)},Aa.Fa=function(t,e,n,r){var i=Qe(t)+" count"+(null!=r?"Index":"")+(null!=n?"KeyRange":"Store");Qt(this.logger,i);var o=t.a.l(function(a){a=Ai(qi(a,e),r,n),Jt(this.logger,"success "+i),Ke(t,a),o(),o=null},this)},Aa.$=function(t,e,n,r,i,o,a,s,u,l){var c=Qe(t)+" "+n+" "+(i?vr(i):"");Qt(this.logger,c);var f=t.a.l(function(h){h=Ri(qi(h,n),e,r,i,s,o,a,u,l),Jt(this.logger,c+" "+h.length+" records found."),Ke(t,h),f(),f=null},this)},d(Mi,Bi),Mi.prototype.b=function(t,e,n,r){return n=xr(this.a,n),new ei(t,e,n,r)},d(Ui,Ae),Aa=Ui.prototype,Aa.logger=Wt("ydn.db.core.req.WebsqlCursor"),Aa.T=function(){return this.h},Aa.Ob=function(t,e,n,r,i){Ui.B.Ob.call(this,t,e,n,r,i),this.K=o(e)?rr(this.b,e):null},Aa.Ca=function(){return this.m},Aa.fb=function(){return!!this.f},Aa.update=function(t){if(!this.fb())throw new fn;var e=new et,n=this.T();t=fr(this.b,t,n);var r="REPLACE INTO "+ar(this.b)+" ("+t.Vb.join(", ")+") VALUES ("+t.fc.join(", ")+")";return Qt(this.logger,this+': update "'+r+'" : '+yr(t.values)),this.f.executeSql(r,t.values,function(){e.callback(n)},function(t,n){return e.o(n),!1}),e},Aa.advance=function(t){var e=this.i,n=this.h,r=!0;null==this.i||this.g&&null==this.h||(--t,r=!1),Wi(this,function(t,r,i){var o=null!=e&&null!=t&&0==au(e,t);if(this.g){var a=null!=r&&null!=n&&0==au(r,n);if(o&&a)throw new ne("current: "+e+";"+n+" next: "+t+";"+r)}else if(o)throw new ne("current: "+e+" next: "+t);this.W(t,r,i)},this.i,r,t,this.h)},Aa.ra=function(t){null!=t?Wi(this,this.W,t,!0):this.advance(1)},Aa.openCursor=function(t,e){Wi(this,this.W,t,!1,0,e)},Aa.clear=function(){if(!this.fb())throw new fn;var t=new et,e=this.b.g,e="DELETE FROM "+ar(this.b)+" WHERE "+e+" = ?",n=[this.T()];return Qt(this.logger,this+': clear "'+e+'" : '+yr(n)),this.f.executeSql(e,n,function(e,n){t.callback(n.rowsAffected)},function(e,n){return t.o(n),!1}),t},Aa.Sa=function(t){var e=au(t,this.h);if(0==e||1==e&&this.reverse||-1==e&&!this.reverse)throw new Pr(this+" to continuePrimaryKey  from "+this.h+" to "+t+" on "+this.Z+" direction is wrong");Vi(this,this.W,t)},Aa.toString=function(){return"WebSql"+Ui.B.toString.call(this)},d(zi,_n),Aa=zi.prototype,Aa.logger=Wt("ydn.db.crud.req.WebSql"),Aa.P=function(e,n,r,i,o,a){function s(n,i){if(null==o[n])if(Qt(c.logger,"empty object at "+n+" of "+o.length),h++,h==o.length)Jt(c.logger,p+" success "+p),Ke(e,f,g);else{var d=n+2;d<o.length&&s(d,i)}var v;v=t(a)?fr(u,o[n],a[n]):fr(u,o[n]),d=l+ar(u)+" ("+v.Vb.join(", ")+") VALUES ("+v.fc.join(", ")+");",Qt(c.logger,Qe(e)+" SQL: "+d+" PARAMS: "+v.values+" REQ: "+n+" of "+o.length),i.executeSql(d,v.values,function(a,p){function d(t,n){var r="ydn.db.me:"+u.getName()+":"+t.getName(),r=l+x(r)+" ("+u.f+", "+t.c+") VALUES (?, ?)",o=[$n(y,u.type),$n(n,t.type)];Qt(c.logger,Qe(e)+" multiEntry "+r+" "+o),i.executeSql(r,o,function(){},function(t,e){return $t(c.logger,"multiEntry index insert error: "+e.message),!1})}h++;var y=t(v.key)?v.key:p.insertId;1>p.rowsAffected&&(g=!0,y=new sn(y+" no-op"));for(var b=0,m=u.a.length;b<m;b++){var _=u.index(b);if(_.multiEntry)for(var w=be(o[n],_.keyPath),k=(w?w.length:0)||0,E=0;E<k;E++)d(_,w[E])}r?Ke(e,y):(f[n]=y,h==o.length?Ke(e,f,g):(b=n+2,b<o.length&&s(b,a)))},function(t,i){if(h++,g=!0,6==i.code?i.name="ConstraintError":$t(c.logger,"error: "+i.message+" "+p),r)Ke(e,i,!0);else if(f[n]=i,h==o.length)Qt(c.logger,"success "+p),Ke(e,f,g);else{var a=n+2;a<o.length&&s(a,t)}return!1})}n=!n;var u=xr(this.a,i),l=n?"INSERT INTO ":"INSERT OR REPLACE INTO ";i=e.a;var c=this,f=[],h=0,p=Qe(e)+" inserting "+o.length+" objects.",g=!1;if(0<o.length)for(n=0;2>n&&n<o.length;n++)s(n,i);else Jt(this.logger,"success"),Ke(e,[])},Aa.Gb=function(t,e,n){if(0==n.length)Ke(t,[]);else{for(var r=[],i=0,o=0,a=this,s=function(s,u){var l=[];Qt(a.logger,"put "+u.length+" objects to "+s);for(var c=ur(xr(a.a,s)),f=c?void 0:[],h=0;h<u.length;h++)l.push(e[u[h]]),c||f.push(n[u[h]].id);c=We(t),it(c,function(e){for(var n=0;n<u.length;n++)r[u[n]]=e[n];i++,i==o&&Ke(t,r)},function(){i++,i==o&&Ke(t,r,!0)}),a.P(c,!1,!1,s,l,f)},u="",l=[],c=[],f=0;f<n.length;f++){var h=n[f].s,p=n[f].id;h!=u?(o++,0<l.length&&s(u,l),l=[f],c=[p],u=h):(l.push(f),c.push(p))}0<l.length&&s(u,l)}},Aa.bb=function(t,e,n){var r=t.a,i=xr(this.a,e),o=this;e=i.f,n=[$n(n,i.type)],e="SELECT * FROM "+ar(i)+" WHERE "+e+" = ?";var a=Qe(t)+" SQL: "+e+" PARAMS: "+n;Qt(this.logger,a),r.executeSql(e,n,function(e,n){if(0<n.rows.length){var r=n.rows.item(0);null!=r?(r=Ki(r,i),Ke(t,r)):(Jt(o.logger,"success no result: "+a),Ke(t,void 0))}else Jt(o.logger,"success no result: "+a),Ke(t,void 0)},function(e,n){return $t(o.logger,"error: "+a+" "+n.message),Ke(t,n,!0),!1})},Aa.Eb=function(t,e,n){function r(e,i){var l=u.f,c=[$n(n[e],u.type)],f="SELECT * FROM "+ar(u)+" WHERE "+l+" = ?";Qt(o.logger,"SQL: "+f+" PARAMS: "+c),i.executeSql(f,c,function(i,o){if(s++,0<o.rows.length){var l=o.rows.item(0);null!=l&&(a[e]=Ki(l,u))}else a[e]=void 0;s==n.length?Ke(t,a):(l=e+10,l<n.length&&r(l,i))},function(i,u){if(s++,$t(o.logger,"error: "+f+" "+u.message),s==n.length)Ke(t,a);else{var l=e+10;l<n.length&&r(l,i)}return!1})}var i=t.a,o=this,a=[],s=0,u=xr(this.a,e);if(0<n.length)for(e=0;10>e&&e<n.length;e++)r(e,i);else Jt(o.logger,"success"),Ke(t,[])},Aa.Fb=function(t,e){function n(r,s){var u=e[r],l=xr(i.a,u.s),c=bn(u),u=l.f,c=[$n(c,l.type)],f="SELECT * FROM "+ar(l)+" WHERE "+u+" = ?";Qt(i.logger,"SQL: "+f+" PARAMS: "+c),s.executeSql(f,c,function(s,u){if(a++,0<u.rows.length){var c=u.rows.item(0);null!=c&&(o[r]=Ki(c,l))}else o[r]=void 0;a==e.length?(Qt(i.logger,"success "+f),Ke(t,o)):(c=r+10,c<e.length&&n(c,s))},function(e,n){return Ke(t,n,!0),!1})}var r=t.a,i=this,o=[],a=0;if(0<e.length)for(var s=0;10>s&&s<e.length;s++)n(s,r);else Qt(this.logger,"success"),Ke(t,[])},Aa.Wa=function(t,e){function n(r,o){function a(t){t="ydn.db.me:"+s.getName()+":"+t.getName(),t="DELETE FROM  "+x(t),Qt(i.logger,"SQL: "+t),o.executeSql(t,[])}var s=xr(i.a,e[r]),u="DELETE FROM  "+ar(s);Qt(i.logger,"SQL: "+u+" PARAMS: []"),o.executeSql(u,[],function(o){r==e.length-1?(Qt(i.logger,"success "+u),Ke(t,e.length)):n(r+1,o)},function(e,n){return Ke(t,n,!0),!1});for(var l=0,c=s.a.length;l<c;l++){var f=s.index(l);f.multiEntry&&a(f)}}var r=t.a,i=this;0<e.length?n(0,r):(Qt(this.logger,"success"),Ke(t,0))},Aa.Ib=function(t,e){function n(s){if(s>=e.length)Ke(t,o,a);else{var u=xr(i.a,e[s].s),l=$n(e[s].id,u.type),c=" WHERE "+u.f+" = ?",f="DELETE FROM "+ar(u)+c,h=Qe(t)+" SQL: "+f+" PARAMS: "+[l];r.executeSql(f,[l],function(){o++,n(s)},function(t,e){return $t(i.logger,"error: "+h+e.message),a=!0,n(s),!1}),s++;for(var f=function(e){e="ydn.db.me:"+u.getName()+":"+e.getName(),e="DELETE FROM  "+x(e)+c,Qt(i.logger,Qe(t)+NaN+e),r.executeSql(e,[l])},p=0,g=u.a.length;p<g;p++){var d=u.index(p);d.multiEntry&&f(d)}}}var r=t.a,i=this,o=0,a=!1;Qt(this.logger,Qe(t)+" removeByKeys: "+e.length+" keys"),n(0)},Aa.lb=function(t,e,n){function r(e){e="ydn.db.me:"+o.getName()+":"+e.getName(),e="DELETE FROM  "+x(e)+u,Qt(s.logger,Qe(t)+NaN+e),i.executeSql(e,[a])}var i=t.a,o=xr(this.a,e),a=$n(n,o.type),s=this,u=" WHERE "+o.f+" = ?";for(e="DELETE FROM "+ar(o)+u,Qt(this.logger,Qe(t)+" SQL: "+e+" PARAMS: "+[a]),i.executeSql(e,[a],function(e,n){Ke(t,n.rowsAffected)},function(e,n){return Ke(t,n,!0),!1}),e=0,n=o.a.length;e<n;e++){var l=o.index(e);l.multiEntry&&r(l)}},Aa.vb=function(t,e,n){$i(this,t,e,void 0,n)},Aa.mb=function(t,e,n){$i(this,t,e,void 0,n)},Aa.Hb=function(t,e,n,r){$i(this,t,e,n,r)},Aa.Ya=function(t,e){function n(a){var s="SELECT COUNT(*) FROM "+x(e[a]);Qt(i.logger,"SQL: "+s+" PARAMS: []"),r.executeSql(s,[],function(r,i){var s=i.rows.item(0);o[a]=parseInt(s["COUNT(*)"],10),a++,a==e.length?Ke(t,o):n(a)},function(e,n){return Ke(t,n,!0),!1})}var r=t.a,i=this,o=[];0==e.length?(Qt(this.logger,"success"),Ke(t,0)):n(0)},Aa.Fa=function(t,e,n,r,i){var o=[];e=Zn(xr(this.a,e),o,6,r,n,!1,i),Qt(this.logger,Qe(t)+" SQL: "+e+" PARAMS: "+o),t.a.executeSql(e,o,function(e,n){var r=n.rows.item(0);Ke(t,qr(r))},function(e,n){return Ke(t,n,!0),!1})},Aa.$=function(e,n,r,i,o,a,u,l,c,f){var h=this,p=[],g=xr(this.a,r),d=g.g,v=g.type,y=v,b=null!=i&&i!==d?rr(g,i):null,m=i||d;if(b&&(y=b.type),r=[],f&&t(f[0])){var _=f[0];b&&t(f[1])?(i=f[1],o=nr(g,n,r,b.getName(),o,_,!0,i,l,c)):o=er(g,n,r,i,o,l,c,_,!0)}else o=Zn(g,r,n,m,o,l,c);s(a)&&(o+=" LIMIT "+a),s(u)&&(o+=" OFFSET "+u);var w=e+" SQL: "+o+" ;params= "+yr(r);Qt(this.logger,w),e.a.executeSql(o,r,function(t,r){for(var i,o=r.rows.length,a=0;a<o;a++)i=r.rows.item(a),2==n?p[a]=Gn(i[d],v):1==n?p[a]=Gn(i[m],y):3==n?p[a]=[Gn(i[m],y),Gn(i[d],v)]:null!=i&&(p[a]=Ki(i,g));Jt(h.logger,"success "+e),f&&i&&(f[0]=Gn(i[m],y),f[1]=Gn(i[d],v)),Ke(e,p)},function(t,n){return $t(h.logger,"error: "+w+n.message),Ke(e,n,!0),!1})},d(Gi,zi),Gi.prototype.logger=Wt("ydn.db.core.req.WebSql"),Gi.prototype.b=function(t,e,n,r){return n=xr(this.a,n),new Ui(t,e,n,r)},Jr.prototype.u=function(){var t=this.Ba();if("indexeddb"==t)return new Zr(0,this.a);if("websql"==t||"sqlite"==t)return new Gi(0,this.a);if("memory"==t||"localstorage"==t||"userdata"==t||"sessionstorage"==t)return new Mi(0,this.a);throw new ne("No executor for "+t)},Aa=Qi.prototype,Aa.M="",Aa.$b=NaN,Aa.ac=NaN,Aa.Kb=!1,Aa.Oa="",Aa.toJSON=function(){return{sql:this.M}},Aa.toString=function(){return"query:"+this.M},to.prototype.logger=Wt("ydn.db.sql.req.nosql.Node"),to.prototype.toJSON=function(){return{sql:this.a}},to.prototype.toString=function(){return"idb.Node:"},to.prototype.b=function(e,n){var r=A(this.a.a)[0],i=this.a.i,o=this.a.$b,o=isNaN(o)?100:o,a=this.a.ac,a=isNaN(a)?0:a,s=this.a.j,u=Yi(this.a),l=null,c=this.a.Kb;if(0==i.length)l=null;else{if(1!=i.length)throw new Zt("too many conditions.");l=pe(i[0].a)}null===u||$e(e,function(t,e,n){var r=t;e||(r=t.map(function(t){var e=u.length;if(1==e)return be(t,u[0]);for(var n={},r=0;r<e;r++)n[u[r]]=be(t,u[r]);return n})),n(r,e)});var i=0<i.length?i[0].ma:void 0,f=Qe(e)+" executing on"+r;i&&(f+=":"+i),f+=" "+de(l),Jt(this.logger,f),s&&s!=this.c.keyPath?n.$(e,4,r,s,l,o,a,c,!1):t(i)&&i!=this.c.keyPath?n.$(e,4,r,i,l,o,a,c,!1):n.$(e,4,r,null,l,o,a,c,!1)},d(eo,to),eo.prototype.b=function(e,n){var r,i=A(this.a.a)[0],o=this.a.i,a=null;if(0==o.length)a=null;else{if(1!=o.length)throw new Zt("too many conditions.");a=pe(o[0].a)}var s=this.a.c,o=0<o.length?o[0].ma:void 0,u=Qe(e)+" executing "+s+" on "+i;if(o&&(u+=":"+o),u+=" "+de(a),Jt(this.logger,u),"COUNT"==s)a?n.Fa(e,i,a,o,!1):n.Fa(e,i,null,void 0,!1);else{var l,u=Yi(this.a);if(!u||0==u.length)throw new Pr("field name require for reduce operation: "+s);if(u=u[0],"MIN"==s)l=io(u);else if("MAX"==s)l=oo(u);else if("AVG"==s)r=0,l=no(u);else{if("SUM"!=s)throw new Nr(s);r=0,l=ro(u)}var c;c=t(o)?new Ue(i,o,a):new Me(i,a);var i=n.b(e.a,Qe(e),i,4),f=c.load([i]);f.Y=function(t){Ke(e,t,!0)};var h=0;f.G=function(t){null!=t?(t=c.f?f.T():f.Ca(),r=l(t,r,h),f.advance(1),h++):Ke(e,r)}}},d(ao,Zr),ao.prototype.logger=Wt("ydn.db.sql.req.IndexedDb"),ao.prototype.executeSql=function(t,e,n){if(n=Xi(e,n))throw new dn(n);if(n=A(e.a),1!=n.length)throw new Nr(e.M);var r=xr(this.a,n[0]);if(!r)throw new hn(n[0]);var i=Yi(e);if(i)for(var o=0;o<i.length;o++)if(!or(r,i[o]))throw new hn('Index "'+i[o]+'" not found in '+n[0]);var a;a=e.c?new eo(r,e):new to(r,e),a.b(t,this)},so.prototype.logger=Wt("ydn.db.sql.req.websql.Node"),so.prototype.toJSON=function(){return{sql:this.b.M}},so.prototype.toString=function(){return"websql.Node:"},so.prototype.c=function(t,e,n){var r=this,i=[];e.executeSql(this.b.M,n,function(e,n){for(var o=n.rows.length,a=0;a<o;a++){var s=n.rows.item(a);if(l(s))var u=uo(r,s);i.push(u)}t(i)},function(e,n){return $t(r.logger,"Sqlite error: "+n.message),t(n,!0),!0})},d(lo,so),lo.prototype.c=function(t,e,n){var r=this;e.executeSql(this.b.M,n,function(e,n){var r=n.rows.length;if(1==r)r=qr(n.rows.item(0)),t(r);else{if(0!=r)throw new ln;t(void 0)}},function(e,n){return $t(r.logger,"Sqlite error: "+n.message),t(n,!0),!0})},d(co,Gi),co.prototype.logger=Wt("ydn.db.sql.req.WebSql"),co.prototype.executeSql=function(t,e,n){var r=A(e.a);if(1!=r.length)throw new Nr(e.M);var i=xr(this.a,r[0]);if(!i)throw new hn(r[0]);var o=Yi(e);if(o)for(var a=0;a<o.length;a++)if(!or(i,o[a]))throw new hn('Index "'+o[a]+'" not found in '+r[0]);var s;s=e.c?new lo(i,e):new so(i,e),s.c(function(e,n){Ke(t,e,n)},t.a,n)},d(fo,Mi),fo.prototype.logger=Wt("ydn.db.sql.req.SimpleStore"),fo.prototype.executeSql=function(t,e,n){if(n=Xi(e,n))throw new dn(n);if(n=A(e.a),1!=n.length)throw new Zt(e.M);var r=xr(this.a,n[0]);if(!r)throw new hn(n[0]);var i=Yi(e);if(i)for(var o=0;o<i.length;o++)if(!or(r,i[o]))throw new Xt('Index "'+i[o]+'" not found in '+n[0]);var a;a=e.c?new eo(r,e):new to(r,e),a.b(t,this)},d(ho,Pn),ho.prototype.executeSql=function(t,e){for(var n=new Qi(t),r=A(n.a),i=0;i<r.length;i++){var o=xr(this.b,r[i]);if(!o)throw new Xt("store: "+o+" not exists.")}Jt(this.logger,"executeSql: "+t+" params: "+e);var a=this.a.request("sql",A(n.a),n.f);return Ge(a,function(){An(this).executeSql(a,n,e||[])},this),a},d(po,Jr),po.prototype.va=function(t){return new ho(this,this.a,t)},po.prototype.executeSql=function(t,e){return this.c.executeSql(t,e)},po.prototype.u=function(){var t=this.Ba();if("indexeddb"==t)return new ao(0,this.a);if("websql"==t||"sqlite"==t)return new co(0,this.a);if("memory"==t||"localstorage"==t||"sessionstorage"==t)return new fo(0,this.a);throw new ne("No executor for "+t)},Aa=go.prototype,Aa.connect=function(e,n){function r(t,e,r){for(Jt(o.logger,(r?"changing":"upgrading")+" version to "+t.version+" from "+u),r=0;r<n.stores.length;r++)vo(o,t,e,n.stores[r]);e=t.objectStoreNames;var i=e.length;for(r=0;r<i;r++)Er(n,e[r])||(t.deleteObjectStore(e[r]),Jt(o.logger,"store: "+e[r]+" deleted."))}function i(e,n){a.c?$t(o.logger,"database already set."):t(n)?($t(o.logger,n?n.message:"Error received."),o.A=null,a.o(n)):(o.A=e,o.A.onabort=function(t){Qt(o.logger,o+": abort"),o.Ra(t.target.error)},o.A.onerror=function(t){Qt(o.logger,o+": error"),o.Ra(t.target.error)},o.A.onversionchange=function(t){if(Qt(o.logger,o+" closing connection for onversionchange to: "+t.version),o.A&&(o.A.onabort=null,o.A.onblocked=null,o.A.onerror=null,o.A.onversionchange=null,o.jb(t),!t.defaultPrevented)){o.A.close(),o.A=null;var e=Error();e.name=t.type,o.qb(e)}},a.callback(parseFloat(u)))}var o=this,a=new et,u=void 0,l=n.version;zt(this.logger,Ws,"Opening database: "+e+" ver: "+(n.b?"auto":l));var c;return c=t(l)?nu.open(e,l):nu.open(e),c.onsuccess=function(a){var l=a.target.result;if(t(u)||(u=l.version),zt(o.logger,Ws,"Database: "+l.name+", ver: "+l.version+" opened."),n.b)o.S(function(t){if(n instanceof jr)for(var a=0;a<t.stores.length;a++)Er(n,t.stores[a].getName())||Or(n,t.stores[a].clone());if(t=Sr(n,t,!1,!0),0<t.length){zt(o.logger,Ws,"Schema change require for difference in "+t);var u=s(l.version)?l.version+1:1;if("IDBOpenDBRequest"in Ia){l.close();var c=nu.open(e,u);c.onupgradeneeded=function(t){t=t.target.result,zt(o.logger,Ws,"re-open for version "+t.version),r(t,c.transaction,!1)},c.onsuccess=function(t){i(t.target.result)},c.onerror=function(){zt(o.logger,Ws,o+": fail."),i(null)}}else{var f=l.setVersion(u+"");f.a=function(t){$t(o.logger,"migrating from "+l.version+" to "+u+" failed."),i(null,t)},f.onsuccess=function(){f.transaction.oncomplete=h,r(l,f.transaction,!0)};var h=function(){var t=nu.open(e);t.onsuccess=function(t){t=t.target.result,zt(o.logger,Ws,o+": OK."),i(t)},t.onerror=function(){zt(o.logger,Ws,o+": fail."),i(null)}};null!=f.transaction&&(f.transaction.oncomplete=h)}}else i(l)},void 0,l);else if(n.version>l.version){var c=l.setVersion(n.version);c.a=function(t){$t(o.logger,"migrating from "+l.version+" to "+n.version+" failed."),i(null,t)},c.onsuccess=function(){r(l,c.transaction,!0)}}else n.version==l.version?zt(o.logger,Ws,"database version "+l.version+" ready to go"):$t(o.logger,"connected database version "+l.version+" is higher than requested version."),o.S(function(t){t=Sr(n,t,!1,!0),0<t.length?(zt(o.logger,Ws,t),i(null,new Ir("different schema: "+t))):i(l)},void 0,l)},c.onupgradeneeded=function(t){t=t.target.result,u=NaN,zt(this.logger,Ws,"upgrade needed for version "+t.version),r(t,c.transaction,!1)},c.onerror=function(r){Kt(o.logger,'open request to database "'+e+'" '+(t(n.version)?" with version "+n.version:"")+" cause error of "+c.error.name),i(null,r)},c.onblocked=function(t){Kt(o.logger,"database "+e+" "+n.version+" block, close other connections."),i(null,t)},s(this.La)&&!isNaN(this.La)&&setTimeout(function(){"done"!=c.readyState&&(Kt(o.logger,o+": database state is still "+c.readyState),i(null,new vn("connection timeout after "+o.La)))},this.La),a},Aa.La=18e4,Aa.qb=function(){},Aa.Ra=function(){},Aa.jb=function(){},Aa.Aa=function(){return"indexeddb"},Aa.Mb=function(){return this.A||null},Aa.pb=function(){return!!this.A},Aa.logger=Wt("ydn.db.con.IndexedDb"),Aa.A=null,Aa.ob=function(){return this.A?parseFloat(this.A.version):void 0},Aa.S=function(e,n,r){if(r=r||this.A,t(n)){if(null===n){if(0==r.objectStoreNames.length)return void e(new wr(r.version));throw new Ar}r=n.db}else{n=[];for(var i=r.objectStoreNames.length-1;0<=i;i--)n[i]=r.objectStoreNames[i];if(0==n.length)return void e(new wr(r.version));n=r.transaction(n,Zs)}for(var o=r.objectStoreNames,a=[],s=o.length,i=0;i<s;i++){for(var u=n.objectStore(o[i]),l=[],c=0,f=u.indexNames.length;c<f;c++){var h=u.index(u.indexNames[c]);l[c]=new Wn(h.keyPath,(void 0),h.unique,h.multiEntry,h.name)}a[i]=new Xn(u.name,u.keyPath,u.autoIncrement,(void 0),l)}n=new wr(r.version,a),e(n)},Aa.$a=function(t,e,n,r){var i=this.A;if(!e){e=[];for(var o=i.objectStoreNames.length-1;0<=o;o--)e[o]=i.objectStoreNames[o]}0==e.length?t(null):(e=i.transaction(e,n),e.oncomplete=function(t){r("complete",t)},e.onabort=function(t){r("abort",t)},t(e),t=null)},Aa.close=function(){zt(this.logger,zs,this+" closing connection"),this.A.close()},Aa.toString=function(){return"IndexedDB:"+(this.A?this.A.name+":"+this.A.version:"")},su.push(function(t,e){if(!nu||e&&"indexeddb"!=e)return null;var n=nu.deleteDatabase(t),r=new He("IDBVersionChangeEvent ");return n.onblocked=function(t){ie(r,t)},n.onerror=function(t){r.o(t)},n.onsuccess=function(t){r.callback(t)},r}),d(yo,Fi),Aa=yo.prototype,Aa.logger=Wt("ydn.db.con.SimpleStorage"),Aa.ob=function(){return this.b},Aa.connect=function(e,n){function r(t,e){setTimeout(function(){e?(Jt(i.logger,i+" opening fail"),o.o(e)):(Jt(i.logger,i+" version "+i.ob()+" open"),o.callback(t))},10)}var i=this,o=new et;this.c=this.h.wb(e),this.f=e,this.a=n;var a=ii(this.f);this.b=NaN;var u=dr(this.c.getItem(a));if(t(u.version)&&!s(u.version)&&(u.version=NaN),u)if(u=new wr(u),Sr(this.a,u,!1,!1))if(!this.a.b&&!isNaN(u.version)&&this.a.version>u.version)r(NaN,new un("existing version "+u.version+" is larger than "+this.a.version));else{var l=this.a.version;for(this.b=t(l)?l:u.version+1,l=0;l<this.a.count();l++)var c=this.a.stores[l]||null;if(this.a instanceof jr)for(l=0;l<u.count();l++)c=u.stores[l]||null,Or(this.a,c);l=this.a.toJSON(),l.version=this.b||NaN,this.c.setItem(a,yr(l)),r(u.version||NaN)}else{for(l=0;l<this.a.count();l++)c=this.a.stores[l]||null;this.b=u.version||NaN,r(this.b)}else u=n.toJSON(),this.b=1,u.version=this.b,this.c.setItem(a,yr(u)),r(NaN);return o},Aa.pb=function(){return!!this.f},Aa.Mb=function(){return this.c||null},Aa.qb=function(){},Aa.Ra=function(){},Aa.jb=function(){},Aa.Aa=function(){return"memory"},Aa.close=function(){},Aa.$a=function(t,e,n,r){t(new Di(this,function(t,e){r(t,e)}))},Aa.toString=function(){return"SimpleStorage:"+this.Aa()+":"+(this.f+":"+this.b)},d(bo,yo),bo.prototype.wb=function(){return window.localStorage},bo.prototype.Aa=function(){return"localstorage"},su.push(function(t,e){if(!e||"localstorage"==e){var n=new bo,r=new jr;n.connect(t,r),n.S(function(t){for(var e=0;e<t.stores.length;e++)qi(n,t.stores[e].getName()).clear()})}}),d(mo,yo),mo.prototype.wb=function(){return window.sessionStorage},mo.prototype.Aa=function(){return"sessionstorage"},su.push(function(t,e){if(!e||"sessionstorage"==e){var n=new mo,r=new jr;n.connect(t,r),n.S(function(t){for(var e=0;e<t.stores.length;e++)qi(n,t.stores[e].getName()).clear()})}}),Aa=_o.prototype,Aa.connect=function(e,n){function r(t,n){var r=t.version?parseInt(t.version,10):0,a=n.b?isNaN(r)?1:r+1:n.version;Gt(o.logger,e+": changing version from "+t.version+" to "+a);var s=!1,u=0;t.changeVersion(t.version,a+"",function(e){o.S(function(t){s=!0;for(var r=0;r<n.count();r++){var i=xr(t,(n.stores[r]||null).getName()),i=i?sr(i,n.stores[r]||null):null;ko(o,e,n.stores[r]||null,function(t){t&&u++},i)}for(r=0;r<t.count();r++)i=t.stores[r]||null,Er(n,i.getName())||(n instanceof jr?Or(n,i):(i="DROP TABLE "+ar(i),Jt(o.logger,i),e.executeSql(i,[],function(){},function(t,e){throw e})))},e,t)},function(n){throw Kt(o.logger,"SQLError "+n+" "+n.code+"("+n.message+") while changing version from "+t.version+" to "+a+" on "+e),n},function(){if(s){var r=".";u!=n.stores.length&&(r=" but unexpected stores exists."),Qt(o.logger,e+":"+t.version+" ready"+r),i(t)}else $t(o.logger,e+": changing version voided.")})}function i(e,n){t(n)?(o.F=null,s.o(n)):(o.F=e,s.callback(parseFloat(a)))}var o=this,a=NaN,s=new et,u=null;try{"sqlite"==this.b?Ia.sqlitePlugin?(u=Ia.sqlitePlugin.openDatabase(e,"",e,this.a),u.readTransaction||(u.readTransaction=u.transaction),u.changeVersion=function(t,e,n,r,i){u.transaction(n,r,i)}):($t(this.logger,"sqlitePlugin not found."),u=null,this.rb=Error("sqlitePlugin not found.")):u=Ia.openDatabase(e,"",e,this.a)}catch(l){if("SECURITY_ERR"!=l.name)throw l;$t(this.logger,"SECURITY_ERR for opening "+e),u=null,this.rb=new gn(l)}if(u){var a=u.version||"",c="database "+e+(0==a.length?"":" version "+u.version);null!=n.version&&n.version==u.version?(Gt(o.logger,"Existing "+c+" opened as requested."),i(u)):this.S(function(t){(t=Sr(n,t,!0,!1))?(0==a?Gt(o.logger,"New "+c+" created."):n.b?Gt(o.logger,"Existing "+c+" opened and schema change for "+t):Gt(o.logger,"Existing "+c+" opened and  schema change to version "+n.version+" for "+t),r(u,n)):(Gt(o.logger,"Existing "+c+" with same schema opened."),i(u))},null,u)}else i(null,this.rb);return s},Aa.Aa=function(){return this.b},Aa.rb=null,Aa.F=null,Aa.Mb=function(){return this.F||null},Aa.logger=Wt("ydn.db.con.WebSql"),Aa.qb=function(){},Aa.Ra=function(){},Aa.ob=function(){return this.F?parseFloat(this.F.version):void 0},Aa.S=function(t,e,n){function r(t,e){throw e}function i(e,n){if(n&&n.rows){for(var r=0;r<n.rows.length;r++){var i=n.rows.item(r);if("__WebKitDatabaseInfoTable__"!=i.name&&"sqlite_sequence"!=i.name&&"table"==i.type){var l="sql"in i?i.sql:void 0;Qt(a.logger,"Parsing table schema from SQL: "+l);for(var c,f=l.substr(l.indexOf("("),l.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),h=void 0,l=[],p=!1,g=!1,d=0;d<f.length;d++){var v=f[d].match(/\w+|"[^"]+"/g),y=Xa(v,function(t){return t.toUpperCase()}),b=k(v[0],'"'),v=Qn(y[1]);if(-1!=y.indexOf("PRIMARY")&&-1!=y.indexOf("KEY")){if(c=v,o(b)&&!_(b)&&"_ROWID_"!=b){var m=b.split(","),h=b;1<m.length&&(h=m,c=void 0)}-1!=y.indexOf("AUTOINCREMENT")&&(p=!0)}else if("_ROWID_"!=b)if("_default_"==b)g=!0;else{var w="UNIQUE"==y[2];0==b.lastIndexOf(i.tbl_name+"-",0)&&(b=b.substr(i.tbl_name.length+1)),y=new Wn(b,v,w),l.push(y)}}if(0==i.name.lastIndexOf("ydn.db.me:",0)){var x=i.name.split(":");if(3<=x.length){var E=x[1],h=new Wn(x[2],v,w,(!0)),f=C(l,function(t){return t.getName()==x[2]});0<=f?l[f]=h:l.push(h),f=C(u,function(t){return t.getName()===E}),0<=f?(d=u[f],u[f]=new Xn(d.getName(),d.keyPath,p,c,l,(void 0),(!g))):u.push(new Xn(E,(void 0),(!1),(void 0),[h])),Qt(a.logger,'multi entry index "'+h.getName()+'" found in '+E+(-1==f?"*":""))}else $t(a.logger,'Invalid multiEntry store name "'+i.name+'"')}else d=C(u,function(t){return t.getName()===i.name}),0<=d?(f=u[d].index(0),l.push(f),u[d]=new Xn(i.name,h,p,c,l,(void 0),(!g))):(l=new Xn(i.name,h,p,c,l,(void 0),(!g)),u.push(l))}}r=new wr(s,u),t(r)}}var a=this,s=(n=n||this.F)&&n.version?parseFloat(n.version):void 0,s=isNaN(s)?void 0:s,u=[];e?e.executeSql("SELECT * FROM sqlite_master",[],i,r):n.readTransaction(function(e){a.S(t,e,n)},function(t){throw Kt(a.logger,"opening tx: "+t.message),t},i)},Aa.pb=function(){return!!this.F},Aa.close=function(){this.F=null},Aa.$a=function(t,e,n,r){function i(t){Qt(s.logger,s+": Tx "+n+" request cause error."),r("abort",t)}function o(){r("complete",{type:"complete"})}function a(e){t(e)}var s=this;null===this.F&&(t(null),r("abort",this.rb)),n==Zs?this.F.readTransaction(a,i,o):n==eu?this.F.changeVersion(this.F.version,this.F.version+1+"",a,i,o):this.F.transaction(a,i,o)},su.push(function(t,e){if(u(Ia.openDatabase)&&(!e||"websql"==e)){var n=new _o,r=new jr;Jt(n.logger,"deleting websql database: "+t);var r=n.connect(t,r),i=function(){var e=n.logger;e&&e.log(Us,"all tables in "+t+" deleted.",void 0)};r.H(function(){n.$a(function(e){e.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(r,i){if(i&&i.rows){for(var o=i.rows.length,a=0,s=0;s<o;s++){var u=i.rows.item(s);"__WebKitDatabaseInfoTable__"!=u.name&&"sqlite_sequence"!=u.name&&(a++,Qt(n.logger,"deleting table: "+u.name),e.executeSql("DROP TABLE "+u.name))}Jt(n.logger,a+' tables deleted from "'+t+'"')}},function(t,e){throw e})},[],tu,i)}),r.Sb(function(){$t(n.logger,"Connecting "+t+" failed.")})}}),_o.prototype.jb=function(){},_o.prototype.toString=function(){return"WebSql:"+(this.F?":"+this.F.version:"")},$r.prototype.xb=function(t){return"indexeddb"==t&&nu?new go(this.j,this.K):"sqlite"==t&&Ia.sqlitePlugin?new _o(this.j,"sqlite"):"websql"==t&&u(Ia.openDatabase)?new _o(this.j):"localstorage"==t&&window.localStorage?new bo:"sessionstorage"==t&&window.sessionStorage?new mo:"memory"==t?new yo:null},d(xo,Te),xo.prototype.a=function(){return{}},xo.prototype.c=function(t){if(l(t))if(u(t.Wb))t.Wb();else for(var e in t)delete t[e]},xo.prototype.fa=function(){xo.B.fa.call(this);for(var t=this.b;t.length;)this.c(t.pop());delete this.b},Wt("goog.debug.Trace"),
So.prototype.toString=function(){var t=[];return t.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)"),t.join("")},jo.prototype.toString=function(){return null==this.type?this.c:"["+this.type+"] "+this.c},Eo.prototype.toString=function(){for(var t=[],e=-1,n=[],r=0;r<this.a.length;r++){var i=this.a[r];1==i.a&&n.pop(),t.push(" ",Oo(i,e,n.join(""))),e=i.b,t.push("\n"),0==i.a&&n.push("|  ")}if(0!=this.c.zb()){var o=Fa();t.push(" Unstopped timers:\n"),Tt(this.c,function(e){t.push("  ",e," (",o-e.startTime," ms, started at ",No(e.startTime),")\n")})}for(e=this.f.na(),r=0;r<e.length;r++)n=this.f.get(e[r]),1<n.count&&t.push(" TOTAL ",n,"\n");return t.push("Total tracers created ",0,"\n","Total comments created ",0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n"),t.join("")},new Eo;var bu=!Cs||Cs&&9<=Fs,mu=Cs&&!Pt("9");!Ts||Pt("528"),Ns&&Pt("1.9b")||Cs&&Pt("8")||Os&&Pt("9.5")||Ts&&Pt("528"),Ns&&!Pt("8")||Cs&&Pt("9"),To[" "]=function(){},d(Ao,Dn),Aa=Ao.prototype,Aa.preventDefault=function(){Ao.B.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,mu)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Aa.Xb=function(){return Ts||void 0!==this.a.offsetX?this.a.offsetX:this.a.layerX},Aa.vc=function(t){Object.defineProperties(this,{Bb:{writable:!0,enumerable:!0,configurable:!0,value:t}})},Aa.Yb=function(){return Ts||void 0!==this.a.offsetY?this.a.offsetY:this.a.layerY},Aa.wc=function(t){Object.defineProperties(this,{Cb:{writable:!0,enumerable:!0,configurable:!0,value:t}})};var _u="closure_listenable_"+(1e6*Math.random()|0),wu=0;Po.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var a=qo(t,e,r,i);return-1<a?(e=t[a],n||(e.Ua=!1)):(e=new Io(e,this.src,o,(!!r),i),e.Ua=n,t.push(e)),e};var ku="closure_lm_"+(1e6*Math.random()|0),xu={},Eu=0,Su="__closure_events_fn_"+(1e9*Math.random()>>>0);d(Qo,Te),Qo.prototype[_u]=!0,Qo.prototype.addEventListener=function(t,e,n,r){Do(this,t,e,n,r)},Qo.prototype.removeEventListener=function(t,e,n,r){Uo(this,t,e,n,r)},Qo.prototype.fa=function(){if(Qo.B.fa.call(this),this.ga){var t,e=this.ga,n=0;for(t in e.a){for(var r=e.a[t],i=0;i<r.length;i++)++n,Ro(r[i]);delete e.a[t],e.b--}}this.a=null},$r.prototype.addEventListener=function(t,e,n,r){if("ready"==t)Mo(Xo(this),t,e,n,r);else{var o="created error fail ready deleted updated versionchange".split(" "),a=function(t){if(!(0<=Qa(o,t)))throw new Xt('Invalid event type "'+t+'"')};if(i(t))for(var s=0;s<t.length;s++)a(t[s]);else a(t);Do(Xo(this),t,e,n,r)}},$r.prototype.removeEventListener=function(t,e,n,r){Uo(Xo(this),t,e,n,r)},$r.prototype.J=function(t){var e,n=Xo(this),r=n.a;if(r)for(e=[];r;r=r.a)e.push(r);if(n=n.b,r=t.type||t,o(t))t=new Dn(t,n);else if(t instanceof Dn)t.target=t.target||n;else{var i=t;t=new Dn(r,n),B(t,i)}var a,i=!0;if(e)for(var s=e.length-1;0<=s;s--)a=t.b=e[s],i=Jo(a,r,!0,t)&&i;if(a=t.b=n,i=Jo(a,r,!0,t)&&i,i=Jo(a,r,!1,t)&&i,e)for(s=0;s<e.length;s++)a=t.b=e[s],i=Jo(a,r,!1,t)&&i},d(Yo,po),d(Zo,on),Zo.prototype.h=function(){return!1},Zo.prototype.c=function(e,n){function r(n){t(e[n])?(o=!1,i[n]=!0):(i[n]=!1,0<=n-1&&r(n-1))}var i=[],o=!0;return r(e.length-1),o&&(i=[]),an(this,i,n)},d(ta,on),ta.prototype.c=function(t,e){var n=[],r=e[0];if(null==r)return[];for(var i=!0,o=!1,a=r,s=[],u=1;u<t.length;u++)if(null!=e[u]){var l=au(r,e[u]);s[u]=l,this.b?-1==l?i=!1:1==l&&(i=!1,o=!0,-1==au(e[u],a)&&(a=e[u])):1==l?i=!1:-1==l&&(i=!1,o=!0,1==au(e[u],a)&&(a=e[u]))}else i=!1,o=!0;if(i)for(o=0;o<t.length;o++)null!=e[o]&&(n[o]=!0);else if(o)for(o=0;o<t.length;o++)null!=e[o]&&(this.b?-1==au(a,e[o])&&(n[o]=a):1==au(a,e[o])&&(n[o]=a));else for(u=this.b?-1:1,o=1;o<t.length;o++)s[o]===u&&(n[o]=r);return i?(this.g++,this.a&&this.a.push(a),n):{continuePrimary:n}},d(ea,on),ea.prototype.logger=Wt("ydn.db.algo.ZigzagMerge"),ea.prototype.c=function(t,e){function n(t,e){var n=t.slice(0,t.length-1);return n.push(e),n}function r(t){return t[t.length-1]}var i=[];if(0==t.length||null==t[0]||null==t[0])return[];for(var o=!0,a=0,s=r(t[a]),u=[],l=1;l<t.length;l++){if(null==t[l])return[];var c=r(t[l]),f=au(s,c);u[l]=f,this.b?-1==f?o=!1:1==f&&(o=!1,s=c,a=1):1==f?o=!1:-1==f&&(o=!1,s=c,a=1)}if(l=this.b?-1:1,o){for(o=0;o<t.length;o++)null!=t[o]&&(i[o]=!0);return this.a&&(this.f?this.a.push(e[0],s):this.a.push(e[0])),i}if(0==a)for(o=1;o<t.length;o++)u[o]==l&&(i[o]=n(t[o],s));else for(o=0;o<t.length;o++)o!=a&&null!=t[o]&&au(s,r(t[o]))===l&&(i[o]=n(t[o],s));return{"continue":i}},g("ydn.db.algo.NestedLoop",Zo),g("ydn.db.algo.ZigzagMerge",ea),g("ydn.db.algo.SortedMerge",ta),Dr.prototype.close=Dr.prototype.close,Dr.prototype.getType=Dr.prototype.Ba,Dr.prototype.getName=Dr.prototype.getName,Dr.prototype.getSchema=Dr.prototype.N,Dr.prototype.onReady=Dr.prototype.ib,Dr.prototype.setName=Dr.prototype.C,Dr.prototype.transaction=Dr.prototype.transaction,Dr.prototype.db=Dr.prototype.Kc,g("ydn.db.version","1.3.0"),g("ydn.db.cmp",au),g("ydn.db.deleteDatabase",function(t,e){for(var n,r=0;r<su.length;r++){var i=su[r](t,e);i&&(n=i)}return n||Je("IDBVersionChangeEvent ",null)}),Ln.prototype.name=Ln.prototype.name,Ln.prototype.getVersion=Ln.prototype.Nc,Ln.prototype.getOldVersion=Ln.prototype.oc,Ln.prototype.getOldSchema=Ln.prototype.nc,Mn.prototype.getError=Mn.prototype.c,He.prototype.abort=He.prototype.abort,He.prototype.canAbort=He.prototype.lc,re.prototype.progress=re.prototype.Tb,re.prototype.promise=re.prototype.zc,g("ydn.db.KeyRange",oe),oe.only=se,oe.bound=ue,oe.upperBound=le,oe.lowerBound=ce,Jr.prototype.countOf=Jr.prototype.Ga,Jr.prototype.keysOf=Jr.prototype.Ka,Jr.prototype.open=Jr.prototype.open,Jr.prototype.scan=Jr.prototype.Lc,Jr.prototype.valuesOf=Jr.prototype.Na,Pn.prototype.countOf=Pn.prototype.Ga,Pn.prototype.keysOf=Pn.prototype.Ka,Pn.prototype.open=Pn.prototype.open,Pn.prototype.scan=Pn.prototype.Nb,Pn.prototype.valuesOf=Pn.prototype.Na,Ae.prototype.getKey=Ae.prototype.Mc,Ae.prototype.getPrimaryKey=Ae.prototype.T,Ae.prototype.getValue=Ae.prototype.Ca,Ae.prototype.update=Ae.prototype.update,Ae.prototype.clear=Ae.prototype.clear,g("ydn.db.Iterator",De),g("ydn.db.KeyIterator",Be),g("ydn.db.ValueIterator",Me),g("ydn.db.IndexIterator",Le),g("ydn.db.IndexValueIterator",Ue),De.prototype.getState=De.prototype.pc,De.prototype.getKeyRange=De.prototype.gc,De.prototype.getIndexName=De.prototype.Ac,De.prototype.getStoreName=De.prototype.Dc,De.prototype.isReversed=De.prototype.da,De.prototype.isUnique=De.prototype.za,De.prototype.isKeyIterator=De.prototype.Ec,De.prototype.isIndexIterator=De.prototype.qc,De.prototype.getPrimaryKey=De.prototype.Cc,De.prototype.getKey=De.prototype.Bc,De.prototype.resume=De.prototype.hc,De.prototype.reset=De.prototype.Jb,De.prototype.reverse=De.prototype.reverse,Be.where=function(t,e,n,r,i){return new Be(t,ye(e,n,r,i))},Me.where=function(t,e,n,r,i){return new Me(t,ye(e,n,r,i))},Le.where=function(t,e,n,r,i,o){return new Le(t,e,ye(n,r,i,o))},Ue.where=function(t,e,n,r,i,o){return new Ue(t,e,ye(n,r,i,o))},g("ydn.db.Streamer",en),en.prototype.push=en.prototype.push,en.prototype.collect=en.prototype.Jc,en.prototype.setSink=en.prototype.xc,$r.prototype.branch=$r.prototype.kc,$r.prototype.getTxNo=$r.prototype.Pc,Tn.prototype.getTxNo=Tn.prototype.Oc,$r.prototype.run=$r.prototype.tc,Qr.prototype.branch=Qr.prototype.kc,Qr.prototype.add=Qr.prototype.add,Qr.prototype.addAll=Qr.prototype.Ta,Qr.prototype.get=Qr.prototype.get,Qr.prototype.keys=Qr.prototype.keys,Qr.prototype.keysByIndex=Qr.prototype.Ja,Qr.prototype.values=Qr.prototype.values,Qr.prototype.valuesByIndex=Qr.prototype.Ma,Qr.prototype.put=Qr.prototype.put,Qr.prototype.putAll=Qr.prototype.kb,Qr.prototype.clear=Qr.prototype.clear,Qr.prototype.remove=Qr.prototype.sb,Qr.prototype.count=Qr.prototype.count,Rn.prototype.add=Rn.prototype.add,Rn.prototype.addAll=Rn.prototype.Ta,Rn.prototype.get=Rn.prototype.get,Rn.prototype.keys=Rn.prototype.keys,Rn.prototype.keysByIndex=Rn.prototype.Ja,Rn.prototype.values=Rn.prototype.values,Rn.prototype.valuesByIndex=Rn.prototype.Ma,Rn.prototype.put=Rn.prototype.put,Rn.prototype.putAll=Rn.prototype.kb,Rn.prototype.clear=Rn.prototype.clear,Rn.prototype.remove=Rn.prototype.sb,Rn.prototype.count=Rn.prototype.count,g("ydn.db.Key",yn),yn.prototype.id=yn.prototype.mc,yn.prototype.parent=yn.prototype.Fc,yn.prototype.storeName=yn.prototype.Gc,g("ydn.db.KeyRange",oe),oe.upperBound=le,oe.lowerBound=ce,oe.bound=ue,oe.only=se,oe.starts=fe,Bn.prototype.store_name=Bn.prototype.s,Bn.prototype.getStoreName=Bn.prototype.a,Hn.prototype.name=Hn.prototype.name,Hn.prototype.getKey=Hn.prototype.c,Hn.prototype.getValue=Hn.prototype.f,Vn.prototype.name=Vn.prototype.name,Vn.prototype.getKeys=Vn.prototype.na,Vn.prototype.getValues=Vn.prototype.cb,ra.prototype.clone=function(){var t=new ra(this.c,this.a,this.h,this.g);return t.f=this.f.slice(),t.b=this.b.slice(),t},ra.prototype.reverse=function(){var t=this.clone();return t.h=!this.h,t},ra.prototype.unique=function(t){var e=this.clone();return e.g=!!t,e},ra.prototype.v=function(t,e,n,i,o){if(n=ye(e,n,i,o),0<this.b.length){if(!this.a)return"cannot use where clause with existing filter";if(null!=this.a.lower&&null!=this.a.upper&&0==au(this.a.lower,this.a.upper))t=r(this.a.lower)?this.a.lower.slice().push(e):[this.a.lower,e],i=null!=i?i:"￿",n=r(this.a.upper)?this.a.upper.slice().push(i):[this.a.upper,i],this.a=ye(e,t,i,n);else{if(!(1==this.b.length&&this.b[0]==t||r(t)&&R(this.b,t)))return"cannot use where clause with existing filter";this.a=this.a.ka(n)}}else this.b=r(t)?t:[t],this.a=this.a?this.a.ka(n):n;return null},d(la,na),la.prototype.open=function(){var t={push:function(){}},t=fa(this)?new ea(t):new ta(t);return this.db.Nb(t,ca(this),tu)},la.prototype.Ab=function(){return this.a.slice()},la.prototype.select=function(){throw Error("not impl")},la.prototype.reverse=function(){var t=this.a.map(function(t){return t.reverse()});return new la(this.db,this.b,this.type,t)},d(ha,na),Aa=ha.prototype,Aa.Hc=function(){return new ha(this.db,this.b,this.type,this.a.clone())},Aa.reverse=function(){var t=this.a.reverse();return new ha(this.db,this.b,this.type,t)},Aa.unique=function(t){if(!a(t))throw new Xt("unique value must be a boolean, but "+typeof t+" found");return t=this.a.unique(t),new ha(this.db,this.b,this.type,t)},Aa.X=function(t){var e=o(t)?[t]:t;if(t=this.a.clone(),e=ia(t,e))throw Error(e);return new ha(this.db,this.b,this.type,t)},Aa.v=function(t,e,n,r,i){if(sa(this.a)&&sa(this.a)!=t){var o=ye(e,n,r,i),o=new ra(xr(this.b,this.a.c.getName()),o,this.a.h,this.a.g);return this.ka(new ha(this.db,this.b,this.type,o))}if(!sa(this.a)&&!or(xr(this.b,this.a.c.getName()),t))throw new Xt('index "'+t+'" not exists in '+this.a.c.getName());if(o=this.a.clone(),t=o.v(t,e,n,r,i))throw new Xt(t);return new ha(this.db,this.b,this.type,o)},Aa.select=function(e){var n=xr(this.b,this.a.c.getName()),r=o(e)?[e]:e,a=this.type;if(e=this.a.clone(),a=sa(this.a),1==r.length)if(a=r[0],"_ROWID_"==a||a==n.keyPath)a=2;else if(a&&"*"!=a){if(!or(n,a))throw new Xt('Invalid select "'+a+'", index not found in store "'+n.getName()+'"');if(n=ia(e,r))throw new Xt(n);a=1}else a=4;else{if(2!=r.length)throw new Xt("Selecting more than 2 field names is not supported, but "+r.length+" fields selected.");if(!a)throw new Xt("Only primary key can be selected for this query.");for(var s=0;2>s;s++){var u;if(u="_ROWID_"!=r[s]){u=n;var l=r[s];u=!(t(u.keyPath)&&(1==u.h.length?u.keyPath===l:i(l)&&R(u.h,l)))}if(u&&r[s]!=a)throw new Xt('select field name must be "'+a+'", but "'+r[s]+'" found.')}a=3}return new ha(this.db,this.b,a,e)},Aa.Ic=function(t){t=t||100;var e=4,n=pa(this);return this.c&&this.c[0]&&(n=n.hc(this.c[0],this.c[1])),2!=this.type&&3!=this.type&&1!=this.type||(e=this.type),t=Fn(this.db,e,n,t),t.H(function(){"rest"==n.g&&(this.c=[n.i,n.j])},this),t},Aa.Ab=function(){return[this.a.clone()]},Aa.sc=function(t,e){var n=pa(this);if(n.f&&(n=new De(n.b,n.c,n.a,n.da(),n.za(),(!1),n.h)),1>arguments.length)throw new Xt("too few arguments");if(2==arguments.length){if(!o(t)&&r(t)){if(!r(e))throw new Xt("an array is expected for second argument but, "+vr(e)+" of type "+typeof e+" found");if(t.length!=e.length)throw new Xt("length of two input arguments must be equal but, "+t.length+" and "+e.length+" found")}}else{if(1!=arguments.length)throw new Xt("too many arguments");if(!l(t))throw new Xt("an object is expected but, "+vr(t)+" of type "+typeof t+" found")}var i=this.db.open(function(n){var a=n.Ca();if(o(t))me(a,t,e);else if(r(t))for(var s=0;s<t.length;s++)me(a,t[s],e[s]);else if(l(t))for(s in t)t.hasOwnProperty(s)&&(a[s]=t[s]);ot(i,n.update(a))},n,tu,this);return i},Aa.open=function(t,e){return this.db.open(t,pa(this),tu,e)},Aa.count=function(){return ua(this.a)?this.a.g?this.db.count(oa(this.a)):this.db.count(this.a.c.getName(),sa(this.a),this.a.a):this.db.count(this.a.c.getName(),this.a.a)},Aa.clear=function(){return ua(this.a)?this.db.clear(this.a.c.getName(),sa(this.a),this.a.a):this.db.clear(this.a.c.getName(),this.a.a)},Aa.ka=function(t){return t=t.Ab().concat(this.Ab()),new la(this.db,this.b,this.type,t)},Jr.prototype.V=function(e,n,r,i,a){if(!o(e))throw new TypeError('store name "'+e+'"');if(!Er(this.a,e))throw new Xt('Store "'+e+'" not found.');var s=null;if(t(n)){if(!t(r))throw new Xt("boundary value must be defined.");s=ye(n,r,i,a)}else if(t(i))throw new Xt("second boundary must not be defined.");return e=new ra(xr(this.a,e),s),new ha(this.c,this.a,null,e)},Pn.prototype.V=function(e,n,r,i,a){if(!o(e))throw new TypeError('store name "'+e+'"');if(!Er(this.b,e))throw new Xt('Store "'+e+'" not found.');var s=null;if(t(n)){if(!t(r))throw new Xt("boundary value must be defined.");s=ye(n,r,i,a)}else if(t(i))throw new Xt("second boundary must not be defined.");return e=new ra(xr(this.b,e),s),new ha(this,this.b,null,e)},Wt("ydn.db.query.ConjunctionCursor"),ha.prototype.copy=ha.prototype.Hc,ha.prototype.count=ha.prototype.count,ha.prototype.list=ha.prototype.Ic,ha.prototype.order=ha.prototype.X,ha.prototype.patch=ha.prototype.sc,ha.prototype.reverse=ha.prototype.reverse,ha.prototype.unique=ha.prototype.unique,ha.prototype.where=ha.prototype.v,Jr.prototype.from=Jr.prototype.V,Pn.prototype.from=Pn.prototype.V,po.prototype.executeSql=po.prototype.executeSql,ho.prototype.executeSql=ho.prototype.executeSql,$r.prototype.addEventListener=$r.prototype.addEventListener,$r.prototype.removeEventListener=$r.prototype.removeEventListener;var ju=new ga;ga.prototype.set=function(t){this.a=t},ga.prototype.get=function(){return this.a},da.prototype.c=!0,da.prototype.a=!0,da.prototype.b=!1,d(ma,da),ma.prototype.b=!0,ma.prototype.f=function(t){return t?_a(this,t).ha():""},d(wa,da),wa.prototype.f=function(t){var e=[];return e.push(this.g," "),this.a&&e.push("[",va(t),"] "),e.push("[",ba(t,this.h.get()),"s] "),e.push("[",t.b,"] "),e.push(t.c),this.b&&(t=t.a)&&e.push("\n",t instanceof Error?t.message:t.toString()),this.c&&e.push("\n"),e.join("")},ka.prototype.h=function(t){if(!this.f[t.b]){var e=this.a.f(t),n=Ou;if(n)switch(t.f){case Bs:xa(n,"info",e);break;case Ls:xa(n,"error",e);break;case Ms:xa(n,"warn",e);break;default:xa(n,"debug",e)}else this.c+=e}};var Ou=Ia.console,Cu=!Cs||Cs&&9<=Fs;!Ns&&!Cs||Cs&&Cs&&9<=Fs||Ns&&Pt("1.9.1"),Cs&&Pt("9");var Nu={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};Oa.prototype.b=function(t,e,n){var i=this.a,a=arguments,s=a[0],u=a[1];if(!Cu&&u&&(u.name||u.type)){if(s=["<",s],u.name&&s.push(' name="',w(u.name),'"'),u.type){s.push(' type="',w(u.type),'"');var l={};B(l,u),delete l.type,u=l}s.push(">"),s=s.join("")}return s=i.createElement(s),u&&(o(u)?s.className=u:r(u)?s.className=u.join(" "):Ea(s,u)),2<a.length&&Sa(i,s,a),s},Oa.prototype.contains=function(t,e){if(t.contains&&1==e.nodeType)return t==e||t.contains(e);if("undefined"!=typeof t.compareDocumentPosition)return t==e||Boolean(16&t.compareDocumentPosition(e));for(;e&&t!=e;)e=e.parentNode;return e==t},Ta.prototype.h=function(t){if(t){var e=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,n=this.f.createElement("div");n.className="logmsg",t=_a(this.b,t),n.innerHTML=kt(t),this.a.appendChild(n),e&&(this.a.scrollTop=this.a.scrollHeight)}},Ta.prototype.clear=function(){this.a&&(this.a.innerHTML=kt(Ss))};var Tu=null,Au=null;Wt("ydn.debug"),g("ydn.debug.log",function(e,n,r){if(e=e||"ydn",s(n))n=new Mt("log",n);else if(o(n)){if(n=n.toUpperCase(),!$s){$s={};for(var i,a=0;i=Ks[a];a++)$s[i.value]=i,$s[i.name]=i}n=$s[n]||null}else n=Vs;(a=Wt(e))?a.b=n:window.console.log("logger "+e+" not available."),t(r)?!Au&&(e=Au=new Ta(r),1!=e.c&&(r=Vt(),n=e.g,r.a||(r.a=[]),r.a.push(n),e.c=!0),e=Vt())&&(e.b=Ms):!Tu&&!Au&&(e=Tu=new ka,1!=e.b&&(r=Vt(),n=e.g,r.a||(r.a=[]),r.a.push(n),e.b=!0),e=Vt())&&(e.b=Ms)}),g("ydn.db.Storage",Yo)}(),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";function r(){this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function a(t){this._normalQueue._pushOne(t),this._queueTick()}var s;try{throw new Error}catch(u){s=u}var l=t("./schedule"),c=t("./queue"),f=t("./util");r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?a.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=a),r.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=s},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),c=new t(e);c._propagateFrom(this,1);var f=this._target();if(c._setBoundTo(l),l instanceof t){var h={promiseRejectionQueued:!1,promise:c,target:f,bindingPromise:l};f._then(e,a,void 0,c,h),l._then(s,u,void 0,c,h),c._setOnCancel(l)}else c._resolveCallback(f);return c},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+s.classString(t)+" has no method '"+s.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var a,s=t("./util"),u=s.canEvaluate;s.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=a(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,u=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t.isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n.isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,s){return function(u){var l=s._boundValue();t:for(var c=0;c<t.length;++c){var f=t[c];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return o(n).call(l,u)}else if("function"==typeof f){var h=o(f).call(l,u);if(h===a)return h;if(h)return o(n).call(l,u)}else if(r.isObject(u)){for(var p=i(f),g=0;g<p.length;++g){var d=p[g];if(f[d]!=u[d])continue t}return o(n).call(l,u)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:void 0}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,u=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=u,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+q.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function i(t){if(!this.isCancellable())return this;var e=this._onCancel();void 0!==e?q.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function o(){return this._onCancelField}function a(t){this._onCancelField=t}function s(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function l(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function c(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function f(){this._trace=new N(this._peekContext())}function h(t,e){if(D(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=w(t);q.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),q.notEnumerableProp(t,"__stackCleaned__",!0)}}}function p(t,e,n,r,i){if(void 0===t&&null!==e&&z){if(void 0!==i&&i._returnedNonUndefined())return;n&&(n+=" ");var o="a promise was created in a "+n+"handler but was not returned from it";r._warn(o,!0,e)}}function g(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),d(n)}function d(t,n,r){if(Z.warnings){var i,o=new F(t);if(n)r._attachExtraTrace(o);else if(Z.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var a=w(o);o.stack=a.message+"\n"+a.stack.join("\n")}k(o,"",!0)}}function v(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function y(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function b(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var u=r[s];if(e[i]!==u)break;e.pop(),i--}e=r}}function m(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||L.test(r),o=i&&G(r);i&&!o&&(U&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function _(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||L.test(r))break}return n>0&&(e=e.slice(n)),e}function w(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?_(t):["    (No stack trace)"],{message:n,stack:m(e)}}function k(t,e,n){if("undefined"!=typeof console){var r;if(q.isObject(t)){var i=t.stack;r=e+M(i,t)}else r=e+String(t);"function"==typeof I?I(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function x(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){P.throwLater(o)}var a=!1;try{a=Y(t,n,r)}catch(o){a=!0,P.throwLater(o)}var s=!1;if(J)try{s=J(t.toLowerCase(),{reason:n,promise:r})}catch(o){s=!0,P.throwLater(o)}a||i||s||"unhandledRejection"!==t||k(n,"Unhandled rejection ")}function E(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():q.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+S(e)+">, no stack trace)"}function S(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function j(){return"function"==typeof X}function O(t){var e=t.match(Q);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function C(t,e){if(j()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,u=0;u<i.length;++u){var l=O(i[u]);if(l){n=l.fileName,a=l.line;break}}for(var u=0;u<o.length;++u){var l=O(o[u]);if(l){r=l.fileName,s=l.line;break}}0>a||0>s||!n||!r||n!==r||a>=s||(G=function(t){if(B.test(t))return!0;var e=O(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}}function N(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);X(this,N),e>32&&this.uncycle()}var T,A,I,R=e._getDomain,P=e._async,F=t("./errors").Warning,q=t("./util"),D=q.canAttachTrace,B=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,L=null,M=null,U=!1,H=!(0==q.env("BLUEBIRD_DEBUG")||!q.env("BLUEBIRD_DEBUG")&&"development"!==q.env("NODE_ENV")),V=!(0==q.env("BLUEBIRD_WARNINGS")||!H&&!q.env("BLUEBIRD_WARNINGS")),W=!(0==q.env("BLUEBIRD_LONG_STACK_TRACES")||!H&&!q.env("BLUEBIRD_LONG_STACK_TRACES")),z=0!=q.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(V||!!q.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),P.invokeLater(this._notifyUnhandledRejection,this,void 0))},e.prototype._notifyUnhandledRejectionIsHandled=function(){x("rejectionHandled",T,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),x("unhandledRejection",A,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){
return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return d(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=R();A="function"==typeof t?null===e?t:e.bind(t):void 0},e.onUnhandledRejectionHandled=function(t){var e=R();T="function"==typeof t?null===e?t:e.bind(t):void 0};var K=function(){};e.longStackTraces=function(){if(P.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Z.longStackTraces&&j()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace;Z.longStackTraces=!0,K=function(){if(P.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),P.enableTrampoline(),Z.longStackTraces=!1},e.prototype._captureStackTrace=f,e.prototype._attachExtraTrace=h,n.activateLongStackTraces(),P.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return Z.longStackTraces&&j()},e.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&K()),"warnings"in t){var n=t.warnings;Z.warnings=!!n,z=Z.warnings,q.isObject(n)&&"wForgottenReturn"in n&&(z=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!Z.cancellation){if(P.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=s,e.prototype._propagateFrom=u,e.prototype._onCancel=o,e.prototype._setOnCancel=a,e.prototype._attachCancellationCallback=i,e.prototype._execute=r,$=u,Z.cancellation=!0}},e.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var $=l,G=function(){return!1},Q=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;q.inherits(N,Error),n.CapturedTrace=N,N.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var a=e[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var u=r>0?e[r-1]:this;t-1>s?(u._parent=e[s+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var l=u._length+1,c=r-2;c>=0;--c)e[c]._length=l,l++;return}}}},N.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=w(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(m(i.stack.split("\n"))),i=i._parent;b(r),y(r),q.notEnumerableProp(t,"stack",v(n,r)),q.notEnumerableProp(t,"__stackCleaned__",!0)}};var J,X=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():E(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,L=t,M=e;var n=Error.captureStackTrace;return G=function(t){return B.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return L=/@/,M=e,U=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(M=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?E(e):e.toString()},null):(L=t,M=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]),Y=function(){if(q.isNode)return function(t,e,n){return"rejectionHandled"===t?process.emit(t,n):process.emit(t,e,n)};var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null;if(!t)return function(){return!1};try{var e=document.createEvent("CustomEvent");e.initCustomEvent("testingtheevent",!1,!0,{}),t.dispatchEvent(e),J=function(e,n){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!1,!0,n),!t.dispatchEvent(r)}}catch(n){}var r={};return r.unhandledRejection="onunhandledRejection".toLowerCase(),r.rejectionHandled="onrejectionHandled".toLowerCase(),function(e,n,i){var o=r[e],a=t[o];return!!a&&("rejectionHandled"===e?a.call(t,i):a.call(t,n,i),!0)}}();"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(I=function(t){console.warn(t)},q.isNode&&process.stderr.isTTY?I=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:q.isNode||"string"!=typeof(new Error).stack||(I=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var Z={warnings:V,longStackTraces:!1,cancellation:!1};return W&&e.longStackTraces(),{longStackTraces:function(){return Z.longStackTraces},warnings:function(){return Z.warnings},cancellation:function(){return Z.cancellation},propagateFromFunction:function(){return $},boundValueFunction:function(){return c},checkForgottenReturns:p,setBounds:C,warn:d,deprecated:g,CapturedTrace:N}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return this.mapSeries(t)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,e){return r(t,e)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return c(n,Error),n}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,a,s=t("./es5"),u=s.freeze,l=t("./util"),c=l.inherits,f=l.notEnumerableProp,h=r("Warning","warning"),p=r("CancellationError","cancellation error"),g=r("TimeoutError","timeout error"),d=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(v){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),b=0;b<y.length;++b)"function"==typeof Array.prototype[y[b]]&&(d.prototype[y[b]]=Array.prototype[y[b]]);s.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var m=0;d.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return m--,e},c(i,Error);var _=Error.__BluebirdErrorTypes__;_||(_=u({CancellationError:p,TimeoutError:g,OperationalError:i,RejectionError:i,AggregateError:d}),f(Error,"__BluebirdErrorTypes__",_)),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},u=function(t,e){return{value:t[e]}},l=function(t,e,n){return t[e]=n.value,t},c=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(e){return a}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:s,names:s,defineProperty:l,getDescriptor:u,freeze:c,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function a(){return u.call(this,this.promise._target()._settledValue())}function s(t){return o(this,t)?void 0:(f.e=t,f)}function u(t){var r=this.promise,u=this.handler;if(!this.called){this.called=!0;var l=0===this.type?u.call(r._boundValue()):u.call(r._boundValue(),t);if(void 0!==l){r._setReturnedNonUndefined();var h=n(l,r);if(h instanceof e){if(null!=this.cancelPromise){if(h.isCancelled()){var p=new c("late cancellation observer");return r._attachExtraTrace(p),f.e=p,f}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(a,s,void 0,this,void 0)}}}return r.isRejected()?(o(this),f.e=t,f):(o(this),t)}var l=t("./util"),c=e.CancellationError,f=l.errorObj;return i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,u,u)},e.prototype.tap=function(t){return this._passThrough(t,1,u)},r}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=p(n[o])(t);if(r._popContext(),a===h){r._pushContext();var s=e.reject(h.e);return r._popContext(),s}var u=i(a,r);if(u instanceof e)return u}return null}function u(t,n,i,o){var a=this._promise=new e(r);a._captureStackTrace(),a._setOnCancel(this),this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(g):g,this._yieldedPromise=null}var l=t("./errors"),c=l.TypeError,f=t("./util"),h=f.errorObj,p=f.tryCatch,g=[];f.inherits(u,o),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=p(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=p(this._generator["throw"]).call(this._generator,r),this._promise._popContext(),t===h&&t.e===r&&(t=null)}var i=this._promise;this._cleanup(),t===h?i._rejectCallback(t.e,!1):i.cancel()}},u.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(t){var n=this._promise;if(t===h)return this._cleanup(),n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var a=o._bitField;0===(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&a)?this._promiseFulfilled(o._value()):0!==(16777216&a)?this._promiseRejected(o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=u,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r((void 0),(void 0),n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new c("expecting a function but got "+f.classString(t));g.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util");o.canEvaluate,o.tryCatch,o.errorObj,e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=l();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:p,this._init$(void 0,-2)}function u(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+c.classString(e));var o="object"==typeof n&&null!==n?n.concurrency:0;return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new s(t,e,o,i).promise()}var l=e._getDomain,c=t("./util"),f=c.tryCatch,h=c.errorObj,p=[];c.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,u=this._limit;if(0>n){if(n=-1*n-1,r[n]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var l=this._promise,c=this._callback,p=l._boundValue();l._pushContext();var g=f(c).call(p,t,n,o),d=l._popContext();if(a.checkForgottenReturns(g,d,null!==s?"Promise.filter":"Promise.map",l),g===h)return this._reject(g.e),!0;var v=i(g,this._promise);if(v instanceof e){v=v._target();var y=v._bitField;if(0===(50397184&y))return u>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1;if(0===(33554432&y))return 0!==(16777216&y)?(this._reject(v._reason()),!0):(this._cancel(),!0);g=v._value()}r[n]=g}var b=++this._totalResolved;return b>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return u(this,t,e,null)},e.map=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],c=arguments[2];u=a.isArray(l)?s(t).apply(c,l):s(t).call(c,l)}else u=s(t)();var f=r._popContext();return o.checkForgottenReturns(u,f,"Promise.try",r),r._resolveFromSyncValue(u),r},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&c.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=c.keys(t),i=0;i<n.length;++i){var o=n[i];f.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(s(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}var a=t("./util"),s=a.maybeWrapAsError,u=t("./errors"),l=u.OperationalError,c=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=s(e).apply(n._boundValue(),[null].concat(t));i===u&&a.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?s(e).call(r,null):s(e).call(r,null,t);i===u&&a.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=s(e).call(n._boundValue(),t);i===u&&a.throwLater(i.e)}var o=t("./util"),a=e._async,s=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){function e(){}function n(t,e){if("function"!=typeof e)throw new y("expecting a function but got "+h.classString(e));if(t.constructor!==r)throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function r(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==m&&(n(this,t),this._resolveFromExecutor(t)),this._promiseCreated()}function i(t){this.promise._resolveCallback(t)}function o(t){this.promise._rejectCallback(t,!1)}function a(t){var e=new r(m);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var s,u=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new r.PromiseInspection(this._target())},c=function(t){return r.reject(new y(t))},f={},h=t("./util");s=h.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},h.notEnumerableProp(r,"_getDomain",s);var p=t("./es5"),g=t("./async"),d=new g;p.defineProperty(r,"_async",{value:d});var v=t("./errors"),y=r.TypeError=v.TypeError;r.RangeError=v.RangeError;var b=r.CancellationError=v.CancellationError;r.TimeoutError=v.TimeoutError,r.OperationalError=v.OperationalError,r.RejectionError=v.OperationalError,r.AggregateError=v.AggregateError;var m=function(){},_={},w={},k=t("./thenables")(r,m),x=t("./promise_array")(r,m,k,c,e),E=t("./context")(r),S=E.create,j=t("./debuggability")(r,E),O=(j.CapturedTrace,t("./finally")(r,k)),C=t("./catch_filter")(w),N=t("./nodeback"),T=h.errorObj,A=h.tryCatch;return r.prototype.toString=function(){return"[object Promise]"},r.prototype.caught=r.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!h.isObject(o))return c("expecting an object but got "+h.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,C(r,t,this))}return this.then(void 0,t)},r.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},r.prototype.then=function(t,e){if(j.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+h.classString(t);arguments.length>1&&(n+=", "+h.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},r.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},r.prototype.spread=function(t){return"function"!=typeof t?c("expecting a function but got "+h.classString(t)):this.all()._then(t,void 0,void 0,_,void 0)},r.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},r.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new x(this).promise()},r.prototype.error=function(t){return this.caught(h.originatesFromRejection,t)},r.is=function(t){return t instanceof r},r.fromNode=r.fromCallback=function(t){var e=new r(m);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=A(t)(N(e,n));return i===T&&e._rejectCallback(i.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},r.all=function(t){return new x(t).promise()},r.cast=function(t){var e=k(t);return e instanceof r||(e=new r(m),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},r.resolve=r.fulfilled=r.cast,r.reject=r.rejected=function(t){var e=new r(m);return e._captureStackTrace(),e._rejectCallback(t,!0),e},r.setScheduler=function(t){if("function"!=typeof t)throw new y("expecting a function but got "+h.classString(t));var e=d._schedule;return d._schedule=t,e},r.prototype._then=function(t,e,n,i,o){var a=void 0!==o,u=a?o:new r(m),l=this._target(),c=l._bitField;a||(u._propagateFrom(this,3),u._captureStackTrace(),void 0===i&&0!==(2097152&this._bitField)&&(i=0!==(50397184&c)?this._boundValue():l===this?void 0:this._boundTo));var f=s();if(0!==(50397184&c)){var h,p,g=l._settlePromiseCtx;0!==(33554432&c)?(p=l._rejectionHandler0,h=t):0!==(16777216&c)?(p=l._fulfillmentHandler0,h=e,l._unsetRejectionIsUnhandled()):(g=l._settlePromiseLateCancellationObserver,p=new b("late cancellation observer"),l._attachExtraTrace(p),h=e),d.invoke(g,l,{handler:null===f?h:"function"==typeof h&&f.bind(h),promise:u,receiver:i,value:p})}else l._addCallbacks(t,e,u,i,f);return u},r.prototype._length=function(){return 65535&this._bitField},r.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},r.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},r.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},r.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField},r.prototype._setRejected=function(){this._bitField=16777216|this._bitField},r.prototype._setFollowing=function(){this._bitField=67108864|this._bitField},r.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},r.prototype._isFinal=function(){return(4194304&this._bitField)>0},r.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},r.prototype._setCancelled=function(){this._bitField=65536|this._bitField},r.prototype._setAsyncGuaranteed=function(){this._bitField=134217728|this._bitField},r.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===f?void 0:void 0===e&&this._isBound()?this._boundValue():e},r.prototype._promiseAt=function(t){return this[4*t-4+2]},r.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},r.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},r.prototype._boundValue=function(){},r.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=f),this._addCallbacks(e,n,r,i,null)},r.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=f),this._addCallbacks(n,r,i,o,null)},r.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[a+1]=null===i?e:i.bind(e))}return this._setLength(o+1),o},r.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},r.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(u(),!1);var n=k(t,this);if(!(n instanceof r))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target(),o=i._bitField;if(0===(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;a>s;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!==(33554432&o))this._fulfill(i._value());else if(0!==(16777216&o))this._reject(i._reason());else{var l=new b("late cancellation observer");i._attachExtraTrace(l),this._reject(l)}}},r.prototype._rejectCallback=function(t,e,n){var r=h.ensureErrorObject(t),i=r===t;if(!i&&!n&&j.warnings()){var o="a promise was rejected with a non-error: "+h.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},r.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},r.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===_?n&&"number"==typeof n.length?o=A(t).apply(this._boundValue(),n):(o=T,o.e=new y("cannot .spread() a non-array: "+h.classString(n))):o=A(t).call(e,n);var a=r._popContext();if(i=r._bitField,0===(65536&i))if(o===w)r._reject(n);else if(o===T||o===r){var s=o===r?u():o.e;r._rejectCallback(s,!1)}else j.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)}},r.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},r.prototype._followee=function(){return this._rejectionHandler0},r.prototype._setFollowee=function(t){this._rejectionHandler0=t},r.prototype._settlePromise=function(t,n,i,o){var a=t instanceof r,s=this._bitField,u=0!==(134217728&s);0!==(65536&s)?(a&&t._invokeInternalOnCancel(),i instanceof O?(i.cancelPromise=t,A(n).call(i,o)===T&&t._reject(T.e)):n===l?t._fulfill(l.call(i)):i instanceof e?i._promiseCancelled(t):a||t instanceof x?t._cancel():i.cancel()):"function"==typeof n?a?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(n,i,o,t)):n.call(i,o,t):i instanceof e?i._isResolved()||(0!==(33554432&s)?i._promiseFulfilled(o,t):i._promiseRejected(o,t)):a&&(u&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(o):t._reject(o))},r.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,i=t.receiver,o=t.value;"function"==typeof e?n instanceof r?this._settlePromiseFromHandler(e,i,o,n):e.call(i,o,n):n instanceof r&&n._reject(o)},r.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},r.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},r.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},r.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():d.settlePromises(this))}},r.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?d.fatalError(t,h.isNode):void((65535&e)>0?0!==(134217728&e)?this._settlePromises():d.settlePromises(this):this._ensurePossibleRejectionHandled())},r.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},r.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},r.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},r.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},r.defer=r.pending=function(){j.deprecated("Promise.defer","new Promise");var t=new r(m);return{promise:t,resolve:i,reject:o}},h.notEnumerableProp(r,"_makeSelfResolutionError",u),t("./method")(r,m,k,c,j),t("./bind")(r,m,k,j),t("./cancel")(r,x,c,j),t("./direct_resolve")(r),t("./synchronous_inspection")(r),t("./join")(r,x,k,m,j),r.Promise=r,t("./map.js")(r,x,c,k,m,j),t("./using.js")(r,c,k,S,m,j),t("./timers.js")(r,m,j),t("./generators.js")(r,c,m,k,e,j),t("./nodeify.js")(r),t("./call_get.js")(r),t("./props.js")(r,x,k,c),t("./race.js")(r,m,k,c),t("./reduce.js")(r,x,c,k,m,j),t("./settle.js")(r,x,j),t("./some.js")(r,x,c),t("./promisify.js")(r,m),t("./any.js")(r),
t("./each.js")(r,m),t("./filter.js")(r,m),h.toFastProperties(r),h.toFastProperties(r.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new r(m)),j.setBounds(g.firstLineError,h.lastLineError),r}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=t("./util");return u.isArray,u.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function l(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(l,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=u.asArray(o),null===o){var c=i("expecting an array or an iterable object but got "+u.classString(o)).reason();return void this._promise._rejectCallback(c,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(a(n))):void this._iterate(o)},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;n>s;++s){var u=r(t[s],i);u instanceof e?(u=u._target(),a=u._bitField):a=null,o?null!==a&&u.suppressUnhandledRejections():null!==a?0===(50397184&a)?(u._proxy(this,s),this._values[s]=u):o=0!==(33554432&a)?this._promiseFulfilled(u._value(),s):0!==(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(u,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!k.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=p.getDataPropertyOrDefault(t,e+n,_);return!!r&&i(r)}function a(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new b("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function s(t,e,n,r){for(var s=p.inheritedDataKeys(t),u=[],l=0;l<s.length;++l){var c=s[l],f=t[c],h=r===x||x(c,f,t);"function"!=typeof f||i(f)||o(t,c,e)||!r(c,f,t,h)||u.push(c,f)}return a(u,e,n),u}function u(t,r,i,o,a,s){function u(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var a="string"==typeof c&&this!==l?this[c]:t,u=g(o,s);try{a.apply(i,d(arguments,u))}catch(f){o._rejectCallback(v(f),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var l=function(){return this}(),c=t;return"string"==typeof c&&(t=o),p.notEnumerableProp(u,"__isPromisified__",!0),u}function l(t,e,n,r,i){for(var o=new RegExp(E(e)+"$"),a=s(t,e,o,n),u=0,l=a.length;l>u;u+=2){var c=a[u],f=a[u+1],g=c+e;if(r===S)t[g]=S(c,h,c,f,e,i);else{var d=r(f,function(){return S(c,h,c,f,e,i)});p.notEnumerableProp(d,"__isPromisified__",!0),t[g]=d}}return p.toFastProperties(t),t}function c(t,e,n){return S(t,e,void 0,t,null,n)}var f,h={},p=t("./util"),g=t("./nodeback"),d=p.withAppended,v=p.maybeWrapAsError,y=p.canEvaluate,b=t("./errors").TypeError,m="Async",_={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],k=new RegExp("^(?:"+w.join("|")+")$"),x=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},E=function(t){return t.replace(/([$])/,"\\$")},S=y?f:u;e.promisify=function(t,e){if("function"!=typeof t)throw new b("expecting a function but got "+p.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?h:e.context,o=!!e.multiArgs,a=c(t,n,o);return p.copyDescriptors(t,a,r),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new b("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=m);var i=e.filter;"function"!=typeof i&&(i=x);var o=e.promisifier;if("function"!=typeof o&&(o=S),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=p.inheritedDataKeys(t),s=0;s<a.length;++s){var u=t[a[s]];"constructor"!==a[s]&&p.isClass(u)&&(l(u.prototype,r,i,o,n),l(u,r,i,o,n))}return l(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==s&&t instanceof s)e=f(t),n=!0;else{var r=c.keys(t),i=r.length;e=new Array(2*i);for(var o=0;i>o;++o){var a=r[o];e[o]=t[a],e[o+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function a(t){var n,a=r(t);return l(a)?(n=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof e&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,u=t("./util"),l=u.isObject,c=t("./es5");"function"==typeof Map&&(s=Map);var f=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),h=function(t){for(var e=new s,n=t.length/2|0,r=0;n>r;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};u.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var i=this.length(),o=0,a=this.length();a>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return a(this)},e.props=function(t){return a(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return s(u);if(t=a.asArray(t),null===t)return i("expecting an array or an iterable object but got "+a.classString(t));var l=new e(n);void 0!==o&&l._propagateFrom(o,3);for(var c=l._fulfill,f=l._reject,h=0,p=t.length;p>h;++h){var g=t[h];(void 0!==g||h in t)&&e.cast(g)._then(c,f,void 0,l,null)}return l}var a=t("./util"),s=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r,i){this.constructor$(t);var a=h();this._fn=null===a?n:a.bind(n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function l(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+p.classString(e));var o=new s(t,e,n,i);return o.promise()}function c(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(t){var n=this.array,r=n._promise,i=g(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var s=r._popContext();return a.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var h=e._getDomain,p=t("./util"),g=p.tryCatch;p.inherits(s,n),s.prototype._gotAccum=function(t){void 0!==this._eachValues&&t!==o&&this._eachValues.push(t)},s.prototype._eachComplete=function(t){return this._eachValues.push(t),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},s.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},s.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;i>r;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(c,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},e.prototype.reduce=function(t,e){return l(this,t,e,null)},e.reduce=function(t,e,n,r){return l(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,s=process.nextTick;r=i.isRecentNode?function(t){a.call(global,t)}:function(t){s.call(process,t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,a=t("./util");a.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var a=t("./util"),s=t("./errors").RangeError,u=t("./errors").AggregateError,l=a.isArray,c={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new u,e=this.length();e<this._values.length;++e)this._values[e]!==c&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new s(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=t.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype.isCancelled=function(){return this._target()._isCancelled()},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(c(t)){if(t instanceof e)return t;var i=o(t);if(i===l){r&&r._pushContext();var u=e.reject(i.e);return r&&r._popContext(),u}if("function"==typeof i){if(a(t)){var u=new e(n);return t._then(u._fulfill,u._reject,void 0,u,null),u}return s(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return l.e=e,l}}function a(t){return f.call(t,"_promise0")}function s(t,r,i){function o(t){s&&(s._resolveCallback(t),s=null)}function a(t){s&&(s._rejectCallback(t,f,!0),s=null)}var s=new e(n),c=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var f=!0,h=u.tryCatch(r).call(t,o,a);return f=!1,s&&h===l&&(s._rejectCallback(h.e,!0,!0),s=null),c}var u=t("./util"),l=u.errorObj,c=u.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function o(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var a=t("./util"),s=e.TimeoutError,u=function(t,e,n){if(t.isPending()){var i;i="string"!=typeof e?e instanceof Error?e:new s("operation timed out"):new s(e),a.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._reject(i),r.cancellation()&&n.cancel()}},l=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,r){var i;return void 0!==r?i=e.resolve(r)._then(l,null,null,t,void 0):(i=new e(n),setTimeout(function(){i._fulfill()},+t)),i._setAsyncGuaranteed(),i};e.prototype.delay=function(t){return c(t,this)},e.prototype.timeout=function(t,e){t=+t;var n=this.then(),a=n.then(),s=setTimeout(function(){u(a,e,n)},t);return r.cancellation()&&a._setOnCancel({_resultCancelled:function(){clearTimeout(s)}}),a._then(i,o,void 0,s,void 0)}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t){setTimeout(function(){throw t},0)}function u(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function l(t,n){function i(){if(a>=l)return c._fulfill();var o=u(t[a++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(f){return s(f)}if(o instanceof e)return o._then(i,s,null,null,null)}i()}var a=0,l=t.length,c=new e(o);return i(),c}function c(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function h(t){return c.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function p(t){this.length=t,this.promise=null,this[t-1]=null}var g=t("./util"),d=t("./errors").TypeError,v=t("./util").inherits,y=g.errorObj,b=g.tryCatch;c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},c.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},c.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(f,c),f.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},p.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+g.classString(i));var o,s=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,s=!1):(o=arguments,t--);for(var u=new p(t),f=0;t>f;++f){var d=o[f];if(c.isDisposer(d)){var v=d;d=d.promise(),d._setDisposable(v)}else{var m=r(d);m instanceof e&&(d=m._then(h,null,null,{resources:u,index:f},void 0))}u[f]=d}for(var _=new Array(u.length),f=0;f<_.length;++f)_[f]=e.resolve(u[f]).reflect();var w=e.all(_).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}k._pushContext(),i=b(i);var r=s?i.apply(void 0,t):i(t),o=k._popContext();return a.checkForgottenReturns(r,o,"Promise.using",k),r}),k=w.lastly(function(){var t=new e.PromiseInspection(w);return l(u,t)});return u.promise=k,k._setOnCancel(u),k},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new d}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";function r(){try{var t=x;return x=null,t.apply(this,arguments)}catch(e){return j.e=e,j}}function i(t){return x=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return o(t)?new Error(v(t)):t}function u(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!E.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function c(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return E.defineProperty(t,e,r),t}function f(t){throw t}function h(t){try{if("function"==typeof t){var e=E.names(t.prototype),n=E.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=N.test(t+"")&&E.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function p(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function g(t){return T.test(t)}function d(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function v(t){try{return t+""}catch(e){return"[no string representation]"}}function y(t){try{c(t,"isOperational",!0)}catch(e){}}function b(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function m(t){return t instanceof Error&&E.propertyIsWritable(t,"stack")}function _(t){return{}.toString.call(t)}function w(t,e,n){for(var r=E.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{E.defineProperty(e,o,E.getDescriptor(t,o))}catch(a){}}}function k(t,e){return P?process.env[t]:e}var x,E=t("./es5"),S="undefined"==typeof navigator,j={e:{}},O=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},C=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(E.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(a){return r}for(var s=0;s<o.length;++s){var u=o[s];if(!i[u]){i[u]=!0;var l=Object.getOwnPropertyDescriptor(t,u);null!=l&&null==l.get&&null==l.set&&r.push(u)}}t=E.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),N=/this\s*\.\s*\S+\s*=/,T=/^[a-z$_][a-z$_0-9]*$/i,A=function(){return"stack"in new Error?function(t){return m(t)?t:new Error(v(t))}:function(t){if(m(t))return t;try{throw new Error(v(t))}catch(e){return e}}}(),I=function(t){return E.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var R="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};I=function(t){return E.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?R(t):null}}var P="undefined"!=typeof process&&"[object process]"===_(process).toLowerCase(),F={isClass:h,isIdentifier:g,inheritedDataKeys:C,getDataPropertyOrDefault:l,thrower:f,isArray:E.isArray,asArray:I,notEnumerableProp:c,isPrimitive:o,isObject:a,canEvaluate:S,errorObj:j,tryCatch:i,inherits:O,withAppended:u,maybeWrapAsError:s,toFastProperties:p,filledRange:d,toString:v,canAttachTrace:m,ensureErrorObject:A,originatesFromRejection:b,markAsOriginatingFromRejection:y,classString:_,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:P,env:k};F.isRecentNode=F.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),F.isNode&&F.toFastProperties(process);try{throw new Error}catch(q){F.lastLineError=q}e.exports=F},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e,n,r){for(var i=-1,o=t?t.length:0;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function i(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););return t}function o(t,e){for(var n=t?t.length:0;n--&&!1!==e(t[n],n,t););return t}function a(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(!e(t[n],n,t))return!1;return!0}function s(t,e){for(var n=-1,r=t?t.length:0,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function u(t,e){return!(!t||!t.length)&&-1<y(t,e,0)}function l(t,e,n){for(var r=-1,i=t?t.length:0;++r<i;)if(n(e,t[r]))return!0;return!1}function c(t,e){for(var n=-1,r=t?t.length:0,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function f(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function h(t,e,n,r){var i=-1,o=t?t.length:0;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function p(t,e,n,r){var i=t?t.length:0;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function g(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(e(t[n],n,t))return!0;return!1}function d(t,e,n){var r;return n(t,function(t,n,i){return e(t,n,i)?(r=n,!1):void 0}),r}function v(t,e,n,r){var i=t.length;for(n+=r?1:-1;r?n--:++n<i;)if(e(t[n],n,t))return n;return-1}function y(t,e,n){if(e!==e)return P(t,n);--n;for(var r=t.length;++n<r;)if(t[n]===e)return n;return-1}function b(t,e,n,r){--n;for(var i=t.length;++n<i;)if(r(t[n],e))return n;return-1}function m(t,e){var n=t?t.length:0;return n?k(t,e)/n:K}function _(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function w(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].c;return t}function k(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==W&&(n=n===W?o:n+o)}return n}function x(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function E(t,e){return c(e,function(e){return[e,t[e]]})}function S(t){return function(e){return t(e)}}function j(t,e){return c(e,function(e){return t[e]})}function O(t,e){return t.has(e)}function C(t,e){for(var n=-1,r=t.length;++n<r&&-1<y(e,t[n],0););return n}function N(t,e){for(var n=t.length;n--&&-1<y(e,t[n],0););return n}function T(t){return t&&t.Object===Object?t:null}function A(t){return qt[t]}function I(t){return Dt[t]}function R(t){return"\\"+Lt[t]}function P(t,e,n){var r=t.length;for(e+=n?1:-1;n?e--:++e<r;){var i=t[e];if(i!==i)return e}return-1}function F(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function q(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function D(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function B(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&"__lodash_placeholder__"!==a||(t[n]="__lodash_placeholder__",o[i++]=n)}return o}function L(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function M(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function U(t){if(!t||!At.test(t))return t.length;for(var e=Nt.lastIndex=0;Nt.test(t);)e++;return e}function H(t){return Bt[t]}function V(T){function Et(t,e){return T.setTimeout.call($t,t,e)}function St(t){if(Wr(t)&&!ba(t)&&!(t instanceof Dt)){if(t instanceof qt)return t;if(Ai.call(t,"__wrapped__"))return lr(t)}return new qt(t)}function jt(){}function qt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=W}function Dt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Bt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Lt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ht(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vt(t){var e=-1,n=t?t.length:0;for(this.__data__=new Ht;++e<n;)this.add(t[e])}function zt(t){this.__data__=new Lt(t)}function Kt(t,e,n,r){return t===W||Fr(t,ji[n])&&!Ai.call(r,n)?e:t}function Qt(t,e,n){(n===W||Fr(t[e],n))&&("number"!=typeof e||n!==W||e in t)||(t[e]=n)}function Jt(t,e,n){var r=t[e];Ai.call(t,e)&&Fr(r,n)&&(n!==W||e in t)||(t[e]=n)}function Xt(t,e){for(var n=t.length;n--;)if(Fr(t[n][0],e))return n;return-1}function Yt(t,e,n,r){return Eo(t,function(t,i,o){e(r,t,n(t),o)}),r}function Zt(t,e){return t&&fn(e,ai(e),t)}function te(t,e){for(var n=-1,r=null==t,i=e.length,o=Array(i);++n<i;)o[n]=r?W:ii(t,e[n]);return o}function ee(t,e,n){return t===t&&(n!==W&&(t=n>=t?t:n),e!==W&&(t=t>=e?t:e)),t}function ne(t,e,n,r,o,a,s){var u;if(r&&(u=a?r(t,o,a,s):r(t)),u!==W)return u;if(!Vr(t))return t;if(o=ba(t)){if(u=$n(t),!e)return cn(t,u)}else{var l=zn(t),c="[object Function]"==l||"[object GeneratorFunction]"==l;if(ma(t))return on(t,e);if("[object Object]"==l||"[object Arguments]"==l||c&&!a){if(F(t))return a?t:{};if(u=Gn(c?{}:t),!e)return hn(t,Zt(u,t))}else{if(!Ft[l])return a?t:{};u=Qn(t,l,ne,e)}}if(s||(s=new zt),
a=s.get(t))return a;if(s.set(t,u),!o)var f=n?de(t,ai,Wn):ai(t);return i(f||t,function(i,o){f&&(o=i,i=t[o]),Jt(u,o,ne(i,e,n,r,o,t,s))}),u}function re(t){var e=ai(t),n=e.length;return function(r){if(null==r)return!n;for(var i=n;i--;){var o=e[i],a=t[o],s=r[o];if(s===W&&!(o in Object(r))||!a(s))return!1}return!0}}function ie(t){return Vr(t)?Wi(t):{}}function oe(t,e,n){if("function"!=typeof t)throw new Ei("Expected a function");return Et(function(){t.apply(W,n)},e)}function ae(t,e,n,r){var i=-1,o=u,a=!0,s=t.length,f=[],h=e.length;if(!s)return f;n&&(e=c(e,S(n))),r?(o=l,a=!1):e.length>=200&&(o=O,a=!1,e=new Vt(e));t:for(;++i<s;){var p=t[i],g=n?n(p):p,p=r||0!==p?p:0;if(a&&g===g){for(var d=h;d--;)if(e[d]===g)continue t;f.push(p)}else o(e,g,r)||f.push(p)}return f}function se(t,e){var n=!0;return Eo(t,function(t,r,i){return n=!!e(t,r,i)}),n}function ue(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===W?a===a&&!Qr(a):n(a,s)))var s=a,u=o}return u}function le(t,e){var n=[];return Eo(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function ce(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Xn),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?ce(s,e-1,n,r,i):f(i,s):r||(i[i.length]=s)}return i}function fe(t,e){return t&&jo(t,e,ai)}function he(t,e){return t&&Oo(t,e,ai)}function pe(t,e){return s(e,function(e){return Mr(t[e])})}function ge(t,e){e=er(e,t)?[e]:nn(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[sr(e[n++])];return n&&n==r?t:W}function de(t,e,n){return e=e(t),ba(t)?e:f(e,n(t))}function ve(t,e){return t>e}function ye(t,e){return null!=t&&(Ai.call(t,e)||"object"==typeof t&&e in t&&null===Qi(Object(t)))}function be(t,e){return null!=t&&e in Object(t)}function me(t,e,n){for(var r=n?l:u,i=t[0].length,o=t.length,a=o,s=Array(o),f=1/0,h=[];a--;){var p=t[a];a&&e&&(p=c(p,S(e))),f=to(p.length,f),s[a]=!n&&(e||i>=120&&p.length>=120)?new Vt(a&&p):W}var p=t[0],g=-1,d=s[0];t:for(;++g<i&&f>h.length;){var v=p[g],y=e?e(v):v,v=n||0!==v?v:0;if(d?!O(d,y):!r(h,y,n)){for(a=o;--a;){var b=s[a];if(b?!O(b,y):!r(t[a],y,n))continue t}d&&d.push(y),h.push(v)}}return h}function _e(t,e,n){var r={};return fe(t,function(t,i,o){e(r,n(t),i,o)}),r}function we(t,e,r){return er(e,t)||(e=nn(e),t=ar(t,e),e=dr(e)),e=null==t?t:t[sr(e)],null==e?W:n(e,t,r)}function ke(t,e,n,r,i){if(t===e)e=!0;else if(null==t||null==e||!Vr(t)&&!Wr(e))e=t!==t&&e!==e;else t:{var o=ba(t),a=ba(e),s="[object Array]",u="[object Array]";o||(s=zn(t),s="[object Arguments]"==s?"[object Object]":s),a||(u=zn(e),u="[object Arguments]"==u?"[object Object]":u);var l="[object Object]"==s&&!F(t),a="[object Object]"==u&&!F(e);if((u=s==u)&&!l)i||(i=new zt),e=o||Jr(t)?qn(t,e,ke,n,r,i):Dn(t,e,s,ke,n,r,i);else{if(!(2&r)&&(o=l&&Ai.call(t,"__wrapped__"),s=a&&Ai.call(e,"__wrapped__"),o||s)){t=o?t.value():t,e=s?e.value():e,i||(i=new zt),e=ke(t,e,n,r,i);break t}if(u)e:if(i||(i=new zt),o=2&r,s=ai(t),a=s.length,u=ai(e).length,a==u||o){for(l=a;l--;){var c=s[l];if(!(o?c in e:ye(e,c))){e=!1;break e}}if(u=i.get(t))e=u==e;else{u=!0,i.set(t,e);for(var f=o;++l<a;){var c=s[l],h=t[c],p=e[c];if(n)var g=o?n(p,h,c,e,t,i):n(h,p,c,t,e,i);if(g===W?h!==p&&!ke(h,p,n,r,i):!g){u=!1;break}f||(f="constructor"==c)}u&&!f&&(n=t.constructor,r=e.constructor,n!=r&&"constructor"in t&&"constructor"in e&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(u=!1)),i["delete"](t),e=u}}else e=!1;else e=!1}}return e}function xe(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var s=n[i],u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(l===W&&!(u in t))return!1}else{if(s=new zt,r)var f=r(l,c,u,t,e,s);if(f===W?!ke(c,l,r,3,s):!f)return!1}}return!0}function Ee(t){return!(!Vr(t)||Ni&&Ni in t)&&(Mr(t)||F(t)?qi:bt).test(ur(t))}function Se(t){return"function"==typeof t?t:null==t?pi:"object"==typeof t?ba(t)?Te(t[0],t[1]):Ne(t):yi(t)}function je(t){t=null==t?t:Object(t);var e,n=[];for(e in t)n.push(e);return n}function Oe(t,e){return e>t}function Ce(t,e){var n=-1,r=Dr(t)?Array(t.length):[];return Eo(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Ne(t){var e=Hn(t);return 1==e.length&&e[0][2]?ir(e[0][0],e[0][1]):function(n){return n===t||xe(n,t,e)}}function Te(t,e){return er(t)&&e===e&&!Vr(e)?ir(sr(t),e):function(n){var r=ii(n,t);return r===W&&r===e?oi(n,t):ke(e,r,W,3)}}function Ae(t,e,n,r,o){if(t!==e){if(!ba(e)&&!Jr(e))var a=si(e);i(a||e,function(i,s){if(a&&(s=i,i=e[s]),Vr(i)){o||(o=new zt);var u=s,l=o,c=t[u],f=e[u],h=l.get(f);if(h)Qt(t,u,h);else{var h=r?r(c,f,u+"",t,e,l):W,p=h===W;p&&(h=f,ba(f)||Jr(f)?ba(c)?h=c:Br(c)?h=cn(c):(p=!1,h=ne(f,!0)):Kr(f)||qr(f)?qr(c)?h=ni(c):!Vr(c)||n&&Mr(c)?(p=!1,h=ne(f,!0)):h=c:p=!1),l.set(f,h),p&&Ae(h,f,n,r,l),l["delete"](f),Qt(t,u,h)}}else u=r?r(t[s],i,s+"",t,e,o):W,u===W&&(u=i),Qt(t,s,u)})}}function Ie(t,e){var n=t.length;return n?(e+=0>e?n:0,Zn(e,n)?t[e]:W):void 0}function Re(t,e,n){var r=-1;return e=c(e.length?e:[pi],S(Mn())),t=Ce(t,function(t){return{a:c(e,function(e){return e(t)}),b:++r,c:t}}),w(t,function(t,e){var r;t:{r=-1;for(var i=t.a,o=e.a,a=i.length,s=n.length;++r<a;){var u=sn(i[r],o[r]);if(u){r=r>=s?u:u*("desc"==n[r]?-1:1);break t}}r=t.b-e.b}return r})}function Pe(t,e){return t=Object(t),h(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function Fe(t,e){for(var n=-1,r=de(t,si,Io),i=r.length,o={};++n<i;){var a=r[n],s=t[a];e(s,a)&&(o[a]=s)}return o}function qe(t){return function(e){return null==e?W:e[t]}}function De(t){return function(e){return ge(e,t)}}function Be(t,e,n,r){var i=r?b:y,o=-1,a=e.length,s=t;for(t===e&&(e=cn(e)),n&&(s=c(t,S(n)));++o<a;)for(var u=0,l=e[o],l=n?n(l):l;-1<(u=i(s,l,u,r));)s!==t&&Ki.call(s,u,1),Ki.call(t,u,1);return t}function Le(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;if(Zn(i))Ki.call(t,i,1);else if(er(i,t))delete t[sr(i)];else{var i=nn(i),a=ar(t,i);null!=a&&delete a[sr(dr(i))]}}}}function Me(t,e){return t+Gi(no()*(e-t+1))}function Ue(t,e){var n="";if(!t||1>e||e>9007199254740991)return n;do e%2&&(n+=t),(e=Gi(e/2))&&(t+=t);while(e);return n}function He(t,e,n,r){e=er(e,t)?[e]:nn(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=sr(e[i]);if(Vr(s)){var l=n;if(i!=a){var c=s[u],l=r?r(c,u,s):W;l===W&&(l=null==c?Zn(e[i+1])?[]:{}:c)}Jt(s,u,l)}s=s[u]}return t}function Ve(t,e,n){var r=-1,i=t.length;for(0>e&&(e=-e>i?0:i+e),n=n>i?i:n,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0,n=Array(i);++r<i;)n[r]=t[r+e];return n}function We(t,e){var n;return Eo(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function ze(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&2147483647>=i){for(;i>r;){var o=r+i>>>1,a=t[o];null!==a&&!Qr(a)&&(n?e>=a:e>a)?r=o+1:i=o}return i}return Ke(t,e,pi,n)}function Ke(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=null===e,u=Qr(e),l=e===W;o>i;){var c=Gi((i+o)/2),f=n(t[c]),h=f!==W,p=null===f,g=f===f,d=Qr(f);(a?r||g:l?g&&(r||h):s?g&&h&&(r||!p):u?g&&h&&!p&&(r||!d):p||d?0:r?e>=f:e>f)?i=c+1:o=c}return to(o,4294967294)}function $e(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Fr(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Ge(t){return"number"==typeof t?t:Qr(t)?K:+t}function Qe(t){if("string"==typeof t)return t;if(Qr(t))return xo?xo.call(t):"";var e=t+"";return"0"==e&&1/t==-z?"-0":e}function Je(t,e,n){var r=-1,i=u,o=t.length,a=!0,s=[],c=s;if(n)a=!1,i=l;else if(o>=200){if(i=e?null:No(t))return L(i);a=!1,i=O,c=new Vt}else c=e?[]:s;t:for(;++r<o;){var f=t[r],h=e?e(f):f,f=n||0!==f?f:0;if(a&&h===h){for(var p=c.length;p--;)if(c[p]===h)continue t;e&&c.push(h),s.push(f)}else i(c,h,n)||(c!==s&&c.push(h),s.push(f))}return s}function Xe(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Ve(t,r?0:o,r?o+1:i):Ve(t,r?o+1:0,r?i:o)}function Ye(t,e){var n=t;return n instanceof Dt&&(n=n.value()),h(e,function(t,e){return e.func.apply(e.thisArg,f([t],e.args))},n)}function Ze(t,e,n){for(var r=-1,i=t.length;++r<i;)var o=o?f(ae(o,t[r],e,n),ae(t[r],o,e,n)):t[r];return o&&o.length?Je(o,e,n):[]}function tn(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;)n(a,t[r],o>r?e[r]:W);return a}function en(t){return Br(t)?t:[]}function nn(t){return ba(t)?t:Fo(t)}function rn(t,e,n){var r=t.length;return n=n===W?r:n,!e&&n>=r?t:Ve(t,e,n)}function on(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function an(t){var e=new t.constructor(t.byteLength);return new Mi(e).set(new Mi(t)),e}function sn(t,e){if(t!==e){var n=t!==W,r=null===t,i=t===t,o=Qr(t),a=e!==W,s=null===e,u=e===e,l=Qr(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&e>t||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function un(t,e,n,r){var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=Zi(o-a,0),c=Array(u+l);for(r=!r;++s<u;)c[s]=e[s];for(;++i<a;)(r||o>i)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function ln(t,e,n,r){var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=Zi(o-s,0),f=Array(c+l);for(r=!r;++i<c;)f[i]=t[i];for(c=i;++u<l;)f[c+u]=e[u];for(;++a<s;)(r||o>i)&&(f[c+n[a]]=t[i++]);return f}function cn(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function fn(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=r?r(n[a],t[a],a,n,t):t[a];Jt(n,a,s)}return n}function hn(t,e){return fn(t,Wn(t),e)}function pn(t,e){return function(n,i){var o=ba(n)?r:Yt,a=e?e():{};return o(n,t,Mn(i),a)}}function gn(t){return Pr(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:W,a=i>2?n[2]:W,o=t.length>3&&"function"==typeof o?(i--,o):W;for(a&&tr(n[0],n[1],a)&&(o=3>i?W:o,i=1),e=Object(e);++r<i;)(a=n[r])&&t(e,a,r,o);return e})}function dn(t,e){return function(n,r){if(null==n)return n;if(!Dr(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function vn(t){return function(e,n,r){var i=-1,o=Object(e);r=r(e);for(var a=r.length;a--;){var s=r[t?a:++i];if(!1===n(o[s],s,o))break}return e}}function yn(t,e,n){function r(){return(this&&this!==$t&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=1&e,o=_n(t);return r}function bn(t){return function(e){e=ri(e);var n=At.test(e)?e.match(Nt):W,r=n?n[0]:e.charAt(0);return e=n?rn(n,1).join(""):e.slice(1),r[t]()+e}}function mn(t){return function(e){return h(fi(ci(e).replace(Ot,"")),t,"")}}function _n(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ie(t.prototype),e=t.apply(n,e);return Vr(e)?e:n}}function wn(t,e,r){function i(){for(var a=arguments.length,s=Array(a),u=a,l=Ln(i);u--;)s[u]=arguments[u];return u=3>a&&s[0]!==l&&s[a-1]!==l?[]:B(s,l),a-=u.length,r>a?In(t,e,En,i.placeholder,W,s,u,W,W,r-a):n(this&&this!==$t&&this instanceof i?o:t,this,s)}var o=_n(t);return i}function kn(t){return function(e,n,r){var i=Object(e);if(n=Mn(n,3),!Dr(e))var o=ai(e);return r=t(o||e,function(t,e){return o&&(e=t,t=i[e]),n(t,e,i)},r),r>-1?e[o?o[r]:r]:W}}function xn(t){return Pr(function(e){e=ce(e,1);var n=e.length,r=n,i=qt.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new Ei("Expected a function");if(i&&!a&&"wrapper"==Bn(o))var a=new qt([],(!0))}for(r=a?r:n;++r<n;)var o=e[r],i=Bn(o),s="wrapper"==i?To(o):W,a=s&&nr(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[Bn(s[0])].apply(a,s[3]):1==o.length&&nr(o)?a[i]():a.thru(o);return function(){var t=arguments,r=t[0];if(a&&1==t.length&&ba(r)&&r.length>=200)return a.plant(r).value();for(var i=0,t=n?e[i].apply(this,t):r;++i<n;)t=e[i].call(this,t);return t}})}function En(t,e,n,r,i,o,a,s,u,l){function c(){for(var y=arguments.length,b=Array(y),m=y;m--;)b[m]=arguments[m];if(g){var _,w=Ln(c),m=b.length;for(_=0;m--;)b[m]===w&&_++}if(r&&(b=un(b,r,i,g)),o&&(b=ln(b,o,a,g)),y-=_,g&&l>y)return w=B(b,w),In(t,e,En,c.placeholder,n,b,w,s,u,l-y);if(w=h?n:this,m=p?w[t]:t,y=b.length,s){_=b.length;for(var k=to(s.length,_),x=cn(b);k--;){var E=s[k];b[k]=Zn(E,_)?x[E]:W}}else d&&y>1&&b.reverse();return f&&y>u&&(b.length=u),this&&this!==$t&&this instanceof c&&(m=v||_n(m)),m.apply(w,b)}var f=128&e,h=1&e,p=2&e,g=24&e,d=512&e,v=p?W:_n(t);return c}function Sn(t,e){return function(n,r){return _e(n,t,e(r))}}function jn(t){return function(e,n){var r;if(e===W&&n===W)return 0;if(e!==W&&(r=e),n!==W){if(r===W)return n;"string"==typeof e||"string"==typeof n?(e=Qe(e),n=Qe(n)):(e=Ge(e),n=Ge(n)),r=t(e,n)}return r}}function On(t){return Pr(function(e){return e=1==e.length&&ba(e[0])?c(e[0],S(Mn())):c(ce(e,1,Yn),S(Mn())),Pr(function(r){var i=this;return t(e,function(t){return n(t,i,r)})})})}function Cn(t,e){e=e===W?" ":Qe(e);var n=e.length;return 2>n?n?Ue(e,t):e:(n=Ue(e,$i(t/U(e))),At.test(e)?rn(n.match(Nt),0,t).join(""):n.slice(0,t))}function Nn(t,e,r,i){function o(){for(var e=-1,u=arguments.length,l=-1,c=i.length,f=Array(c+u),h=this&&this!==$t&&this instanceof o?s:t;++l<c;)f[l]=i[l];for(;u--;)f[l++]=arguments[++e];return n(h,a?r:this,f)}var a=1&e,s=_n(t);return o}function Tn(t){return function(e,n,r){r&&"number"!=typeof r&&tr(e,n,r)&&(n=r=W),e=ei(e),e=e===e?e:0,n===W?(n=e,e=0):n=ei(n)||0,r=r===W?n>e?1:-1:ei(r)||0;var i=-1;n=Zi($i((n-e)/(r||1)),0);for(var o=Array(n);n--;)o[t?n:++i]=e,e+=r;return o}}function An(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ei(e),n=ei(n)),t(e,n)}}function In(t,e,n,r,i,o,a,s,u,l){var c=8&e,f=c?a:W;a=c?W:a;var h=c?o:W;return o=c?W:o,e=(e|(c?32:64))&~(c?64:32),4&e||(e&=-4),e=[t,e,i,h,f,o,a,s,u,l],n=n.apply(W,e),nr(t)&&Po(n,e),n.placeholder=r,n}function Rn(t){var e=ki[t];return function(t,n){if(t=ei(t),n=to(Zr(n),292)){var r=(ri(t)+"e").split("e"),r=e(r[0]+"e"+(+r[1]+n)),r=(ri(r)+"e").split("e");return+(r[0]+"e"+(+r[1]-n))}return e(t)}}function Pn(t){return function(e){var n=zn(e);return"[object Map]"==n?D(e):"[object Set]"==n?M(e):E(e,t(e))}}function Fn(t,e,n,r,i,o,a,s){var u=2&e;if(!u&&"function"!=typeof t)throw new Ei("Expected a function");var l=r?r.length:0;if(l||(e&=-97,r=i=W),a=a===W?a:Zi(Zr(a),0),s=s===W?s:Zr(s),l-=i?i.length:0,64&e){var c=r,f=i;r=i=W}var h=u?W:To(t);return o=[t,e,n,r,i,c,f,o,a,s],h&&(n=o[1],t=h[1],e=n|t,r=128==t&&8==n||128==t&&256==n&&h[8]>=o[7].length||384==t&&h[8]>=h[7].length&&8==n,131>e||r)&&(1&t&&(o[2]=h[2],e|=1&n?0:4),(n=h[3])&&(r=o[3],o[3]=r?un(r,n,h[4]):n,o[4]=r?B(o[3],"__lodash_placeholder__"):h[4]),(n=h[5])&&(r=o[5],o[5]=r?ln(r,n,h[6]):n,o[6]=r?B(o[5],"__lodash_placeholder__"):h[6]),(n=h[7])&&(o[7]=n),128&t&&(o[8]=null==o[8]?h[8]:to(o[8],h[8])),null==o[9]&&(o[9]=h[9]),o[0]=h[0],o[1]=e),t=o[0],e=o[1],n=o[2],r=o[3],i=o[4],s=o[9]=null==o[9]?u?0:t.length:Zi(o[9]-l,0),!s&&24&e&&(e&=-25),(h?Co:Po)(e&&1!=e?8==e||16==e?wn(t,e,s):32!=e&&33!=e||i.length?En.apply(W,o):Nn(t,e,n,r):yn(t,e,n),o)}function qn(t,e,n,r,i,o){var a=2&i,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;if(u=o.get(t))return u==e;var u=-1,l=!0,c=1&i?new Vt:W;for(o.set(t,e);++u<s;){var f=t[u],h=e[u];if(r)var p=a?r(h,f,u,e,t,o):r(f,h,u,t,e,o);if(p!==W){if(p)continue;l=!1;break}if(c){if(!g(e,function(t,e){return c.has(e)||f!==t&&!n(f,t,r,i,o)?void 0:c.add(e)})){l=!1;break}}else if(f!==h&&!n(f,h,r,i,o)){l=!1;break}}return o["delete"](t),l}function Dn(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":if(t.byteLength!=e.byteLength||!r(new Mi(t),new Mi(e)))break;return!0;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object Number]":return t!=+t?e!=+e:t==+e;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=D;case"[object Set]":if(s||(s=L),t.size!=e.size&&!(2&o))break;return(n=a.get(t))?n==e:(o|=1,a.set(t,e),qn(s(t),s(e),r,i,o,a));case"[object Symbol]":if(ko)return ko.call(t)==ko.call(e)}return!1}function Bn(t){for(var e=t.name+"",n=go[e],r=Ai.call(go,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Ln(t){return(Ai.call(St,"placeholder")?St:t).placeholder}function Mn(){var t=St.iteratee||gi,t=t===gi?Se:t;return arguments.length?t(arguments[0],arguments[1]):t}function Un(t,e){var n=t.__data__,r=typeof e;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?n["string"==typeof e?"string":"hash"]:n.map}function Hn(t){for(var e=ai(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,i===i&&!Vr(i)]}return e}function Vn(t,e){var n=null==t?W:t[e];return Ee(n)?n:W}function Wn(t){return Hi(Object(t))}function zn(t){return Pi.call(t)}function Kn(t,e,n){e=er(e,t)?[e]:nn(e);for(var r,i=-1,o=e.length;++i<o;){var a=sr(e[i]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}return r?r:(o=t?t.length:0,!!o&&Hr(o)&&Zn(a,o)&&(ba(t)||Gr(t)||qr(t)))}function $n(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Ai.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Gn(t){return"function"!=typeof t.constructor||rr(t)?{}:ie(Qi(Object(t)))}function Qn(n,r,i,o){var a=n.constructor;switch(r){case"[object ArrayBuffer]":return an(n);case"[object Boolean]":case"[object Date]":return new a((+n));case"[object DataView]":return r=o?an(n.buffer):n.buffer,new n.constructor(r,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return r=o?an(n.buffer):n.buffer,new n.constructor(r,n.byteOffset,n.length);case"[object Map]":return r=o?i(D(n),!0):D(n),h(r,t,new n.constructor);case"[object Number]":case"[object String]":return new a(n);case"[object RegExp]":return r=new n.constructor(n.source,gt.exec(n)),r.lastIndex=n.lastIndex,r;case"[object Set]":return r=o?i(L(n),!0):L(n),h(r,e,new n.constructor);case"[object Symbol]":return ko?Object(ko.call(n)):{}}}function Jn(t){var e=t?t.length:W;return Hr(e)&&(ba(t)||Gr(t)||qr(t))?x(e,String):null}function Xn(t){return ba(t)||qr(t)}function Yn(t){return ba(t)&&!(2==t.length&&!Mr(t[0]))}function Zn(t,e){return e=null==e?9007199254740991:e,!!e&&("number"==typeof t||_t.test(t))&&t>-1&&0==t%1&&e>t}function tr(t,e,n){if(!Vr(n))return!1;var r=typeof e;return!!("number"==r?Dr(n)&&Zn(e,n.length):"string"==r&&e in n)&&Fr(n[e],t)}function er(t,e){if(ba(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Qr(t))||(it.test(t)||!rt.test(t)||null!=e&&t in Object(e))}function nr(t){var e=Bn(t),n=St[e];return"function"==typeof n&&e in Dt.prototype&&(t===n||(e=To(n),!!e&&t===e[0]))}function rr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ji)}function ir(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==W||t in Object(n)))}}function or(t,e,n,r,i,o){return Vr(t)&&Vr(e)&&Ae(t,e,W,or,o.set(e,t)),t}function ar(t,e){return 1==e.length?t:ge(t,Ve(e,0,-1))}function sr(t){if("string"==typeof t||Qr(t))return t;var e=t+"";return"0"==e&&1/t==-z?"-0":e}function ur(t){if(null!=t){try{return Ti.call(t)}catch(e){}return t+""}return""}function lr(t){if(t instanceof Dt)return t.clone();var e=new qt(t.__wrapped__,t.__chain__);return e.__actions__=cn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function cr(t,e,n){var r=t?t.length:0;return r?(e=n||e===W?1:Zr(e),Ve(t,0>e?0:e,r)):[]}function fr(t,e,n){var r=t?t.length:0;return r?(e=n||e===W?1:Zr(e),e=r-e,Ve(t,0,0>e?0:e)):[]}function hr(t,e,n){var r=t?t.length:0;return r?(n=null==n?0:Zr(n),0>n&&(n=Zi(r+n,0)),v(t,Mn(e,3),n)):-1}function pr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r-1;return n!==W&&(i=Zr(n),i=0>n?Zi(r+i,0):to(i,r-1)),v(t,Mn(e,3),i,!0)}function gr(t){return t&&t.length?t[0]:W}function dr(t){var e=t?t.length:0;return e?t[e-1]:W}function vr(t,e){return t&&t.length&&e&&e.length?Be(t,e):t}function yr(t){return t?io.call(t):t}function br(t){if(!t||!t.length)return[];var e=0;return t=s(t,function(t){return Br(t)?(e=Zi(t.length,e),!0):void 0}),x(e,function(e){return c(t,qe(e))})}function mr(t,e){if(!t||!t.length)return[];var r=br(t);return null==e?r:c(r,function(t){return n(e,W,t)})}function _r(t){return t=St(t),t.__chain__=!0,t}function wr(t,e){return e(t)}function kr(){return this}function xr(t,e){return(ba(t)?i:Eo)(t,Mn(e,3))}function Er(t,e){return(ba(t)?o:So)(t,Mn(e,3))}function Sr(t,e){return(ba(t)?c:Ce)(t,Mn(e,3))}function jr(t,e,n){var r=-1,i=Xr(t),o=i.length,a=o-1;for(e=(n?tr(t,e,n):e===W)?1:ee(Zr(e),0,o);++r<e;)t=Me(r,a),n=i[t],i[t]=i[r],i[r]=n;return i.length=e,i}function Or(){return _i.now()}function Cr(t,e,n){return e=n?W:e,e=t&&null==e?t.length:e,Fn(t,128,W,W,W,W,e)}function Nr(t,e){var n;if("function"!=typeof e)throw new Ei("Expected a function");return t=Zr(t),function(){return 0<--t&&(n=e.apply(this,arguments)),1>=t&&(e=W),n}}function Tr(t,e,n){return e=n?W:e,t=Fn(t,8,W,W,W,W,W,e),t.placeholder=Tr.placeholder,t}function Ar(t,e,n){return e=n?W:e,t=Fn(t,16,W,W,W,W,W,e),t.placeholder=Ar.placeholder,t}function Ir(t,e,n){function r(e){var n=u,r=l;return u=l=W,g=e,f=t.apply(r,n)}function i(t){var n=t-p;return t-=g,p===W||n>=e||0>n||v&&t>=c}function o(){var t=Or();if(i(t))return a(t);var n;n=t-g,t=e-(t-p),n=v?to(t,c-n):t,h=Et(o,n)}function a(t){return h=W,y&&u?r(t):(u=l=W,f)}function s(){var t=Or(),n=i(t);if(u=arguments,l=this,p=t,n){if(h===W)return g=t=p,h=Et(o,e),d?r(t):f;if(v)return h=Et(o,e),r(p)}return h===W&&(h=Et(o,e)),f}var u,l,c,f,h,p,g=0,d=!1,v=!1,y=!0;if("function"!=typeof t)throw new Ei("Expected a function");return e=ei(e)||0,Vr(n)&&(d=!!n.leading,c=(v="maxWait"in n)?Zi(ei(n.maxWait)||0,e):c,y="trailing"in n?!!n.trailing:y),s.cancel=function(){g=0,u=p=l=h=W},s.flush=function(){return h===W?f:a(Or())},s}function Rr(t,e){function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=t.apply(this,r),n.cache=o.set(i,r),r)}if("function"!=typeof t||e&&"function"!=typeof e)throw new Ei("Expected a function");return n.cache=new(Rr.Cache||Ht),n}function Pr(t,e){if("function"!=typeof t)throw new Ei("Expected a function");return e=Zi(e===W?t.length-1:Zr(e),0),function(){for(var r=arguments,i=-1,o=Zi(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}for(o=Array(e+1),i=-1;++i<e;)o[i]=r[i];return o[e]=a,n(t,this,o)}}function Fr(t,e){return t===e||t!==t&&e!==e}function qr(t){return Br(t)&&Ai.call(t,"callee")&&(!zi.call(t,"callee")||"[object Arguments]"==Pi.call(t))}function Dr(t){return null!=t&&Hr(Ao(t))&&!Mr(t)}function Br(t){return Wr(t)&&Dr(t)}function Lr(t){return!!Wr(t)&&("[object Error]"==Pi.call(t)||"string"==typeof t.message&&"string"==typeof t.name)}function Mr(t){return t=Vr(t)?Pi.call(t):"","[object Function]"==t||"[object GeneratorFunction]"==t}function Ur(t){return"number"==typeof t&&t==Zr(t)}function Hr(t){return"number"==typeof t&&t>-1&&0==t%1&&9007199254740991>=t}function Vr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wr(t){return!!t&&"object"==typeof t}function zr(t){return"number"==typeof t||Wr(t)&&"[object Number]"==Pi.call(t)}function Kr(t){return!(!Wr(t)||"[object Object]"!=Pi.call(t)||F(t))&&(t=Qi(Object(t)),null===t||(t=Ai.call(t,"constructor")&&t.constructor,"function"==typeof t&&t instanceof t&&Ti.call(t)==Ri))}function $r(t){return Vr(t)&&"[object RegExp]"==Pi.call(t)}function Gr(t){return"string"==typeof t||!ba(t)&&Wr(t)&&"[object String]"==Pi.call(t)}function Qr(t){return"symbol"==typeof t||Wr(t)&&"[object Symbol]"==Pi.call(t)}function Jr(t){return Wr(t)&&Hr(t.length)&&!!Pt[Pi.call(t)]}function Xr(t){if(!t)return[];if(Dr(t))return Gr(t)?t.match(Nt):cn(t);if(Vi&&t[Vi])return q(t[Vi]());var e=zn(t);return("[object Map]"==e?D:"[object Set]"==e?L:ui)(t)}function Yr(t){return t?(t=ei(t),t===z||t===-z?1.7976931348623157e308*(0>t?-1:1):t===t?t:0):0===t?t:0}function Zr(t){t=Yr(t);var e=t%1;return t===t?e?t-e:t:0}function ti(t){return t?ee(Zr(t),0,4294967295):0}function ei(t){if("number"==typeof t)return t;if(Qr(t))return K;if(Vr(t)&&(t=Mr(t.valueOf)?t.valueOf():t,t=Vr(t)?t+"":t),"string"!=typeof t)return 0===t?t:+t;t=t.replace(ut,"");var e=yt.test(t);return e||mt.test(t)?Ut(t.slice(2),e?2:8):vt.test(t)?K:+t}function ni(t){return fn(t,si(t))}function ri(t){return null==t?"":Qe(t)}function ii(t,e,n){return t=null==t?W:ge(t,e),t===W?n:t}function oi(t,e){return null!=t&&Kn(t,e,be)}function ai(t){var e=rr(t);if(!e&&!Dr(t))return Yi(Object(t));var n,r=Jn(t),i=!!r,r=r||[],o=r.length;for(n in t)!ye(t,n)||i&&("length"==n||Zn(n,o))||e&&"constructor"==n||r.push(n);return r}function si(t){for(var e=-1,n=rr(t),r=je(t),i=r.length,o=Jn(t),a=!!o,o=o||[],s=o.length;++e<i;){var u=r[e];a&&("length"==u||Zn(u,s))||"constructor"==u&&(n||!Ai.call(t,u))||o.push(u)}return o}function ui(t){return t?j(t,ai(t)):[]}function li(t){return za(ri(t).toLowerCase())}function ci(t){return(t=ri(t))&&t.replace(wt,A).replace(Ct,"")}function fi(t,e,n){return t=ri(t),e=n?W:e,e===W&&(e=It.test(t)?Tt:ft),t.match(e)||[]}function hi(t){return function(){return t}}function pi(t){return t}function gi(t){return Se("function"==typeof t?t:ne(t,!0))}function di(t,e,n){var r=ai(e),o=pe(e,r);null!=n||Vr(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=pe(e,ai(e)));var a=!(Vr(n)&&"chain"in n&&!n.chain),s=Mr(t);return i(o,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=cn(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,f([this.value()],arguments))})}),t}function vi(){}function yi(t){return er(t)?qe(sr(t)):De(t)}function bi(){return[]}function mi(){return!1}T=T?Gt.defaults({},T,Gt.pick($t,Rt)):$t;var _i=T.Date,wi=T.Error,ki=T.Math,xi=T.RegExp,Ei=T.TypeError,Si=T.Array.prototype,ji=T.Object.prototype,Oi=T.String.prototype,Ci=T["__core-js_shared__"],Ni=function(){var t=/[^.]+$/.exec(Ci&&Ci.keys&&Ci.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ti=T.Function.prototype.toString,Ai=ji.hasOwnProperty,Ii=0,Ri=Ti.call(Object),Pi=ji.toString,Fi=$t._,qi=xi("^"+Ti.call(Ai).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Di=Wt?T.Buffer:W,Bi=T.Reflect,Li=T.Symbol,Mi=T.Uint8Array,Ui=Bi?Bi.f:W,Hi=Object.getOwnPropertySymbols,Vi="symbol"==typeof(Vi=Li&&Li.iterator)?Vi:W,Wi=Object.create,zi=ji.propertyIsEnumerable,Ki=Si.splice,$i=ki.ceil,Gi=ki.floor,Qi=Object.getPrototypeOf,Ji=T.isFinite,Xi=Si.join,Yi=Object.keys,Zi=ki.max,to=ki.min,eo=T.parseInt,no=ki.random,ro=Oi.replace,io=Si.reverse,oo=Oi.split,ao=Vn(T,"DataView"),so=Vn(T,"Map"),uo=Vn(T,"Promise"),lo=Vn(T,"Set"),co=Vn(T,"WeakMap"),fo=Vn(Object,"create"),ho=co&&new co,po=!zi.call({valueOf:1},"valueOf"),go={},vo=ur(ao),yo=ur(so),bo=ur(uo),mo=ur(lo),_o=ur(co),wo=Li?Li.prototype:W,ko=wo?wo.valueOf:W,xo=wo?wo.toString:W;St.templateSettings={escape:tt,evaluate:et,interpolate:nt,variable:"",imports:{_:St}},St.prototype=jt.prototype,St.prototype.constructor=St,qt.prototype=ie(jt.prototype),qt.prototype.constructor=qt,Dt.prototype=ie(jt.prototype),Dt.prototype.constructor=Dt,Bt.prototype.clear=function(){this.__data__=fo?fo(null):{}},Bt.prototype["delete"]=function(t){return this.has(t)&&delete this.__data__[t]},Bt.prototype.get=function(t){var e=this.__data__;return fo?(t=e[t],"__lodash_hash_undefined__"===t?W:t):Ai.call(e,t)?e[t]:W},Bt.prototype.has=function(t){var e=this.__data__;return fo?e[t]!==W:Ai.call(e,t)},Bt.prototype.set=function(t,e){return this.__data__[t]=fo&&e===W?"__lodash_hash_undefined__":e,this},Lt.prototype.clear=function(){this.__data__=[]},Lt.prototype["delete"]=function(t){var e=this.__data__;return t=Xt(e,t),!(0>t)&&(t==e.length-1?e.pop():Ki.call(e,t,1),!0)},Lt.prototype.get=function(t){var e=this.__data__;return t=Xt(e,t),0>t?W:e[t][1]},Lt.prototype.has=function(t){return-1<Xt(this.__data__,t)},Lt.prototype.set=function(t,e){var n=this.__data__,r=Xt(n,t);return 0>r?n.push([t,e]):n[r][1]=e,this},Ht.prototype.clear=function(){this.__data__={hash:new Bt,map:new(so||Lt),string:new Bt}},Ht.prototype["delete"]=function(t){return Un(this,t)["delete"](t)},Ht.prototype.get=function(t){return Un(this,t).get(t)},Ht.prototype.has=function(t){return Un(this,t).has(t)},Ht.prototype.set=function(t,e){return Un(this,t).set(t,e),this},Vt.prototype.add=Vt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Vt.prototype.has=function(t){return this.__data__.has(t)},zt.prototype.clear=function(){this.__data__=new Lt},zt.prototype["delete"]=function(t){return this.__data__["delete"](t)},zt.prototype.get=function(t){return this.__data__.get(t)},zt.prototype.has=function(t){return this.__data__.has(t)},zt.prototype.set=function(t,e){var n=this.__data__;return n instanceof Lt&&200==n.__data__.length&&(n=this.__data__=new Ht(n.__data__)),n.set(t,e),this};var Eo=dn(fe),So=dn(he,!0),jo=vn(),Oo=vn(!0);Ui&&!zi.call({valueOf:1},"valueOf")&&(je=function(t){return q(Ui(t))});var Co=ho?function(t,e){return ho.set(t,e),t}:pi,No=lo&&1/L(new lo([,-0]))[1]==z?function(t){return new lo(t)}:vi,To=ho?function(t){return ho.get(t)}:vi,Ao=qe("length");Hi||(Wn=bi);var Io=Hi?function(t){for(var e=[];t;)f(e,Wn(t)),t=Qi(Object(t));return e}:Wn;(ao&&"[object DataView]"!=zn(new ao(new ArrayBuffer(1)))||so&&"[object Map]"!=zn(new so)||uo&&"[object Promise]"!=zn(uo.resolve())||lo&&"[object Set]"!=zn(new lo)||co&&"[object WeakMap]"!=zn(new co))&&(zn=function(t){var e=Pi.call(t);if(t=(t="[object Object]"==e?t.constructor:W)?ur(t):W)switch(t){case vo:return"[object DataView]";case yo:return"[object Map]";case bo:return"[object Promise]";case mo:return"[object Set]";case _o:return"[object WeakMap]"}return e});var Ro=Ci?Mr:mi,Po=function(){var t=0,e=0;return function(n,r){var i=Or(),o=16-(i-e);if(e=i,o>0){if(150<=++t)return n}else t=0;return Co(n,r)}}(),Fo=Rr(function(t){var e=[];return ri(t).replace(ot,function(t,n,r,i){e.push(r?i.replace(ht,"$1"):n||t)}),e}),qo=Pr(function(t,e){return Br(t)?ae(t,ce(e,1,Br,!0)):[]}),Do=Pr(function(t,e){var n=dr(e);return Br(n)&&(n=W),Br(t)?ae(t,ce(e,1,Br,!0),Mn(n)):[]}),Bo=Pr(function(t,e){var n=dr(e);return Br(n)&&(n=W),Br(t)?ae(t,ce(e,1,Br,!0),W,n):[]}),Lo=Pr(function(t){var e=c(t,en);return e.length&&e[0]===t[0]?me(e):[]}),Mo=Pr(function(t){var e=dr(t),n=c(t,en);return e===dr(n)?e=W:n.pop(),n.length&&n[0]===t[0]?me(n,Mn(e)):[]}),Uo=Pr(function(t){var e=dr(t),n=c(t,en);return e===dr(n)?e=W:n.pop(),n.length&&n[0]===t[0]?me(n,W,e):[]}),Ho=Pr(vr),Vo=Pr(function(t,e){e=ce(e,1);var n=t?t.length:0,r=te(t,e);return Le(t,c(e,function(t){return Zn(t,n)?+t:t}).sort(sn)),r}),Wo=Pr(function(t){return Je(ce(t,1,Br,!0))}),zo=Pr(function(t){var e=dr(t);return Br(e)&&(e=W),Je(ce(t,1,Br,!0),Mn(e))}),Ko=Pr(function(t){var e=dr(t);return Br(e)&&(e=W),Je(ce(t,1,Br,!0),W,e)}),$o=Pr(function(t,e){return Br(t)?ae(t,e):[]}),Go=Pr(function(t){return Ze(s(t,Br))}),Qo=Pr(function(t){var e=dr(t);return Br(e)&&(e=W),Ze(s(t,Br),Mn(e))}),Jo=Pr(function(t){var e=dr(t);return Br(e)&&(e=W),Ze(s(t,Br),W,e)}),Xo=Pr(br),Yo=Pr(function(t){var e=t.length,e=e>1?t[e-1]:W,e="function"==typeof e?(t.pop(),e):W;return mr(t,e)}),Zo=Pr(function(t){function e(e){return te(e,t)}t=ce(t,1);var n=t.length,r=n?t[0]:0,i=this.__wrapped__;return!(n>1||this.__actions__.length)&&i instanceof Dt&&Zn(r)?(i=i.slice(r,+r+(n?1:0)),i.__actions__.push({func:wr,args:[e],thisArg:W}),new qt(i,this.__chain__).thru(function(t){return n&&!t.length&&t.push(W),t})):this.thru(e)}),ta=pn(function(t,e,n){Ai.call(t,n)?++t[n]:t[n]=1}),ea=kn(hr),na=kn(pr),ra=pn(function(t,e,n){Ai.call(t,n)?t[n].push(e):t[n]=[e]}),ia=Pr(function(t,e,r){var i=-1,o="function"==typeof e,a=er(e),s=Dr(t)?Array(t.length):[];return Eo(t,function(t){var u=o?e:a&&null!=t?t[e]:W;s[++i]=u?n(u,t,r):we(t,e,r)}),s}),oa=pn(function(t,e,n){t[n]=e}),aa=pn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),sa=Pr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&tr(t,e[0],e[1])?e=[]:n>2&&tr(e[0],e[1],e[2])&&(e=[e[0]]),
e=1==e.length&&ba(e[0])?e[0]:ce(e,1,Yn),Re(t,e,[])}),ua=Pr(function(t,e,n){var r=1;if(n.length)var i=B(n,Ln(ua)),r=32|r;return Fn(t,r,e,n,i)}),la=Pr(function(t,e,n){var r=3;if(n.length)var i=B(n,Ln(la)),r=32|r;return Fn(e,r,t,n,i)}),ca=Pr(function(t,e){return oe(t,1,e)}),fa=Pr(function(t,e,n){return oe(t,ei(e)||0,n)});Rr.Cache=Ht;var ha=Pr(function(t,e){e=1==e.length&&ba(e[0])?c(e[0],S(Mn())):c(ce(e,1,Yn),S(Mn()));var r=e.length;return Pr(function(i){for(var o=-1,a=to(i.length,r);++o<a;)i[o]=e[o].call(this,i[o]);return n(t,this,i)})}),pa=Pr(function(t,e){var n=B(e,Ln(pa));return Fn(t,32,W,e,n)}),ga=Pr(function(t,e){var n=B(e,Ln(ga));return Fn(t,64,W,e,n)}),da=Pr(function(t,e){return Fn(t,256,W,W,W,ce(e,1))}),va=An(ve),ya=An(function(t,e){return t>=e}),ba=Array.isArray,ma=Di?function(t){return t instanceof Di}:mi,_a=An(Oe),wa=An(function(t,e){return e>=t}),ka=gn(function(t,e){if(po||rr(e)||Dr(e))fn(e,ai(e),t);else for(var n in e)Ai.call(e,n)&&Jt(t,n,e[n])}),xa=gn(function(t,e){if(po||rr(e)||Dr(e))fn(e,si(e),t);else for(var n in e)Jt(t,n,e[n])}),Ea=gn(function(t,e,n,r){fn(e,si(e),t,r)}),Sa=gn(function(t,e,n,r){fn(e,ai(e),t,r)}),ja=Pr(function(t,e){return te(t,ce(e,1))}),Oa=Pr(function(t){return t.push(W,Kt),n(Ea,W,t)}),Ca=Pr(function(t){return t.push(W,or),n(Ra,W,t)}),Na=Sn(function(t,e,n){t[e]=n},hi(pi)),Ta=Sn(function(t,e,n){Ai.call(t,e)?t[e].push(n):t[e]=[n]},Mn),Aa=Pr(we),Ia=gn(function(t,e,n){Ae(t,e,n)}),Ra=gn(function(t,e,n,r){Ae(t,e,n,r)}),Pa=Pr(function(t,e){return null==t?{}:(e=c(ce(e,1),sr),Pe(t,ae(de(t,si,Io),e)))}),Fa=Pr(function(t,e){return null==t?{}:Pe(t,c(ce(e,1),sr))}),qa=Pn(ai),Da=Pn(si),Ba=mn(function(t,e,n){return e=e.toLowerCase(),t+(n?li(e):e)}),La=mn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ma=mn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Ua=bn("toLowerCase"),Ha=mn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Va=mn(function(t,e,n){return t+(n?" ":"")+za(e)}),Wa=mn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),za=bn("toUpperCase"),Ka=Pr(function(t,e){try{return n(t,W,e)}catch(r){return Lr(r)?r:new wi(r)}}),$a=Pr(function(t,e){return i(ce(e,1),function(e){e=sr(e),t[e]=ua(t[e],t)}),t}),Ga=xn(),Qa=xn(!0),Ja=Pr(function(t,e){return function(n){return we(n,t,e)}}),Xa=Pr(function(t,e){return function(n){return we(t,n,e)}}),Ya=On(c),Za=On(a),ts=On(g),es=Tn(),ns=Tn(!0),rs=jn(function(t,e){return t+e}),is=Rn("ceil"),os=jn(function(t,e){return t/e}),as=Rn("floor"),ss=jn(function(t,e){return t*e}),us=Rn("round"),ls=jn(function(t,e){return t-e});return St.after=function(t,e){if("function"!=typeof e)throw new Ei("Expected a function");return t=Zr(t),function(){return 1>--t?e.apply(this,arguments):void 0}},St.ary=Cr,St.assign=ka,St.assignIn=xa,St.assignInWith=Ea,St.assignWith=Sa,St.at=ja,St.before=Nr,St.bind=ua,St.bindAll=$a,St.bindKey=la,St.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ba(t)?t:[t]},St.chain=_r,St.chunk=function(t,e,n){if(e=(n?tr(t,e,n):e===W)?1:Zi(Zr(e),0),n=t?t.length:0,!n||1>e)return[];for(var r=0,i=0,o=Array($i(n/e));n>r;)o[i++]=Ve(t,r,r+=e);return o},St.compact=function(t){for(var e=-1,n=t?t.length:0,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},St.concat=function(){for(var t=arguments.length,e=Array(t?t-1:0),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return t?f(ba(n)?cn(n):[n],ce(e,1)):[]},St.cond=function(t){var e=t?t.length:0,r=Mn();return t=e?c(t,function(t){if("function"!=typeof t[1])throw new Ei("Expected a function");return[r(t[0]),t[1]]}):[],Pr(function(r){for(var i=-1;++i<e;){var o=t[i];if(n(o[0],this,r))return n(o[1],this,r)}})},St.conforms=function(t){return re(ne(t,!0))},St.constant=hi,St.countBy=ta,St.create=function(t,e){var n=ie(t);return e?Zt(n,e):n},St.curry=Tr,St.curryRight=Ar,St.debounce=Ir,St.defaults=Oa,St.defaultsDeep=Ca,St.defer=ca,St.delay=fa,St.difference=qo,St.differenceBy=Do,St.differenceWith=Bo,St.drop=cr,St.dropRight=fr,St.dropRightWhile=function(t,e){return t&&t.length?Xe(t,Mn(e,3),!0,!0):[]},St.dropWhile=function(t,e){return t&&t.length?Xe(t,Mn(e,3),!0):[]},St.fill=function(t,e,n,r){var i=t?t.length:0;if(!i)return[];for(n&&"number"!=typeof n&&tr(t,e,n)&&(n=0,r=i),i=t.length,n=Zr(n),0>n&&(n=-n>i?0:i+n),r=r===W||r>i?i:Zr(r),0>r&&(r+=i),r=n>r?0:ti(r);r>n;)t[n++]=e;return t},St.filter=function(t,e){return(ba(t)?s:le)(t,Mn(e,3))},St.flatMap=function(t,e){return ce(Sr(t,e),1)},St.flatMapDeep=function(t,e){return ce(Sr(t,e),z)},St.flatMapDepth=function(t,e,n){return n=n===W?1:Zr(n),ce(Sr(t,e),n)},St.flatten=function(t){return t&&t.length?ce(t,1):[]},St.flattenDeep=function(t){return t&&t.length?ce(t,z):[]},St.flattenDepth=function(t,e){return t&&t.length?(e=e===W?1:Zr(e),ce(t,e)):[]},St.flip=function(t){return Fn(t,512)},St.flow=Ga,St.flowRight=Qa,St.fromPairs=function(t){for(var e=-1,n=t?t.length:0,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},St.functions=function(t){return null==t?[]:pe(t,ai(t))},St.functionsIn=function(t){return null==t?[]:pe(t,si(t))},St.groupBy=ra,St.initial=function(t){return fr(t,1)},St.intersection=Lo,St.intersectionBy=Mo,St.intersectionWith=Uo,St.invert=Na,St.invertBy=Ta,St.invokeMap=ia,St.iteratee=gi,St.keyBy=oa,St.keys=ai,St.keysIn=si,St.map=Sr,St.mapKeys=function(t,e){var n={};return e=Mn(e,3),fe(t,function(t,r,i){n[e(t,r,i)]=t}),n},St.mapValues=function(t,e){var n={};return e=Mn(e,3),fe(t,function(t,r,i){n[r]=e(t,r,i)}),n},St.matches=function(t){return Ne(ne(t,!0))},St.matchesProperty=function(t,e){return Te(t,ne(e,!0))},St.memoize=Rr,St.merge=Ia,St.mergeWith=Ra,St.method=Ja,St.methodOf=Xa,St.mixin=di,St.negate=function(t){if("function"!=typeof t)throw new Ei("Expected a function");return function(){return!t.apply(this,arguments)}},St.nthArg=function(t){return t=Zr(t),Pr(function(e){return Ie(e,t)})},St.omit=Pa,St.omitBy=function(t,e){return e=Mn(e),Fe(t,function(t,n){return!e(t,n)})},St.once=function(t){return Nr(2,t)},St.orderBy=function(t,e,n,r){return null==t?[]:(ba(e)||(e=null==e?[]:[e]),n=r?W:n,ba(n)||(n=null==n?[]:[n]),Re(t,e,n))},St.over=Ya,St.overArgs=ha,St.overEvery=Za,St.overSome=ts,St.partial=pa,St.partialRight=ga,St.partition=aa,St.pick=Fa,St.pickBy=function(t,e){return null==t?{}:Fe(t,Mn(e))},St.property=yi,St.propertyOf=function(t){return function(e){return null==t?W:ge(t,e)}},St.pull=Ho,St.pullAll=vr,St.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Be(t,e,Mn(n)):t},St.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Be(t,e,W,n):t},St.pullAt=Vo,St.range=es,St.rangeRight=ns,St.rearg=da,St.reject=function(t,e){var n=ba(t)?s:le;return e=Mn(e,3),n(t,function(t,n,r){return!e(t,n,r)})},St.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Mn(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Le(t,i),n},St.rest=Pr,St.reverse=yr,St.sampleSize=jr,St.set=function(t,e,n){return null==t?t:He(t,e,n)},St.setWith=function(t,e,n,r){return r="function"==typeof r?r:W,null==t?t:He(t,e,n,r)},St.shuffle=function(t){return jr(t,4294967295)},St.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&tr(t,e,n)?(e=0,n=r):(e=null==e?0:Zr(e),n=n===W?r:Zr(n)),Ve(t,e,n)):[]},St.sortBy=sa,St.sortedUniq=function(t){return t&&t.length?$e(t):[]},St.sortedUniqBy=function(t,e){return t&&t.length?$e(t,Mn(e)):[]},St.split=function(t,e,n){return n&&"number"!=typeof n&&tr(t,e,n)&&(e=n=W),n=n===W?4294967295:n>>>0,n?(t=ri(t))&&("string"==typeof e||null!=e&&!$r(e))&&(e=Qe(e),""==e&&At.test(t))?rn(t.match(Nt),0,n):oo.call(t,e,n):[]},St.spread=function(t,e){if("function"!=typeof t)throw new Ei("Expected a function");return e=e===W?0:Zi(Zr(e),0),Pr(function(r){var i=r[e];return r=rn(r,0,e),i&&f(r,i),n(t,this,r)})},St.tail=function(t){return cr(t,1)},St.take=function(t,e,n){return t&&t.length?(e=n||e===W?1:Zr(e),Ve(t,0,0>e?0:e)):[]},St.takeRight=function(t,e,n){var r=t?t.length:0;return r?(e=n||e===W?1:Zr(e),e=r-e,Ve(t,0>e?0:e,r)):[]},St.takeRightWhile=function(t,e){return t&&t.length?Xe(t,Mn(e,3),!1,!0):[]},St.takeWhile=function(t,e){return t&&t.length?Xe(t,Mn(e,3)):[]},St.tap=function(t,e){return e(t),t},St.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ei("Expected a function");return Vr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ir(t,e,{leading:r,maxWait:e,trailing:i})},St.thru=wr,St.toArray=Xr,St.toPairs=qa,St.toPairsIn=Da,St.toPath=function(t){return ba(t)?c(t,sr):Qr(t)?[t]:cn(Fo(t))},St.toPlainObject=ni,St.transform=function(t,e,n){var r=ba(t)||Jr(t);if(e=Mn(e,4),null==n)if(r||Vr(t)){var o=t.constructor;n=r?ba(t)?new o:[]:Mr(o)?ie(Qi(Object(t))):{}}else n={};return(r?i:fe)(t,function(t,r,i){return e(n,t,r,i)}),n},St.unary=function(t){return Cr(t,1)},St.union=Wo,St.unionBy=zo,St.unionWith=Ko,St.uniq=function(t){return t&&t.length?Je(t):[]},St.uniqBy=function(t,e){return t&&t.length?Je(t,Mn(e)):[]},St.uniqWith=function(t,e){return t&&t.length?Je(t,W,e):[]},St.unset=function(t,e){var n;if(null==t)n=!0;else{n=t;var r=e,r=er(r,n)?[r]:nn(r);n=ar(n,r),r=sr(dr(r)),n=!(null!=n&&ye(n,r))||delete n[r]}return n},St.unzip=br,St.unzipWith=mr,St.update=function(t,e,n){return null==t?t:He(t,e,("function"==typeof n?n:pi)(ge(t,e)),void 0)},St.updateWith=function(t,e,n,r){return r="function"==typeof r?r:W,null!=t&&(t=He(t,e,("function"==typeof n?n:pi)(ge(t,e)),r)),t},St.values=ui,St.valuesIn=function(t){return null==t?[]:j(t,si(t))},St.without=$o,St.words=fi,St.wrap=function(t,e){return e=null==e?pi:e,pa(e,t)},St.xor=Go,St.xorBy=Qo,St.xorWith=Jo,St.zip=Xo,St.zipObject=function(t,e){return tn(t||[],e||[],Jt)},St.zipObjectDeep=function(t,e){return tn(t||[],e||[],He)},St.zipWith=Yo,St.entries=qa,St.entriesIn=Da,St.extend=xa,St.extendWith=Ea,di(St,St),St.add=rs,St.attempt=Ka,St.camelCase=Ba,St.capitalize=li,St.ceil=is,St.clamp=function(t,e,n){return n===W&&(n=e,e=W),n!==W&&(n=ei(n),n=n===n?n:0),e!==W&&(e=ei(e),e=e===e?e:0),ee(ei(t),e,n)},St.clone=function(t){return ne(t,!1,!0)},St.cloneDeep=function(t){return ne(t,!0,!0)},St.cloneDeepWith=function(t,e){return ne(t,!0,!0,e)},St.cloneWith=function(t,e){return ne(t,!1,!0,e)},St.deburr=ci,St.divide=os,St.endsWith=function(t,e,n){t=ri(t),e=Qe(e);var r=t.length;return n=n===W?r:ee(Zr(n),0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n},St.eq=Fr,St.escape=function(t){return(t=ri(t))&&Z.test(t)?t.replace(X,I):t},St.escapeRegExp=function(t){return(t=ri(t))&&st.test(t)?t.replace(at,"\\$&"):t},St.every=function(t,e,n){var r=ba(t)?a:se;return n&&tr(t,e,n)&&(e=W),r(t,Mn(e,3))},St.find=ea,St.findIndex=hr,St.findKey=function(t,e){return d(t,Mn(e,3),fe)},St.findLast=na,St.findLastIndex=pr,St.findLastKey=function(t,e){return d(t,Mn(e,3),he)},St.floor=as,St.forEach=xr,St.forEachRight=Er,St.forIn=function(t,e){return null==t?t:jo(t,Mn(e,3),si)},St.forInRight=function(t,e){return null==t?t:Oo(t,Mn(e,3),si)},St.forOwn=function(t,e){return t&&fe(t,Mn(e,3))},St.forOwnRight=function(t,e){return t&&he(t,Mn(e,3))},St.get=ii,St.gt=va,St.gte=ya,St.has=function(t,e){return null!=t&&Kn(t,e,ye)},St.hasIn=oi,St.head=gr,St.identity=pi,St.includes=function(t,e,n,r){return t=Dr(t)?t:ui(t),n=n&&!r?Zr(n):0,r=t.length,0>n&&(n=Zi(r+n,0)),Gr(t)?r>=n&&-1<t.indexOf(e,n):!!r&&-1<y(t,e,n)},St.indexOf=function(t,e,n){var r=t?t.length:0;return r?(n=null==n?0:Zr(n),0>n&&(n=Zi(r+n,0)),y(t,e,n)):-1},St.inRange=function(t,e,n){return e=ei(e)||0,n===W?(n=e,e=0):n=ei(n)||0,t=ei(t),t>=to(e,n)&&t<Zi(e,n)},St.invoke=Aa,St.isArguments=qr,St.isArray=ba,St.isArrayBuffer=function(t){return Wr(t)&&"[object ArrayBuffer]"==Pi.call(t)},St.isArrayLike=Dr,St.isArrayLikeObject=Br,St.isBoolean=function(t){return!0===t||!1===t||Wr(t)&&"[object Boolean]"==Pi.call(t)},St.isBuffer=ma,St.isDate=function(t){return Wr(t)&&"[object Date]"==Pi.call(t)},St.isElement=function(t){return!!t&&1===t.nodeType&&Wr(t)&&!Kr(t)},St.isEmpty=function(t){if(Dr(t)&&(ba(t)||Gr(t)||Mr(t.splice)||qr(t)||ma(t)))return!t.length;if(Wr(t)){var e=zn(t);if("[object Map]"==e||"[object Set]"==e)return!t.size}for(var n in t)if(Ai.call(t,n))return!1;return!(po&&ai(t).length)},St.isEqual=function(t,e){return ke(t,e)},St.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:W)?n(t,e):W;return r===W?ke(t,e,n):!!r},St.isError=Lr,St.isFinite=function(t){return"number"==typeof t&&Ji(t)},St.isFunction=Mr,St.isInteger=Ur,St.isLength=Hr,St.isMap=function(t){return Wr(t)&&"[object Map]"==zn(t)},St.isMatch=function(t,e){return t===e||xe(t,e,Hn(e))},St.isMatchWith=function(t,e,n){return n="function"==typeof n?n:W,xe(t,e,Hn(e),n)},St.isNaN=function(t){return zr(t)&&t!=+t},St.isNative=function(t){if(Ro(t))throw new wi("This method is not supported with `core-js`. Try https://github.com/es-shims.");return Ee(t)},St.isNil=function(t){return null==t},St.isNull=function(t){return null===t},St.isNumber=zr,St.isObject=Vr,St.isObjectLike=Wr,St.isPlainObject=Kr,St.isRegExp=$r,St.isSafeInteger=function(t){return Ur(t)&&t>=-9007199254740991&&9007199254740991>=t},St.isSet=function(t){return Wr(t)&&"[object Set]"==zn(t)},St.isString=Gr,St.isSymbol=Qr,St.isTypedArray=Jr,St.isUndefined=function(t){return t===W},St.isWeakMap=function(t){return Wr(t)&&"[object WeakMap]"==zn(t)},St.isWeakSet=function(t){return Wr(t)&&"[object WeakSet]"==Pi.call(t)},St.join=function(t,e){return t?Xi.call(t,e):""},St.kebabCase=La,St.last=dr,St.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if(n!==W&&(i=Zr(n),i=(0>i?Zi(r+i,0):to(i,r-1))+1),e!==e)return P(t,i-1,!0);for(;i--;)if(t[i]===e)return i;return-1},St.lowerCase=Ma,St.lowerFirst=Ua,St.lt=_a,St.lte=wa,St.max=function(t){return t&&t.length?ue(t,pi,ve):W},St.maxBy=function(t,e){return t&&t.length?ue(t,Mn(e),ve):W},St.mean=function(t){return m(t,pi)},St.meanBy=function(t,e){return m(t,Mn(e))},St.min=function(t){return t&&t.length?ue(t,pi,Oe):W},St.minBy=function(t,e){return t&&t.length?ue(t,Mn(e),Oe):W},St.stubArray=bi,St.stubFalse=mi,St.stubObject=function(){return{}},St.stubString=function(){return""},St.stubTrue=function(){return!0},St.multiply=ss,St.nth=function(t,e){return t&&t.length?Ie(t,Zr(e)):W},St.noConflict=function(){return $t._===this&&($t._=Fi),this},St.noop=vi,St.now=Or,St.pad=function(t,e,n){t=ri(t);var r=(e=Zr(e))?U(t):0;return!e||r>=e?t:(e=(e-r)/2,Cn(Gi(e),n)+t+Cn($i(e),n))},St.padEnd=function(t,e,n){t=ri(t);var r=(e=Zr(e))?U(t):0;return e&&e>r?t+Cn(e-r,n):t},St.padStart=function(t,e,n){t=ri(t);var r=(e=Zr(e))?U(t):0;return e&&e>r?Cn(e-r,n)+t:t},St.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),t=ri(t).replace(ut,""),eo(t,e||(dt.test(t)?16:10))},St.random=function(t,e,n){if(n&&"boolean"!=typeof n&&tr(t,e,n)&&(e=n=W),n===W&&("boolean"==typeof e?(n=e,e=W):"boolean"==typeof t&&(n=t,t=W)),t===W&&e===W?(t=0,e=1):(t=ei(t)||0,e===W?(e=t,t=0):e=ei(e)||0),t>e){var r=t;t=e,e=r}return n||t%1||e%1?(n=no(),to(t+n*(e-t+Mt("1e-"+((n+"").length-1))),e)):Me(t,e)},St.reduce=function(t,e,n){var r=ba(t)?h:_,i=3>arguments.length;return r(t,Mn(e,4),n,i,Eo)},St.reduceRight=function(t,e,n){var r=ba(t)?p:_,i=3>arguments.length;return r(t,Mn(e,4),n,i,So)},St.repeat=function(t,e,n){return e=(n?tr(t,e,n):e===W)?1:Zr(e),Ue(ri(t),e)},St.replace=function(){var t=arguments,e=ri(t[0]);return 3>t.length?e:ro.call(e,t[1],t[2])},St.result=function(t,e,n){e=er(e,t)?[e]:nn(e);var r=-1,i=e.length;for(i||(t=W,i=1);++r<i;){var o=null==t?W:t[sr(e[r])];o===W&&(r=i,o=n),t=Mr(o)?o.call(t):o}return t},St.round=us,St.runInContext=V,St.sample=function(t){t=Dr(t)?t:ui(t);var e=t.length;return e>0?t[Me(0,e-1)]:W},St.size=function(t){if(null==t)return 0;if(Dr(t)){var e=t.length;return e&&Gr(t)?U(t):e}return Wr(t)&&(e=zn(t),"[object Map]"==e||"[object Set]"==e)?t.size:ai(t).length},St.snakeCase=Ha,St.some=function(t,e,n){var r=ba(t)?g:We;return n&&tr(t,e,n)&&(e=W),r(t,Mn(e,3))},St.sortedIndex=function(t,e){return ze(t,e)},St.sortedIndexBy=function(t,e,n){return Ke(t,e,Mn(n))},St.sortedIndexOf=function(t,e){var n=t?t.length:0;if(n){var r=ze(t,e);if(n>r&&Fr(t[r],e))return r}return-1},St.sortedLastIndex=function(t,e){return ze(t,e,!0)},St.sortedLastIndexBy=function(t,e,n){return Ke(t,e,Mn(n),!0)},St.sortedLastIndexOf=function(t,e){if(t&&t.length){var n=ze(t,e,!0)-1;if(Fr(t[n],e))return n}return-1},St.startCase=Va,St.startsWith=function(t,e,n){return t=ri(t),n=ee(Zr(n),0,t.length),t.lastIndexOf(Qe(e),n)==n},St.subtract=ls,St.sum=function(t){return t&&t.length?k(t,pi):0},St.sumBy=function(t,e){return t&&t.length?k(t,Mn(e)):0},St.template=function(t,e,n){var r=St.templateSettings;n&&tr(t,e,n)&&(e=W),t=ri(t),e=Ea({},e,r,Kt),n=Ea({},e.imports,r.imports,Kt);var i,o,a=ai(n),s=j(n,a),u=0;n=e.interpolate||kt;var l="__p+='";n=xi((e.escape||kt).source+"|"+n.source+"|"+(n===nt?pt:kt).source+"|"+(e.evaluate||kt).source+"|$","g");var c="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";if(t.replace(n,function(e,n,r,a,s,c){return r||(r=a),l+=t.slice(u,c).replace(xt,R),n&&(i=!0,l+="'+__e("+n+")+'"),s&&(o=!0,l+="';"+s+";\n__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),u=c+e.length,e}),l+="';",(e=e.variable)||(l="with(obj){"+l+"}"),l=(o?l.replace($,""):l).replace(G,"$1").replace(Q,"$1;"),l="function("+(e||"obj")+"){"+(e?"":"obj||(obj={});")+"var __t,__p=''"+(i?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",e=Ka(function(){return Function(a,c+"return "+l).apply(W,s)}),e.source=l,Lr(e))throw e;return e},St.times=function(t,e){if(t=Zr(t),1>t||t>9007199254740991)return[];var n=4294967295,r=to(t,4294967295);for(e=Mn(e),t-=4294967295,r=x(r,e);++n<t;)e(n);return r},St.toFinite=Yr,St.toInteger=Zr,St.toLength=ti,St.toLower=function(t){return ri(t).toLowerCase()},St.toNumber=ei,St.toSafeInteger=function(t){return ee(Zr(t),-9007199254740991,9007199254740991)},St.toString=ri,St.toUpper=function(t){return ri(t).toUpperCase()},St.trim=function(t,e,n){return(t=ri(t))&&(n||e===W)?t.replace(ut,""):t&&(e=Qe(e))?(t=t.match(Nt),e=e.match(Nt),rn(t,C(t,e),N(t,e)+1).join("")):t},St.trimEnd=function(t,e,n){return(t=ri(t))&&(n||e===W)?t.replace(ct,""):t&&(e=Qe(e))?(t=t.match(Nt),e=N(t,e.match(Nt))+1,rn(t,0,e).join("")):t},St.trimStart=function(t,e,n){return(t=ri(t))&&(n||e===W)?t.replace(lt,""):t&&(e=Qe(e))?(t=t.match(Nt),e=C(t,e.match(Nt)),rn(t,e).join("")):t},St.truncate=function(t,e){var n=30,r="...";if(Vr(e))var i="separator"in e?e.separator:i,n="length"in e?Zr(e.length):n,r="omission"in e?Qe(e.omission):r;t=ri(t);var o=t.length;if(At.test(t))var a=t.match(Nt),o=a.length;if(n>=o)return t;if(o=n-U(r),1>o)return r;if(n=a?rn(a,0,o).join(""):t.slice(0,o),i===W)return n+r;if(a&&(o+=n.length-o),$r(i)){if(t.slice(o).search(i)){var s=n;for(i.global||(i=xi(i.source,ri(gt.exec(i))+"g")),i.lastIndex=0;a=i.exec(s);)var u=a.index;n=n.slice(0,u===W?o:u)}}else t.indexOf(Qe(i),o)!=o&&(i=n.lastIndexOf(i),i>-1&&(n=n.slice(0,i)));return n+r},St.unescape=function(t){return(t=ri(t))&&Y.test(t)?t.replace(J,H):t},St.uniqueId=function(t){var e=++Ii;return ri(t)+e},St.upperCase=Wa,St.upperFirst=za,St.each=xr,St.eachRight=Er,St.first=gr,di(St,function(){var t={};return fe(St,function(e,n){Ai.call(St.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),St.VERSION="4.13.1",i("bind bindKey curry curryRight partial partialRight".split(" "),function(t){St[t].placeholder=St}),i(["drop","take"],function(t,e){Dt.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new Dt(this);n=n===W?1:Zi(Zr(n),0);var i=this.clone();return r?i.__takeCount__=to(n,i.__takeCount__):i.__views__.push({size:to(n,4294967295),type:t+(0>i.__dir__?"Right":"")}),i},Dt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),i(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;Dt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Mn(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),i(["head","last"],function(t,e){var n="take"+(e?"Right":"");Dt.prototype[t]=function(){return this[n](1).value()[0]}}),i(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Dt.prototype[t]=function(){return this.__filtered__?new Dt(this):this[n](1)}}),Dt.prototype.compact=function(){return this.filter(pi)},Dt.prototype.find=function(t){return this.filter(t).head()},Dt.prototype.findLast=function(t){return this.reverse().find(t)},Dt.prototype.invokeMap=Pr(function(t,e){return"function"==typeof t?new Dt(this):this.map(function(n){return we(n,t,e)})}),Dt.prototype.reject=function(t){return t=Mn(t,3),this.filter(function(e){return!t(e)})},Dt.prototype.slice=function(t,e){t=Zr(t);var n=this;return n.__filtered__&&(t>0||0>e)?new Dt(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==W&&(e=Zr(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},Dt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Dt.prototype.toArray=function(){return this.take(4294967295)},fe(Dt.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=St[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(St.prototype[e]=function(){function e(t){return t=i.apply(St,f([t],s)),r&&h?t[0]:t}var a=this.__wrapped__,s=r?[1]:arguments,u=a instanceof Dt,l=s[0],c=u||ba(a);c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var h=this.__chain__,p=!!this.__actions__.length,l=o&&!h,u=u&&!p;return!o&&c?(a=u?a:new Dt(this),a=t.apply(a,s),a.__actions__.push({func:wr,args:[e],thisArg:W}),new qt(a,h)):l&&u?t.apply(this,s):(a=this.thru(e),l?r?a.value()[0]:a.value():a)})}),i("pop push shift sort splice unshift".split(" "),function(t){var e=Si[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);St.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ba(i)?i:[],t)}return this[n](function(n){return e.apply(ba(n)?n:[],t)})}}),fe(Dt.prototype,function(t,e){var n=St[e];if(n){var r=n.name+"";(go[r]||(go[r]=[])).push({name:e,func:n})}}),go[En(W,2).name]=[{name:"wrapper",func:W}],Dt.prototype.clone=function(){var t=new Dt(this.__wrapped__);return t.__actions__=cn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=cn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=cn(this.__views__),t},Dt.prototype.reverse=function(){if(this.__filtered__){var t=new Dt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},Dt.prototype.value=function(){var t,e=this.__wrapped__.value(),n=this.__dir__,r=ba(e),i=0>n,o=r?e.length:0;t=o;for(var a=this.__views__,s=0,u=-1,l=a.length;++u<l;){var c=a[u],f=c.size;switch(c.type){case"drop":s+=f;break;case"dropRight":t-=f;break;case"take":t=to(t,s+f);break;case"takeRight":s=Zi(s,t-f)}}if(t={start:s,end:t},a=t.start,s=t.end,t=s-a,i=i?s:a-1,a=this.__iteratees__,s=a.length,u=0,l=to(t,this.__takeCount__),!r||200>o||o==t&&l==t)return Ye(e,this.__actions__);r=[];t:for(;t--&&l>u;){for(i+=n,o=-1,c=e[i];++o<s;){var h=a[o],f=h.type,h=(0,h.iteratee)(c);if(2==f)c=h;else if(!h){if(1==f)continue t;break t}}r[u++]=c}return r},St.prototype.at=Zo,St.prototype.chain=function(){return _r(this)},St.prototype.commit=function(){return new qt(this.value(),this.__chain__)},St.prototype.next=function(){this.__values__===W&&(this.__values__=Xr(this.value()));var t=this.__index__>=this.__values__.length,e=t?W:this.__values__[this.__index__++];return{done:t,value:e}},St.prototype.plant=function(t){for(var e,n=this;n instanceof jt;){var r=lr(n);r.__index__=0,r.__values__=W,e?i.__wrapped__=r:e=r;var i=r,n=n.__wrapped__}return i.__wrapped__=t,e},St.prototype.reverse=function(){var t=this.__wrapped__;return t instanceof Dt?(this.__actions__.length&&(t=new Dt(this)),t=t.reverse(),t.__actions__.push({func:wr,args:[yr],thisArg:W}),new qt(t,this.__chain__)):this.thru(yr)},St.prototype.toJSON=St.prototype.valueOf=St.prototype.value=function(){return Ye(this.__wrapped__,this.__actions__)},Vi&&(St.prototype[Vi]=kr),St}var W,z=1/0,K=NaN,$=/\b__p\+='';/g,G=/\b(__p\+=)''\+/g,Q=/(__e\(.*?\)|\b__t\))\+'';/g,J=/&(?:amp|lt|gt|quot|#39|#96);/g,X=/[&<>"'`]/g,Y=RegExp(J.source),Z=RegExp(X.source),tt=/<%-([\s\S]+?)%>/g,et=/<%([\s\S]+?)%>/g,nt=/<%=([\s\S]+?)%>/g,rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,it=/^\w*$/,ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,at=/[\\^$.*+?()[\]{}|]/g,st=RegExp(at.source),ut=/^\s+|\s+$/g,lt=/^\s+/,ct=/\s+$/,ft=/[a-zA-Z0-9]+/g,ht=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,dt=/^0x/i,vt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,bt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,kt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,Et="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*",St="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+Et,jt="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]?|[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",Ot=RegExp("['’]","g"),Ct=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),Nt=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+jt+Et,"g"),Tt=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d+",St].join("|"),"g"),At=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),It=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Rt="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ isFinite parseInt setTimeout".split(" "),Pt={};Pt["[object Float32Array]"]=Pt["[object Float64Array]"]=Pt["[object Int8Array]"]=Pt["[object Int16Array]"]=Pt["[object Int32Array]"]=Pt["[object Uint8Array]"]=Pt["[object Uint8ClampedArray]"]=Pt["[object Uint16Array]"]=Pt["[object Uint32Array]"]=!0,Pt["[object Arguments]"]=Pt["[object Array]"]=Pt["[object ArrayBuffer]"]=Pt["[object Boolean]"]=Pt["[object DataView]"]=Pt["[object Date]"]=Pt["[object Error]"]=Pt["[object Function]"]=Pt["[object Map]"]=Pt["[object Number]"]=Pt["[object Object]"]=Pt["[object RegExp]"]=Pt["[object Set]"]=Pt["[object String]"]=Pt["[object WeakMap]"]=!1;var Ft={};Ft["[object Arguments]"]=Ft["[object Array]"]=Ft["[object ArrayBuffer]"]=Ft["[object DataView]"]=Ft["[object Boolean]"]=Ft["[object Date]"]=Ft["[object Float32Array]"]=Ft["[object Float64Array]"]=Ft["[object Int8Array]"]=Ft["[object Int16Array]"]=Ft["[object Int32Array]"]=Ft["[object Map]"]=Ft["[object Number]"]=Ft["[object Object]"]=Ft["[object RegExp]"]=Ft["[object Set]"]=Ft["[object String]"]=Ft["[object Symbol]"]=Ft["[object Uint8Array]"]=Ft["[object Uint8ClampedArray]"]=Ft["[object Uint16Array]"]=Ft["[object Uint32Array]"]=!0,Ft["[object Error]"]=Ft["[object Function]"]=Ft["[object WeakMap]"]=!1;var qt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Bt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mt=parseFloat,Ut=parseInt,Ht="object"==typeof exports&&exports,Vt=Ht&&"object"==typeof module&&module,Wt=Vt&&Vt.exports===Ht,zt=T("object"==typeof self&&self),Kt=T("object"==typeof this&&this),$t=T("object"==typeof global&&global)||zt||Kt||Function("return this")(),Gt=V();(zt||{})._=Gt,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return Gt}):Vt?((Vt.exports=Gt)._=Gt,Ht._=Gt):$t._=Gt}.call(this);var slice=Function.prototype.call.bind(Array.prototype.slice),flow_=function(t,e){return function(){var n=this,r=slice(arguments);return Promise.resolve(t.apply(n,r)).then(function(t){return r[0]=t,e.apply(n,r)})}};window.flow=function(){var t=slice(arguments);return _.foldl(t,flow_)},function(){var t=(console.log.bind(console),console.info.bind(console)),e=console.debug.bind(console);console.error.bind(console);e("Initializing hpm - the package manager for html apps..."),ODS=window.odsync;var n={};n.getConfig=function(){var t=new ydn.db.Storage("config",{stores:[{name:"backend",autoIncrement:!1}]});return t.get("backend","config").then(function(t){if(!(t&&t.url&&t.email&&t.accountId&&t.password))throw'ERROR; url, email, accoundId and password must be configured, see hpm.help("config")';return t})},n.getDb=function(t){return t||(t="work"),n.getConfig().then(function(e){var n=new ydn.db.Storage(e.accountId,{stores:[{name:"buckets",autoIncrement:!1},{name:"packages",autoIncrement:!1},{name:t,autoIncrement:!1}]});return{cfg:e,db:n}})},n.create=function(t,e,r,i,o){var a;if(!t)throw"ERROR: packageDef must be specified!";o||(o="work");var a;return n.getDb(o).then(function(n){a=n.db;var s=[a.get(o,t)];return e&&s.push(a.get(o,e)),r&&s.push(a.get(o,r)),i&&s.push(a.get(o,i)),Promise.all(s)}).then(function(t){var e={packageDef:t[0],html:t[1].v,css:t[2].v,js:t[3].v};if(!e.packageDef.name||!e.packageDef.description||!e.packageDef.version)throw'ERROR: package definition file missing mandatory fields, see hpm.help("create") for more information.';return a.put("buckets",e,"b_"+e.packageDef.name+"-"+e.packageDef.version)})},n.fetch=function(t,e,r,i){return i||(i="work"),n.getDb().then(function(n){var o=new Odata(n.cfg),a=n.db;o.fetch("/"+t,e+"$"+r).then(function(t){a.put(i,{v:t.data},r)})})},n.register=function(t){return n.getDb().then(function(e){return e.db.put("packages",{accountId:e.cfg.accountId,name:t},t)})},n.help=function(e){var n='\n\n-----\nSee hpm.help("config") for how to setup the database connection.';
if(!e){var r='-- Htmlapp package manager help --\n\n* hpm.help("register_account") - show setup help\n* hpm.help("create") - help with creating packages\n* hpm.help("work") - working with files\n\n* hpm.create(package_def_file, html_file, css_file, js_file, [work_store]) - create new package or update existing package.\n* hpm.fetch(accountId, bucket, filename, [work_store]) - fetch file from the repository to the local database.';return void t(r)}if("register_account"===e){var r='A little configuration needs to be done before hpm can be used:\n// Step one\nvar config = {\n\turl: "http://localhost:3000/", \n\temail: "joe@example.com"\n};\nvar db = new ydn.db.Storage("config", {stores: [{ name: "backend", autoIncrement: false }]});\nOdata.createAccount(config).then(function (res) {\n    config.accountId = res.data[1].accountId;\n  }, function (res) {\n    config.accountId = res.data[1].accountId;\n  })\n// Check that the accountId has been stored in config\n// Step two\nconfig.password = "check the mail for a password";\n// This also works if you have a odataserver in development mode\nOdata.resetPassword(config).then(function (res) {\nconfig.password = res.data[0].password\n}, console.log.bind("ERROR", console))\n//Step 3\ndb.put("backend", config, "config");';t(r)}else if("create"===e){var r='Your packages are saved in a database with the same name as your accountid and the \nobject store named buckets. The key for each packet is b_<package name>-<version>\nwhere <version> should be in the format X.Y.Z, e.g. 1.0.0, using so called \nsemantic versions, see semver.org\n\nThis is an example of a package definition file is created:\n\ndb.put("work", { \n\t   name: "hello",\n\t    description: "hello world example" ,\n\t    version: "0.0.1" ,\n\t    private: true , \n\t    permissions: null , \n\t    dependecies: "None (currently only for information, these needs to be fetched manually)"\n\t  }, "mypackage.json");\n\nThen create the package like this:\n\nhpm.create("mypackage.json", "hello.html", "hello.css", "hello.js", [work_store])\n\nCheck the results with:\n\ndb.get("buckets","b_hello-0.0.1").then(console.log.bind(console));';t(r)}else if("work"===e){var r='Open a database connection that can be used for files we work on:\n\nvar db; \nhpm.getConfig().then(function(cfg){\n\tdb = new ydn.db.Storage(cfg.accountId, \n\t\t{stores: [{ name: "work", autoIncrement: false },\n\t\t{ name: "buckets", autoIncrement: false }]}\n\t);\n});\n\nUse this simple Hello World app to test that everything works:\n\nvar html = "<htlm><body><h1>Hello World</h1></body></html>"\nvar js = "init = function() { console.log(\'init function\');};"\nvar css = "body {background: rgba(234, 159, 195, 0.8);}"\ndb.put("work", {v: html}, "hello.html");\ndb.put("work", {v: css}, "hello.css");\ndb.put("work", {v: js}, "hello.js");\n\nClear the object store "work"\ndb.clear("work");';t(r)}else if("register"===e){var r='Register a package so it can be downloaded by anyone (not implemented yet):\n\nhpm.register("hello");'+n;t(r)}else t("Uknown help topic: "+e)},window.hpm=n,e("hpm is loaded.")}(),function(){var t=console.log.bind(console),e=console.info.bind(console),n=console.debug.bind(console);console.error.bind(console);n("Initializing htmlapp..."),R=window.remote;var r=function(t){return"object"==typeof r.instance_?r.instance_:void(r.instance_=this)};r.prototype.init=function(t){var e=this;if(e.varps_={},document.addEventListener("click",i),t||(t={}),t.pageOptions||(t.pageOptions={title:"Apps developed with incredible speed!"}),e.createMainPage(t.pageOptions),t.dbName&&t.storeName){if(!t.dbName||!t.storeName)throw"ERROR: database name and store name must be specified!";e.dbName=t.dbName,e.storeName=t.storeName;var n={stores:[{name:t.storeName,autoIncrement:!1}]};return e.db=new ydn.db.Storage(e.dbName,n),Promise.resolve(!0)}if(!hpm)throw"ERROR: hpm not loaded. App.init with options must be used!";return hpm.getConfig().then(function(t){e.dbName=t.accountId,e.storeName="work",e.db=new ydn.db.Storage(t.accountId,{stores:[{name:e.storeName,autoIncrement:!1},{name:"buckets",autoIncrement:!1}]})})},r.prototype.keys=function(){return this.db.keys(this.storeName)},r.prototype.get=function(t){return this.db.get(this.storeName,t)},r.prototype.put=function(t,e){return this.db.put(this.storeName,e,t)},r.prototype.loadStyle=function(t,e,r){n("loadStyle");var i=e.head||e.getElementsByTagName("head")[0];if(r)for(;e.getElementsByTagName("style").length>0;)i.removeChild(e.getElementsByTagName("style")[0]);if(t){var o=e.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),i.appendChild(o)}},r.prototype.loadScript=function(t,e,r){if(n("loadScript:"+e),e=void 0!==e&&null!==e?"$$"+e+"$$":null,void 0===e||null===document.getElementById(e)){var r=r||document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");i.defer=!0,i.async=!1,i.text=t,null!==e&&(i.id=e),r.appendChild(i)}},r.prototype.createMainPage=function(t){var e=this;document.head.title=t.title?t.title:"";var n="html,body {  height: 100%}#varps {  height: 100%}";e.loadStyle(n,document,!1);var r='/*! normalize.css v3.0.2 | MIT License | git.io/normalize */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}';e.loadStyle(r,document,!1);var i=document.createElement("div");i.id="varps",document.body.appendChild(i)},r.prototype.load=function(t){var e=this;return new Promise(function(r,o){n("load app:",t);var c=function(t){n("createIFrame "+t.packageDef.name),t.html=a(t.html);var o=s("title",t.html,!1),c=(u("script",t.html),s("style",t.html,!1),u("body",t.html,!1)[0]),f=[c.inner],h=null,p=document.createElement("iframe");if(c.attr){var g=c.attr.trim();h=l(g.substr(15,g.length-15-1)),n("updateIframe "+t.packageDef.name+" send="+h)}""!==t.permissions&&(p.sandbox="allow-same-origin allow-scripts"),p.id=t.packageDef.name;var d=function(a){n("updateIframe "+t.packageDef.name+" (load event fired)");var s=a.target.contentDocument;if(s.body.innerHTML=f?f[0]:null,s.head.title=o?o[0]:null,p.style.width="100%",p.style.height="100%",p.style.border=0,p.hidden=!0,h){e.customEvents_.concat(h);for(var u=0;u<h.length;u++)document.addEventListener(h[u],i)}""!==t.packageDef.permissions&&(a.target.sandbox=t.packageDef.permissions,n("permissions set to: "+document.getElementById(p.id).sandbox)),t.css&&!t.noCSS&&(n("updateIframe with id "+t.packageDef.name+". Load CSS."),e.loadStyle(t.css,s,!1));for(var l=s.getElementsByTagName("script");l.length>0;)s.body.removeChild(l[0]);t.js&&!t.noJS&&(n("updateIframe with id "+t.name+". Load javascript."),e.loadScript(t.js,t.name+"_script",s.head)),p.contentWindow.init&&(n("Initializing frame."),p.contentWindow.init()),t.show&&e.show(t.name),r(null)};return p.addEventListener("load",d,!0),t.target.appendChild(p),p};try{e.db.get("buckets","b_"+t).then(function(t){t&&t.packageDef&&t.packageDef.name||o("ERROR: app name must me specified!"),t.packageDef.permissions||(t.packageDef.permissions="allow-scripts allow-forms"),t.target=document.getElementById("varps"),t.element=c(t),e.varps_[t.name]=t})}catch(f){n("load:"+t+":"+f),o(f)}})},r.prototype.unload=function(t){document.getElementById("varps").removeChild(document.getElementById(t))},r.prototype.show=function(t){n("show:"+t);var e=document.getElementById("varps"),r=document.getElementById(t);if(null!==r){for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].hidden=!0;r.hidden=!1,o(t,"gnaEvent","show")}};var i=function(t){var e=r.getInstance();if(t instanceof MouseEvent){var i=t.target.id.substring(3,t.target.id.length);n("handler:MouseEvent:"+i),Object.keys(e.varps_).indexOf(i)!==-1&&(e.show(i),n("handler:MouseEvent:dispatch:"+i))}if(e.customEvents_.indexOf(t.type)!==-1&&(n("handler:CustomEvent",t),t.detail.targets&&t.detail.message))for(var a=0;a<t.detail.targets.length;a++)o(t.detail.targets[a],t.type,t.detail.message)},o=function(t,e,n){var r=new CustomEvent(e,{detail:{message:n,time:new Date},bubbles:!0,cancelable:!0}),i=document.getElementById(t).contentDocument;i.dispatchEvent(r)},a=function(t){if(!t||0===t.length)return"";var e=t.indexOf("<!--"),n=t.indexOf("-->");if(e===-1||n===-1)return t;var r=t.substring(0,e);t=t.substring(n+3,t.length);var i=a(t);return r.concat(i)},s=function(t,e,n){if(!e||0===e.length)return[];var r=e.indexOf("<"+t),i=e.indexOf("</"+t+">");if(r===-1||i===-1)return[];var o=e.substring(r+t.length,e.length).indexOf(">");if(o===-1)return[];o+=r+t.length;var a,u=o-r,l=("</"+t+">").length;a=n?e.substring(r,i+l):e.substring(r+u+1,i),e=e.substring(i+l,e.length);var c=s(t,e,n);return[a].concat(c)},u=function(t,e){if(!e||0===e.length)return[];var n=e.indexOf("<"+t),r=e.indexOf("</"+t+">");if(n===-1||r===-1)return[];var i=e.substring(n+t.length,e.length).indexOf(">");if(i===-1)return[];i+=n+t.length;var o=i-n,a=("</"+t+">").length,s={};s.outer=e.substring(n,r+a),s.inner=e.substring(n+o+1,r),s.attr=e.substring(n+("<"+t).length,i),e=e.substring(r+a,e.length);var l=u(t,e);return[s].concat(l)},l=function(e){try{return JSON.parse(e)}catch(n){t("Error parsing JSON:"+n)}};r.help=function(t){if(!t){var n='-- Overview of Htmlapp --\n* Htmlapp.help("config") - customize the Htmlapp configuration\n* Htmlapp.help("register_account") - create an account and configure for Htmlapp\n* Htmlapp.help("hello") - show hello world example\n* Htmlapp.help("load") - load a new webapp in the browser window\n* Htmlapp.help("unload") - remove a webapp from the borwser window\n* Htmlapp.help("misc") - Miscellaneous';return void e(n)}var r='\n\n-----\nKeep in mind that you need to perform the initial configuration, see Htmlapp.help("config")';if("config"===t){var n='A little configuration needs to be done before hpm can be used:\nvar config = {\n\turl: "http://odatadev.gizur.com/", \n\temail: "joe@example.com",\n\taccountId: "a123456789",\n\tpassword: "secret"\n};\nvar db = new ydn.db.Storage("config", {stores: [{ name: "backend", autoIncrement: false }]});\ndb.put("backend", config, "config");\n\nshow the configuration like this:\ndb.get("backend","config").then(console.log.bind(console));';e(n)}else{if("register_account"===t)return hpm.help("register_account");if("hello"===t)hpm.help("work"),hpm.help("create"),this.help("load");else if("hello.old"===t){var n='This is the traditional hello world example. Copy and past this text to create the app.\n\nvar html = "<htlm><body><h1>Hello World</h1></body></html>";\nvar js = "init = function() { console.log(\'init function\');};"\nvar css = "body {background: rgba(234, 159, 195, 0.8);}"\nenv.put("hello.html", {val: html});\nenv.put("hello.js", {val: js});\nenv.put("hello.css", {val: css});\nvar appOptions = {\n\tid: "hello",\n\ttitle: "My fabulous app",\n\tshow: true\n};\nenv.load(appOptions);'+r;e(n)}else if("load"===t){var n='Load a webapp from the database into the browser window.\nThe version to use must currently be specified explicitely:\n\nvar a = new Htmlapp();\na.init()\n.then(function(){return a.load("hello-0.0.1");})\n.then(function(){return a.show("hello");})'+r;e(n)}else if("unload"===t){var n='HtmlappInstance.unload(<webapp id>) - Remove a webapp from the browser window. See htmlapp.help("load") for more information about webapp ids.\nenv.unload("hello")'+r;e(n)}else if("get"===t){var n='Get the contents of a file:\n\nHtmlappInstance.get(<filename>) - exmaple of how the contents of a file is fetched and then printed:\n\nenv.get("hello.html").then(console.log.bind(console))';e(n)}else if("put"===t){var n='HtmlappInstance.put(filename, data) - save new contents into a file. Only JavaScript Object can be saved (see Htmlapp.help("objects")).\nThis is an example of how new content is saved into file:\n\nenv.put("hello.html", {val: "Some random content"})'+r;e(n)}else if("misc"===t){var n='The flow function makes it possible to combine functions.The load exmaple can for instance be written like this:\n\nvar a = new Htmlapp();\nflow(a.init.bind(a), a.load.bind(a, "hello-0.0.1"), a.show.bind(a, "hello"))()\n\nThis is another example where the log function is used, shorthand for console.log.bind(console)\n\nflow(a.keys.bind(a), log)()';e(n)}else e("Unknown help topic: "+t)}},window.Htmlapp=r,n("htmlapp is loaded."),e("Welcome to htmlapp!"),e("Htmlapp let's you develop web and mobile apps easily. All you need is your web browser."),e("Show the help with Htmlapp.help()")}();